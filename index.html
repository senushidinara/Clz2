<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NeuroMind Elite | Ultimate Cognitive Training Platform</title>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        
        :root {
            /* Dashboard - Blue Ocean */
            --dashboard-primary: #1e40af;
            --dashboard-secondary: #3b82f6;
            --dashboard-accent: #60a5fa;
            --dashboard-bg: linear-gradient(135deg, #1e3a8a 0%, #1e40af 50%, #3b82f6 100%);
            
            /* Assessment - Purple Power */
            --assessment-primary: #7c3aed;
            --assessment-secondary: #a855f7;
            --assessment-accent: #c084fc;
            --assessment-bg: linear-gradient(135deg, #6b21a8 0%, #7c3aed 50%, #a855f7 100%);
            
            /* Training - Red Energy */
            --training-primary: #dc2626;
            --training-secondary: #ef4444;
            --training-accent: #f87171;
            --training-bg: linear-gradient(135deg, #b91c1c 0%, #dc2626 50%, #ef4444 100%);
            
            /* Progress - Green Growth */
            --progress-primary: #059669;
            --progress-secondary: #10b981;
            --progress-accent: #34d399;
            --progress-bg: linear-gradient(135deg, #047857 0%, #059669 50%, #10b981 100%);
            
            /* Meditation - Teal Calm */
            --meditation-primary: #0d9488;
            --meditation-secondary: #14b8a6;
            --meditation-accent: #5eead4;
            --meditation-bg: linear-gradient(135deg, #0f766e 0%, #0d9488 50%, #14b8a6 100%);
            
            /* Sleep - Indigo Night */
            --sleep-primary: #4338ca;
            --sleep-secondary: #6366f1;
            --sleep-accent: #818cf8;
            --sleep-bg: linear-gradient(135deg, #3730a3 0%, #4338ca 50%, #6366f1 100%);
            
            /* EEG - Orange Neural */
            --eeg-primary: #ea580c;
            --eeg-secondary: #f97316;
            --eeg-accent: #fb923c;
            --eeg-bg: linear-gradient(135deg, #c2410c 0%, #ea580c 50%, #f97316 100%);
            
            /* Insights - Pink Emotion */
            --insights-primary: #db2777;
            --insights-secondary: #ec4899;
            --insights-accent: #f472b6;
            --insights-bg: linear-gradient(135deg, #be185d 0%, #db2777 50%, #ec4899 100%);
            
            /* AI Coach - Yellow Intelligence */
            --coach-primary: #d97706;
            --coach-secondary: #f59e0b;
            --coach-accent: #fbbf24;
            --coach-bg: linear-gradient(135deg, #b45309 0%, #d97706 50%, #f59e0b 100%);
            
            /* Global Colors */
            --dark: #0f172a;
            --darker: #020617;
            --card-bg: rgba(15, 23, 42, 0.7);
            --glass: rgba(255, 255, 255, 0.1);
            --glass-strong: rgba(255, 255, 255, 0.15);
            --text: #f1f5f9;
            --text-muted: #94a3b8;
            --border: rgba(255, 255, 255, 0.2);
            --success: #22c55e;
            --warning: #f59e0b;
            --danger: #ef4444;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        }

        body {
            background: linear-gradient(135deg, var(--darker) 0%, #1e293b 50%, var(--dark) 100%);
            color: var(--text);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 20%, rgba(59, 130, 246, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(168, 85, 247, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 70%, rgba(34, 197, 94, 0.05) 0%, transparent 50%);
            pointer-events: none;
            z-index: -1;
        }

        .app-container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 2rem;
            position: relative;
            z-index: 1;
        }

        /* Header Styles */
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 2rem 0;
            margin-bottom: 2rem;
            border-bottom: 1px solid var(--border);
            background: var(--glass);
            border-radius: 24px;
            backdrop-filter: blur(20px);
            padding: 2rem 3rem;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 1rem;
            font-size: 2.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, #60a5fa, #a855f7, #34d399);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 30px rgba(96, 165, 250, 0.5);
        }

        .user-stats {
            display: flex;
            gap: 1.5rem;
            font-size: 0.9rem;
        }

        .stat-item {
            text-align: center;
            padding: 1rem 1.5rem;
            background: var(--glass-strong);
            border-radius: 16px;
            backdrop-filter: blur(10px);
            border: 1px solid var(--border);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .stat-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.6), transparent);
            transition: left 0.5s;
        }

        .stat-item:hover::before {
            left: 100%;
        }

        .stat-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .stat-item div:first-child {
            color: var(--text-muted);
            font-size: 0.8rem;
            margin-bottom: 0.5rem;
        }

        .stat-item div:last-child {
            font-weight: 700;
            font-size: 1.5rem;
            color: var(--text);
        }

        /* Navigation Tabs */
        .nav-tabs {
            display: flex;
            background: var(--glass);
            border-radius: 24px;
            padding: 1rem;
            margin-bottom: 3rem;
            backdrop-filter: blur(20px);
            border: 1px solid var(--border);
            flex-wrap: wrap;
            gap: 0.5rem;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }

        .tab-btn {
            flex: 1;
            padding: 1rem 1.5rem;
            background: transparent;
            border: none;
            color: var(--text-muted);
            font-weight: 600;
            border-radius: 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            min-width: 140px;
            font-size: 0.9rem;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .tab-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--glass);
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.3s ease;
            z-index: -1;
        }

        .tab-btn:hover::before {
            transform: scaleX(1);
        }

        .tab-btn:hover {
            color: var(--text);
            transform: translateY(-2px);
        }

        /* Active Tab Colors */
        .tab-btn[data-tab="dashboard"].active {
            background: var(--dashboard-bg);
            color: white;
            box-shadow: 0 8px 25px rgba(30, 64, 175, 0.4);
        }

        .tab-btn[data-tab="assessment"].active {
            background: var(--assessment-bg);
            color: white;
            box-shadow: 0 8px 25px rgba(124, 58, 237, 0.4);
        }

        .tab-btn[data-tab="training"].active {
            background: var(--training-bg);
            color: white;
            box-shadow: 0 8px 25px rgba(220, 38, 38, 0.4);
        }

        .tab-btn[data-tab="progress"].active {
            background: var(--progress-bg);
            color: white;
            box-shadow: 0 8px 25px rgba(5, 150, 105, 0.4);
        }

        .tab-btn[data-tab="meditation"].active {
            background: var(--meditation-bg);
            color: white;
            box-shadow: 0 8px 25px rgba(13, 148, 136, 0.4);
        }

        .tab-btn[data-tab="sleep"].active {
            background: var(--sleep-bg);
            color: white;
            box-shadow: 0 8px 25px rgba(67, 56, 202, 0.4);
        }

        .tab-btn[data-tab="eeg"].active {
            background: var(--eeg-bg);
            color: white;
            box-shadow: 0 8px 25px rgba(234, 88, 12, 0.4);
        }

        .tab-btn[data-tab="insights"].active {
            background: var(--insights-bg);
            color: white;
            box-shadow: 0 8px 25px rgba(219, 39, 119, 0.4);
        }

        .tab-btn[data-tab="coach"].active {
            background: var(--coach-bg);
            color: white;
            box-shadow: 0 8px 25px rgba(217, 119, 6, 0.4);
        }

        /* Tab Content */
        .tab-content {
            display: none;
            animation: fadeInUp 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Card Layouts */
        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .card {
            background: var(--card-bg);
            border-radius: 24px;
            overflow: hidden;
            backdrop-filter: blur(20px);
            border: 1px solid var(--border);
            transition: all 0.4s ease;
            position: relative;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--current-gradient, linear-gradient(90deg, #60a5fa, #a855f7));
            transition: all 0.3s ease;
        }

        .card:hover {
            transform: translateY(-8px);
            box-shadow: 0 25px 50px rgba(0,0,0,0.3);
            border-color: rgba(255,255,255,0.3);
        }

        .card.full-width {
            grid-column: 1 / -1;
        }

        .card-header {
            padding: 2rem;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
            font-size: 1.5rem;
            font-weight: 700;
            position: relative;
        }

        .card-body {
            padding: 2rem;
        }

        /* Section-Specific Card Colors */
        #dashboard .card::before {
            background: var(--dashboard-bg);
        }

        #assessment .card::before {
            background: var(--assessment-bg);
        }

        #training .card::before {
            background: var(--training-bg);
        }

        #progress .card::before {
            background: var(--progress-bg);
        }

        #meditation .card::before {
            background: var(--meditation-bg);
        }

        #sleep .card::before {
            background: var(--sleep-bg);
        }

        #eeg .card::before {
            background: var(--eeg-bg);
        }

        #insights .card::before {
            background: var(--insights-bg);
        }

        #coach .card::before {
            background: var(--coach-bg);
        }

        /* Button Styles */
        .btn {
            padding: 1rem 2rem;
            font-size: 1rem;
            border-radius: 16px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            margin: 0.5rem 0.5rem 0.5rem 0;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.3);
        }

        .btn:active {
            transform: translateY(-1px);
        }

        .btn.primary {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
        }

        .btn.secondary {
            background: linear-gradient(135deg, #a855f7, #7c3aed);
            color: white;
        }

        .btn.success {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
        }

        .btn.danger {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
        }

        .btn.warning {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
        }

        .btn:disabled {
            background: var(--text-muted);
            cursor: not-allowed;
            transform: none;
            opacity: 0.6;
        }

        /* Progress Overview */
        .progress-overview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .progress-stat {
            background: var(--glass-strong);
            padding: 2rem;
            border-radius: 20px;
            text-align: center;
            backdrop-filter: blur(15px);
            border: 1px solid var(--border);
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .progress-stat::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--progress-bg);
        }

        .progress-stat:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
        }

        .progress-stat h3 {
            color: var(--progress-accent);
            font-size: 3rem;
            margin-bottom: 0.5rem;
            font-weight: 800;
            text-shadow: 0 0 20px rgba(52, 211, 153, 0.3);
        }

        .progress-stat p {
            color: var(--text-muted);
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-size: 0.9rem;
        }

        /* Assessment Tests */
        .test-container {
            text-align: center;
            position: relative;
            padding: 2rem 0;
        }

        .reaction-test {
            width: 200px;
            height: 200px;
            margin: 2rem auto;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 4px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .reaction-test::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: conic-gradient(from 0deg, transparent, var(--assessment-primary), transparent);
            animation: rotate 2s linear infinite;
            z-index: -1;
        }

        .reaction-test.waiting {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            box-shadow: 0 0 30px rgba(239, 68, 68, 0.5);
        }

        .reaction-test.ready {
            background: linear-gradient(135deg, #22c55e, #16a34a);
            box-shadow: 0 0 30px rgba(34, 197, 94, 0.5);
        }

        .reaction-test.clicked {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            box-shadow: 0 0 30px rgba(245, 158, 11, 0.5);
        }

        @keyframes rotate {
            to {
                transform: rotate(360deg);
            }
        }

        /* Memory Grid */
        .memory-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
            max-width: 400px;
            margin: 2rem auto;
        }

        .memory-item {
            aspect-ratio: 1;
            background: var(--glass-strong);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .memory-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
            transform: translateX(-100%);
            transition: transform 0.5s;
        }

        .memory-item:hover::before {
            transform: translateX(100%);
        }

        .memory-item:hover {
            background: var(--assessment-primary);
            border-color: var(--assessment-accent);
            transform: scale(1.05);
        }

        .memory-item.highlighted {
            background: var(--assessment-secondary);
            border-color: var(--assessment-accent);
            animation: pulse 0.6s ease-in-out;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        /* Spatial Puzzle */
        .spatial-puzzle {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            max-width: 300px;
            margin: 2rem auto;
        }

        .puzzle-piece {
            aspect-ratio: 1;
            background: var(--glass-strong);
            border-radius: 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .puzzle-piece:hover {
            background: var(--assessment-primary);
            border-color: var(--assessment-accent);
            transform: scale(1.05);
        }

        .puzzle-piece.correct {
            background: var(--success);
            border-color: #16a34a;
            animation: successPulse 0.6s ease;
        }

        .puzzle-piece.incorrect {
            background: var(--danger);
            border-color: #dc2626;
            animation: errorShake 0.6s ease;
        }

        @keyframes successPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        @keyframes errorShake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        /* Attention Task */
        .attention-task {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 200px;
            gap: 2rem;
            flex-wrap: wrap;
        }

        .attention-target {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--glass-strong);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .attention-target:hover {
            transform: scale(1.1);
        }

        .attention-target.active {
            background: var(--assessment-primary);
            border-color: var(--assessment-accent);
            animation: attentionPulse 1s infinite;
            box-shadow: 0 0 20px var(--assessment-primary);
        }

        @keyframes attentionPulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.2); opacity: 0.8; }
        }

        /* Meditation Styles */
        .meditation-controls {
            text-align: center;
            margin: 2rem 0;
        }

        .breathing-circle {
            width: 250px;
            height: 250px;
            border-radius: 50%;
            margin: 2rem auto;
            background: var(--meditation-bg);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            font-weight: 600;
            position: relative;
            overflow: hidden;
            box-shadow: 0 0 50px rgba(13, 148, 136, 0.5);
        }

        .breathing-circle::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: conic-gradient(
                from 0deg,
                transparent,
                rgba(255,255,255,0.1),
                transparent,
                rgba(255,255,255,0.1),
                transparent
            );
            animation: rotate 4s linear infinite;
        }

        .breathing-circle.inhale {
            animation: breatheIn 4s ease-in-out infinite;
        }

        .breathing-circle.exhale {
            animation: breatheOut 4s ease-in-out infinite;
        }

        @keyframes breatheIn {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.3); }
        }

        @keyframes breatheOut {
            0%, 100% { transform: scale(1.3); }
            50% { transform: scale(0.7); }
        }

        /* Sleep Styles */
        .sleep-log {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }

        .sleep-input {
            padding: 1rem;
            background: var(--glass-strong);
            border-radius: 12px;
            border: 1px solid var(--border);
            color: var(--text);
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .sleep-input:focus {
            outline: none;
            border-color: var(--sleep-primary);
            box-shadow: 0 0 20px rgba(67, 56, 202, 0.3);
        }

        .sleep-phase {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem;
            margin: 1rem 0;
            background: var(--glass-strong);
            border-radius: 16px;
            border-left: 4px solid var(--sleep-primary);
            transition: all 0.3s ease;
        }

        .sleep-phase:hover {
            background: var(--glass);
            transform: translateX(5px);
        }

        /* EEG Visualization */
        .eeg-container {
            position: relative;
            height: 500px;
            background: var(--darker);
            border-radius: 20px;
            overflow: hidden;
            border: 2px solid var(--border);
            background: 
                linear-gradient(90deg, transparent 0%, rgba(234, 88, 12, 0.1) 50%, transparent 100%),
                var(--darker);
        }

        .brainwave {
            height: 80px;
            margin: 15px 0;
            position: relative;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .brainwave-label {
            position: absolute;
            left: 2rem;
            top: 50%;
            transform: translateY(-50%);
            font-weight: 600;
            font-size: 0.9rem;
            z-index: 10;
            background: var(--darker);
            padding: 0.5rem 1rem;
            border-radius: 8px;
            border: 1px solid var(--border);
        }

        .wave-line {
            height: 100%;
            background: linear-gradient(90deg, transparent, var(--wave-color, #60a5fa), transparent);
            animation: wave 2s linear infinite;
            position: relative;
        }

        .wave-delta .wave-line {
            --wave-color: #8b5cf6;
            animation-duration: 3s;
            background: linear-gradient(90deg, transparent, #8b5cf6, transparent);
        }

        .wave-theta .wave-line {
            --wave-color: #06b6d4;
            animation-duration: 2.5s;
            background: linear-gradient(90deg, transparent, #06b6d4, transparent);
        }

        .wave-alpha .wave-line {
            --wave-color: #10b981;
            animation-duration: 2s;
            background: linear-gradient(90deg, transparent, #10b981, transparent);
        }

        .wave-beta .wave-line {
            --wave-color: #f59e0b;
            animation-duration: 1.5s;
            background: linear-gradient(90deg, transparent, #f59e0b, transparent);
        }

        .wave-gamma .wave-line {
            --wave-color: #ef4444;
            animation-duration: 1s;
            background: linear-gradient(90deg, transparent, #ef4444, transparent);
        }

        @keyframes wave {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100vw); }
        }

        /* Mood Tracking */
        .mood-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }

        .mood-btn {
            padding: 1.5rem;
            background: var(--glass-strong);
            border: none;
            border-radius: 16px;
            font-size: 2.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .mood-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
            transform: translateX(-100%);
            transition: transform 0.5s;
        }

        .mood-btn:hover::before {
            transform: translateX(100%);
        }

        .mood-btn:hover {
            background: var(--insights-primary);
            border-color: var(--insights-accent);
            transform: scale(1.1);
        }

        .mood-btn.selected {
            background: var(--insights-secondary);
            border-color: var(--insights-accent);
            box-shadow: 0 0 25px rgba(219, 39, 119, 0.5);
        }

        .memory-emotion-btn {
            padding: 1rem;
            background: var(--glass-strong);
            border: none;
            border-radius: 12px;
            font-size: 1.8rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .memory-emotion-btn:hover {
            background: var(--insights-primary);
            border-color: var(--insights-accent);
            transform: scale(1.1);
        }

        .memory-emotion-btn.selected {
            background: var(--insights-secondary);
            border-color: var(--insights-accent);
        }

        /* Export Options */
        .export-options {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            margin: 1rem 0;
        }

        .data-summary {
            background: var(--glass-strong);
            padding: 1.5rem;
            border-radius: 16px;
            margin: 1rem 0;
            border: 1px solid var(--border);
        }

        .data-summary h4 {
            color: var(--insights-accent);
            margin-bottom: 1rem;
            font-size: 1.2rem;
        }

        /* Progress Charts */
        .progress-chart {
            height: 400px;
            margin: 1rem 0;
            position: relative;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .app-container {
                padding: 1rem;
            }
            
            .nav-tabs {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .tab-btn {
                min-width: auto;
                justify-content: flex-start;
            }
            
            .card-grid {
                grid-template-columns: 1fr;
            }
            
            .user-stats {
                flex-direction: column;
                gap: 1rem;
            }
            
            .progress-overview {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .logo {
                font-size: 2rem;
            }
            
            header {
                flex-direction: column;
                gap: 2rem;
                text-align: center;
            }
        }

        @media (max-width: 480px) {
            .progress-overview {
                grid-template-columns: 1fr;
            }
            
            .card-grid {
                gap: 1rem;
            }
            
            .card {
                border-radius: 16px;
            }
            
            .card-header, .card-body {
                padding: 1.5rem;
            }
        }

        /* Additional Animations */
        @keyframes slideInFromLeft {
            from {
                opacity: 0;
                transform: translateX(-50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideInFromRight {
            from {
                opacity: 0;
                transform: translateX(50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes scaleIn {
            from {
                opacity: 0;
                transform: scale(0.8);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .card:nth-child(odd) {
            animation: slideInFromLeft 0.6s ease-out;
        }

        .card:nth-child(even) {
            animation: slideInFromRight 0.6s ease-out;
        }

        .progress-stat {
            animation: scaleIn 0.6s ease-out;
        }

        .progress-stat:nth-child(1) { animation-delay: 0.1s; }
        .progress-stat:nth-child(2) { animation-delay: 0.2s; }
        .progress-stat:nth-child(3) { animation-delay: 0.3s; }
        .progress-stat:nth-child(4) { animation-delay: 0.4s; }

        /* Enhanced Focus States */
        .btn:focus-visible,
        .sleep-input:focus-visible,
        .tab-btn:focus-visible {
            outline: 2px solid var(--text);
            outline-offset: 2px;
        }

        /* Loading States */
        .loading {
            position: relative;
            overflow: hidden;
        }

        .loading::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            animation: loading 1.5s infinite;
        }

        @keyframes loading {
            0% { left: -100%; }
            100% { left: 100%; }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <header>
            <div class="logo">
                <i class="fas fa-brain"></i>
                NeuroMind Elite
            </div>
            <div class="user-stats">
                <div class="stat-item">
                    <div>Cognitive Score</div>
                    <div id="header-cognitive-score">85</div>
                </div>
                <div class="stat-item">
                    <div>Sessions</div>
                    <div id="header-sessions">47</div>
                </div>
                <div class="stat-item">
                    <div>Streak</div>
                    <div id="header-streak">12 days</div>
                </div>
                <div class="stat-item">
                    <div>Level</div>
                    <div id="header-level">Expert</div>
                </div>
            </div>
        </header>

        <nav class="nav-tabs">
            <button class="tab-btn active" data-tab="dashboard">
                <i class="fas fa-chart-line"></i> Dashboard
            </button>
            <button class="tab-btn" data-tab="assessment">
                <i class="fas fa-flask"></i> Assessment
            </button>
            <button class="tab-btn" data-tab="training">
                <i class="fas fa-dumbbell"></i> Training
            </button>
            <button class="tab-btn" data-tab="progress">
                <i class="fas fa-chart-bar"></i> Progress
            </button>
            <button class="tab-btn" data-tab="meditation">
                <i class="fas fa-leaf"></i> Meditation
            </button>
            <button class="tab-btn" data-tab="sleep">
                <i class="fas fa-moon"></i> Sleep
            </button>
            <button class="tab-btn" data-tab="eeg">
                <i class="fas fa-brain"></i> EEG
            </button>
            <button class="tab-btn" data-tab="insights">
                <i class="fas fa-lightbulb"></i> Insights
            </button>
            <button class="tab-btn" data-tab="coach">
                <i class="fas fa-robot"></i> AI Coach
            </button>
        </nav>

        <!-- Dashboard Tab -->
        <div id="dashboard" class="tab-content active">
            <div class="card-grid">
                <div class="card">
                    <div class="card-header">
                        <span>Cognitive Score Overview</span>
                        <i class="fas fa-brain"></i>
                    </div>
                    <div class="card-body">
                        <div style="height: 300px; position: relative;">
                            <canvas id="cognitiveScoreChart"></canvas>
                        </div>
                        <div style="display: flex; justify-content: space-around; margin-top: 2rem; gap: 1rem;">
                            <div style="text-align: center;">
                                <span style="color: var(--dashboard-accent); font-weight: 600;">Focus</span>
                                <div style="width: 100px; height: 10px; background: var(--glass); border-radius: 5px; margin: 0.5rem auto; overflow: hidden;">
                                    <div id="focus-score-bar" style="height: 100%; width: 85%; background: linear-gradient(90deg, var(--dashboard-primary), var(--dashboard-accent)); border-radius: 5px; transition: width 1s ease;"></div>
                                </div>
                                <span style="font-size: 0.9rem; color: var(--text-muted);">85%</span>
                            </div>
                            <div style="text-align: center;">
                                <span style="color: var(--dashboard-accent); font-weight: 600;">Memory</span>
                                <div style="width: 100px; height: 10px; background: var(--glass); border-radius: 5px; margin: 0.5rem auto; overflow: hidden;">
                                    <div id="memory-score-bar" style="height: 100%; width: 78%; background: linear-gradient(90deg, var(--assessment-primary), var(--assessment-accent)); border-radius: 5px; transition: width 1s ease;"></div>
                                </div>
                                <span style="font-size: 0.9rem; color: var(--text-muted);">78%</span>
                            </div>
                            <div style="text-align: center;">
                                <span style="color: var(--dashboard-accent); font-weight: 600;">Resilience</span>
                                <div style="width: 100px; height: 10px; background: var(--glass); border-radius: 5px; margin: 0.5rem auto; overflow: hidden;">
                                    <div id="resilience-score-bar" style="height: 100%; width: 92%; background: linear-gradient(90deg, var(--progress-primary), var(--progress-accent)); border-radius: 5px; transition: width 1s ease;"></div>
                                </div>
                                <span style="font-size: 0.9rem; color: var(--text-muted);">92%</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <span>Today's Summary</span>
                        <i class="fas fa-calendar-day"></i>
                    </div>
                    <div class="card-body">
                        <div id="daily-summary" style="space-y: 1rem;">
                            <p style="margin: 1rem 0; display: flex; justify-content: space-between; align-items: center;">
                                <span><i class="fas fa-target" style="color: var(--dashboard-accent); margin-right: 0.5rem;"></i><strong>Tests Completed:</strong></span>
                                <span id="daily-tests" style="color: var(--dashboard-accent); font-weight: 700;">5</span>
                            </p>
                            <p style="margin: 1rem 0; display: flex; justify-content: space-between; align-items: center;">
                                <span><i class="fas fa-clock" style="color: var(--training-accent); margin-right: 0.5rem;"></i><strong>Training Time:</strong></span>
                                <span id="daily-time" style="color: var(--training-accent); font-weight: 700;">25 min</span>
                            </p>
                            <p style="margin: 1rem 0; display: flex; justify-content: space-between; align-items: center;">
                                <span><i class="fas fa-leaf" style="color: var(--meditation-accent); margin-right: 0.5rem;"></i><strong>Meditation:</strong></span>
                                <span id="daily-meditation" style="color: var(--meditation-accent); font-weight: 700;">15 min</span>
                            </p>
                            <p style="margin: 1rem 0; display: flex; justify-content: space-between; align-items: center;">
                                <span><i class="fas fa-smile" style="color: var(--insights-accent); margin-right: 0.5rem;"></i><strong>Mood:</strong></span>
                                <span id="daily-mood" style="color: var(--insights-accent); font-weight: 700;">Energized</span>
                            </p>
                            <p style="margin: 1rem 0; display: flex; justify-content: space-between; align-items: center;">
                                <span><i class="fas fa-moon" style="color: var(--sleep-accent); margin-right: 0.5rem;"></i><strong>Sleep:</strong></span>
                                <span id="daily-sleep" style="color: var(--sleep-accent); font-weight: 700;">8.2 hrs</span>
                            </p>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span>Quick Actions</span>
                        <i class="fas fa-bolt"></i>
                    </div>
                    <div class="card-body">
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem;">
                            <button class="btn primary" onclick="switchTab('assessment')">
                                <i class="fas fa-play"></i> Quick Test
                            </button>
                            <button class="btn secondary" onclick="switchTab('meditation')">
                                <i class="fas fa-leaf"></i> Meditate
                            </button>
                            <button class="btn success" onclick="switchTab('training')">
                                <i class="fas fa-dumbbell"></i> Train Brain
                            </button>
                            <button class="btn warning" onclick="switchTab('sleep')">
                                <i class="fas fa-moon"></i> Log Sleep
                            </button>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span>Recent Achievements</span>
                        <i class="fas fa-trophy"></i>
                    </div>
                    <div class="card-body">
                        <div style="space-y: 1rem;">
                            <div style="display: flex; align-items: center; gap: 1rem; padding: 1rem; background: var(--glass-strong); border-radius: 12px; margin: 0.5rem 0;">
                                <i class="fas fa-fire" style="color: var(--training-accent); font-size: 1.5rem;"></i>
                                <div>
                                    <div style="font-weight: 600;">12-Day Streak!</div>
                                    <div style="color: var(--text-muted); font-size: 0.9rem;">Consistency Champion</div>
                                </div>
                            </div>
                            <div style="display: flex; align-items: center; gap: 1rem; padding: 1rem; background: var(--glass-strong); border-radius: 12px; margin: 0.5rem 0;">
                                <i class="fas fa-brain" style="color: var(--assessment-accent); font-size: 1.5rem;"></i>
                                <div>
                                    <div style="font-weight: 600;">Memory Master</div>
                                    <div style="color: var(--text-muted); font-size: 0.9rem;">Reached Level 10 N-Back</div>
                                </div>
                            </div>
                            <div style="display: flex; align-items: center; gap: 1rem; padding: 1rem; background: var(--glass-strong); border-radius: 12px; margin: 0.5rem 0;">
                                <i class="fas fa-zap" style="color: var(--dashboard-accent); font-size: 1.5rem;"></i>
                                <div>
                                    <div style="font-weight: 600;">Lightning Reflexes</div>
                                    <div style="color: var(--text-muted); font-size: 0.9rem;">Sub-200ms reaction time</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Assessment Tab -->
        <div id="assessment" class="tab-content">
            <div class="card-grid">
                <div class="card">
                    <div class="card-header">
                        <span>Reaction Time Test</span>
                        <i class="fas fa-stopwatch"></i>
                    </div>
                    <div class="card-body">
                        <div class="test-container">
                            <div id="reaction-circle" class="reaction-test waiting">Click when GREEN</div>
                            <p id="reaction-result" style="margin: 1rem 0; font-weight: 600;">
                                Best: <span id="best-reaction" style="color: var(--assessment-accent);">185ms</span> | 
                                Last: <span id="last-reaction" style="color: var(--assessment-accent);">--</span>
                            </p>
                            <button class="btn primary" id="start-reaction-test">
                                <i class="fas fa-play"></i> Start Test
                            </button>
                            <div style="margin-top: 1rem; color: var(--text-muted); font-size: 0.9rem;">
                                <p>Tap as quickly as possible when the circle turns green!</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span>N-Back Memory Test</span>
                        <i class="fas fa-memory"></i>
                    </div>
                    <div class="card-body">
                        <div class="test-container">
                            <p id="memory-instructions" style="margin-bottom: 1rem; color: var(--assessment-accent); font-weight: 600;">Watch the sequence, then repeat it</p>
                            <div class="memory-grid" id="memory-test-grid">
                                <!-- Grid items will be populated by JavaScript -->
                            </div>
                            <p id="memory-score" style="margin: 1rem 0; font-weight: 600;">
                                Score: <span id="memory-test-score" style="color: var(--assessment-accent);">0</span> | 
                                Level: <span id="memory-level" style="color: var(--assessment-accent);">1</span>
                            </p>
                            <button class="btn primary" id="start-memory-test">
                                <i class="fas fa-play"></i> Start Memory Test
                            </button>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span>Spatial Reasoning</span>
                        <i class="fas fa-puzzle-piece"></i>
                    </div>
                    <div class="card-body">
                        <div class="test-container">
                            <p id="spatial-instructions" style="margin-bottom: 1rem; color: var(--assessment-accent); font-weight: 600;">Find the pattern and complete the sequence</p>
                            <div class="spatial-puzzle" id="spatial-puzzle">
                                <!-- Puzzle pieces will be populated by JavaScript -->
                            </div>
                            <p id="spatial-score" style="margin: 1rem 0; font-weight: 600;">
                                Correct: <span id="spatial-correct" style="color: var(--success);">0</span> | 
                                Total: <span id="spatial-total" style="color: var(--assessment-accent);">0</span>
                            </p>
                            <button class="btn primary" id="start-spatial-test">
                                <i class="fas fa-play"></i> Start Spatial Test
                            </button>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span>Attention & Focus</span>
                        <i class="fas fa-eye"></i>
                    </div>
                    <div class="card-body">
                        <div class="test-container">
                            <p id="attention-instructions" style="margin-bottom: 1rem; color: var(--assessment-accent); font-weight: 600;">Click only the purple targets as they appear</p>
                            <div class="attention-task" id="attention-task">
                                <!-- Attention targets will be populated by JavaScript -->
                            </div>
                            <p id="attention-score" style="margin: 1rem 0; font-weight: 600;">
                                Accuracy: <span id="attention-accuracy" style="color: var(--success);">--</span>% | 
                                Speed: <span id="attention-speed" style="color: var(--assessment-accent);">--</span>ms
                            </p>
                            <button class="btn primary" id="start-attention-test">
                                <i class="fas fa-play"></i> Start Attention Test
                            </button>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span>Stroop Color Test</span>
                        <i class="fas fa-palette"></i>
                    </div>
                    <div class="card-body">
                        <div class="test-container">
                            <p style="margin-bottom: 1rem; color: var(--assessment-accent); font-weight: 600;">Name the COLOR of the word, not the word itself</p>
                            <div id="stroop-word" style="font-size: 3rem; font-weight: bold; margin: 2rem 0; min-height: 80px; display: flex; align-items: center; justify-content: center;">Ready?</div>
                            <div id="stroop-buttons" style="display: none; gap: 1rem;">
                                <button class="btn" data-color="red" style="background: #ef4444;">Red</button>
                                <button class="btn" data-color="blue" style="background: #3b82f6;">Blue</button>
                                <button class="btn" data-color="green" style="background: #22c55e;">Green</button>
                                <button class="btn" data-color="yellow" style="background: #eab308;">Yellow</button>
                            </div>
                            <p id="stroop-score" style="margin: 1rem 0; font-weight: 600;">
                                Correct: <span id="stroop-correct" style="color: var(--success);">0</span> | 
                                Errors: <span id="stroop-errors" style="color: var(--danger);">0</span>
                            </p>
                            <button class="btn primary" id="start-stroop-test">
                                <i class="fas fa-play"></i> Start Stroop Test
                            </button>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span>Working Memory Span</span>
                        <i class="fas fa-list-ol"></i>
                    </div>
                    <div class="card-body">
                        <div class="test-container">
                            <p style="margin-bottom: 1rem; color: var(--assessment-accent); font-weight: 600;">Remember the sequence of numbers</p>
                            <div id="digit-span-display" style="font-size: 2.5rem; font-weight: bold; margin: 2rem 0; min-height: 60px; display: flex; align-items: center; justify-content: center; color: var(--assessment-accent);">Ready?</div>
                            <input type="text" id="digit-span-input" placeholder="Enter the sequence..." style="width: 100%; padding: 1rem; font-size: 1.2rem; text-align: center; background: var(--glass-strong); border: 1px solid var(--border); border-radius: 12px; color: var(--text); margin: 1rem 0; display: none;">
                            <p id="digit-span-score" style="margin: 1rem 0; font-weight: 600;">
                                Current Span: <span id="current-span" style="color: var(--assessment-accent);">0</span> digits
                            </p>
                            <button class="btn primary" id="start-digit-span-test">
                                <i class="fas fa-play"></i> Start Digit Span Test
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Training Tab -->
        <div id="training" class="tab-content">
            <div class="card-grid">
                <div class="card">
                    <div class="card-header">
                        <span>Synaptic Pathway</span>
                        <i class="fas fa-project-diagram"></i>
                    </div>
                    <div class="card-body" style="position:relative; text-align:center;">
                        <div id="memory-game-overlay" style="position: absolute; top:0; left:0; right:0; bottom:0; background:rgba(0,0,0,0.8); display:none; flex-direction:column; justify-content:center; align-items:center; z-index:10; border-radius: 20px;">
                            <h2 id="game-over-title" style="font-size: 2rem; margin-bottom: 1rem; color: var(--training-accent);">You Won!</h2>
                            <button class="btn primary" id="restart-game-btn">
                                <i class="fas fa-redo"></i> Play Again
                            </button>
                        </div>
                        <div id="memory-game-stats" style="display:flex; justify-content:space-around; margin-bottom:1rem; font-weight: 600;">
                            <span style="color: var(--training-accent);">Time: <b id="game-time">30</b>s</span>
                            <span style="color: var(--training-accent);">Moves: <b id="game-moves">0</b></span>
                        </div>
                        <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem; max-width: 400px; margin: 1rem auto; perspective: 1000px;" id="memory-game-board"></div>
                        <button class="btn primary" id="start-game-btn">
                            <i class="fas fa-play"></i> Start Game
                        </button>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span>GABA/Glutamate Balance</span>
                        <i class="fas fa-balance-scale"></i>
                    </div>
                    <div class="card-body">
                        <p style="margin-bottom: 2rem; color: var(--text-muted);">Exercises designed to promote neurotransmitter balance</p>
                        <div style="text-align: center; margin: 2rem 0;">
                            <div style="display: flex; justify-content: space-between; margin: 1rem 0; font-weight: 600;">
                                <span style="color: var(--meditation-accent);">Relaxation (GABA)</span>
                                <span style="color: var(--training-accent);">Focus (Glutamate)</span>
                            </div>
                            <div style="height: 20px; background: linear-gradient(90deg, var(--meditation-primary) 0%, var(--glass) 50%, var(--training-primary) 100%); border-radius: 10px; position: relative; border: 1px solid var(--border);">
                                <div id="neurotransmitter-indicator" style="width: 20px; height: 20px; background: white; border-radius: 50%; position: absolute; top: 0; left: 50%; transform: translateX(-50%); border: 2px solid var(--border); transition: left 0.5s ease;"></div>
                            </div>
                            <div style="margin-top: 1rem; color: var(--text-muted); font-size: 0.9rem;">
                                <span id="balance-status">Balanced</span>
                            </div>
                        </div>
                        <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                            <button class="btn secondary" id="gaba-exercise">
                                <i class="fas fa-leaf"></i> GABA Boost Exercise
                            </button>
                            <button class="btn primary" id="glutamate-exercise">
                                <i class="fas fa-bolt"></i> Glutamate Focus Exercise
                            </button>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span>Logic Puzzles</span>
                        <i class="fas fa-puzzle-piece"></i>
                    </div>
                    <div class="card-body" id="deduction-puzzle">
                        <div style="background: var(--glass-strong); padding: 1.5rem; border-radius: 12px; margin-bottom: 1.5rem;">
                            <p style="font-weight: 600; color: var(--training-accent); margin-bottom: 1rem;">Logical Deduction Challenge:</p>
                            <p style="line-height: 1.6;">If all Bloops are Bleeps, and no Bleeps are Blips, which statement is definitely true?</p>
                        </div>
                        <div style="display: flex; flex-direction: column; gap: 1rem;">
                            <button class="btn primary option" data-correct="true">No Bloop is a Blip.</button>
                            <button class="btn primary option" data-correct="false">Some Bleeps are Bloops.</button>
                            <button class="btn primary option" data-correct="false">All Blips are Bloops.</button>
                        </div>
                        <p id="puzzle-feedback" style="margin-top:1rem; font-weight:bold; text-align: center; font-size: 1.1rem;"></p>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span>Dual N-Back</span>
                        <i class="fas fa-th"></i>
                    </div>
                    <div class="card-body">
                        <p style="margin-bottom: 1rem; color: var(--text-muted);">Advanced working memory training with visual and auditory stimuli</p>
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; max-width: 300px; margin: 2rem auto;">
                            <div class="dual-nback-cell" data-position="0"></div>
                            <div class="dual-nback-cell" data-position="1"></div>
                            <div class="dual-nback-cell" data-position="2"></div>
                            <div class="dual-nback-cell" data-position="3"></div>
                            <div class="dual-nback-cell" data-position="4"></div>
                            <div class="dual-nback-cell" data-position="5"></div>
                            <div class="dual-nback-cell" data-position="6"></div>
                            <div class="dual-nback-cell" data-position="7"></div>
                            <div class="dual-nback-cell" data-position="8"></div>
                        </div>
                        <div style="display: flex; gap: 1rem; justify-content: center; margin: 1rem 0;">
                            <button class="btn secondary" id="visual-match">Visual Match</button>
                            <button class="btn secondary" id="audio-match">Audio Match</button>
                        </div>
                        <p style="text-align: center; font-weight: 600;">
                            Level: <span id="dual-nback-level" style="color: var(--training-accent);">2</span>
                        </p>
                        <button class="btn primary" id="start-dual-nback">
                            <i class="fas fa-play"></i> Start Dual N-Back
                        </button>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span>Cognitive Flexibility</span>
                        <i class="fas fa-exchange-alt"></i>
                    </div>
                    <div class="card-body">
                        <p style="margin-bottom: 1rem; color: var(--text-muted);">Task-switching exercise to improve mental flexibility</p>
                        <div id="flexibility-task" style="text-align: center; margin: 2rem 0;">
                            <div id="flexibility-instruction" style="font-size: 1.2rem; font-weight: 600; margin-bottom: 1rem; color: var(--training-accent);">Ready to start?</div>
                            <div id="flexibility-stimulus" style="font-size: 4rem; font-weight: bold; margin: 2rem 0; min-height: 100px; display: flex; align-items: center; justify-content: center;">?</div>
                            <div id="flexibility-buttons" style="display: none; gap: 1rem;">
                                <button class="btn primary" data-response="number">Number</button>
                                <button class="btn secondary" data-response="letter">Letter</button>
                                <button class="btn success" data-response="color">Color</button>
                                <button class="btn warning" data-response="shape">Shape</button>
                            </div>
                        </div>
                        <p style="text-align: center; font-weight: 600;">
                            Accuracy: <span id="flexibility-accuracy" style="color: var(--success);">--</span>%
                        </p>
                        <button class="btn primary" id="start-flexibility-test">
                            <i class="fas fa-play"></i> Start Flexibility Test
                        </button>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span>Speed Processing</span>
                        <i class="fas fa-tachometer-alt"></i>
                    </div>
                    <div class="card-body">
                        <p style="margin-bottom: 1rem; color: var(--text-muted);">Rapid symbol matching to improve processing speed</p>
                        <div id="speed-processing-area" style="margin: 2rem 0;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                                <span style="font-weight: 600;">Target:</span>
                                <div id="target-symbol" style="font-size: 2rem; font-weight: bold; padding: 0.5rem 1rem; background: var(--glass-strong); border-radius: 8px;">★</div>
                            </div>
                            <div id="symbol-grid" style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 0.5rem; max-width: 400px; margin: 0 auto;">
                                <!-- Symbols will be populated by JavaScript -->
                            </div>
                        </div>
                        <p style="text-align: center; font-weight: 600;">
                            Found: <span id="symbols-found" style="color: var(--success);">0</span> | 
                            Time: <span id="processing-time" style="color: var(--training-accent);">0</span>s
                        </p>
                        <button class="btn primary" id="start-speed-processing">
                            <i class="fas fa-play"></i> Start Speed Processing
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Progress Tab -->
        <div id="progress" class="tab-content">
            <div class="progress-overview">
                <div class="progress-stat">
                    <h3 id="progress-sessions">47</h3>
                    <p>Total Sessions</p>
                </div>
                <div class="progress-stat">
                    <h3 id="progress-improvement">+24%</h3>
                    <p>This Week</p>
                </div>
                <div class="progress-stat">
                    <h3 id="progress-streak">12</h3>
                    <p>Day Streak</p>
                </div>
                <div class="progress-stat">
                    <h3 id="progress-time">6.8h</h3>
                    <p>Total Time</p>
                </div>
            </div>

            <div class="card-grid">
                <div class="card full-width">
                    <div class="card-header">
                        <span>Progress Over Time</span>
                        <div style="display: flex; gap: 0.5rem;">
                            <button class="btn secondary" id="view-week" style="padding: 0.5rem 1rem; font-size: 0.8rem;">Week</button>
                            <button class="btn primary" id="view-month" style="padding: 0.5rem 1rem; font-size: 0.8rem;">Month</button>
                            <button class="btn secondary" id="view-year" style="padding: 0.5rem 1rem; font-size: 0.8rem;">Year</button>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="progress-chart">
                            <canvas id="progressChart"></canvas>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span>Weekly Summary</span>
                        <i class="fas fa-calendar-week"></i>
                    </div>
                    <div class="card-body">
                        <div id="weekly-stats">
                            <div style="margin: 1rem 0; padding: 1rem; background: var(--glass-strong); border-radius: 12px;">
                                <p style="font-weight: 600; color: var(--progress-accent); margin-bottom: 0.5rem;"><strong>Best Performance:</strong></p>
                                <p style="color: var(--text-muted);">Friday (92 pts) - New personal record!</p>
                            </div>
                            <div style="margin: 1rem 0; padding: 1rem; background: var(--glass-strong); border-radius: 12px;">
                                <p style="font-weight: 600; color: var(--progress-accent); margin-bottom: 0.5rem;"><strong>Most Improved:</strong></p>
                                <p style="color: var(--text-muted);">Spatial Reasoning (+18 pts)</p>
                            </div>
                            <div style="margin: 1rem 0; padding: 1rem; background: var(--glass-strong); border-radius: 12px;">
                                <p style="font-weight: 600; color: var(--progress-accent); margin-bottom: 0.5rem;"><strong>Focus Time:</strong></p>
                                <p style="color: var(--text-muted);">1.2 hours across 5 sessions</p>
                            </div>
                            <div style="margin: 1rem 0; padding: 1rem; background: var(--glass-strong); border-radius: 12px;">
                                <p style="font-weight: 600; color: var(--progress-accent); margin-bottom: 0.5rem;"><strong>Tests Completed:</strong></p>
                                <p style="color: var(--text-muted);">28 assessments this week</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span>Personal Records</span>
                        <i class="fas fa-trophy"></i>
                    </div>
                    <div class="card-body">
                        <div id="personal-records">
                            <div style="display: flex; align-items: center; gap: 1rem; padding: 1rem; background: var(--glass-strong); border-radius: 12px; margin: 0.5rem 0;">
                                <i class="fas fa-stopwatch" style="color: var(--dashboard-accent); font-size: 1.5rem;"></i>
                                <div>
                                    <p style="font-weight: 600;">Reaction Time</p>
                                    <p style="color: var(--dashboard-accent); font-size: 1.2rem; font-weight: 700;">185ms</p>
                                </div>
                            </div>
                            <div style="display: flex; align-items: center; gap: 1rem; padding: 1rem; background: var(--glass-strong); border-radius: 12px; margin: 0.5rem 0;">
                                <i class="fas fa-brain" style="color: var(--assessment-accent); font-size: 1.5rem;"></i>
                                <div>
                                    <p style="font-weight: 600;">Memory Sequence</p>
                                    <p style="color: var(--assessment-accent); font-size: 1.2rem; font-weight: 700;">Level 12</p>
                                </div>
                            </div>
                            <div style="display: flex; align-items: center; gap: 1rem; padding: 1rem; background: var(--glass-strong); border-radius: 12px; margin: 0.5rem 0;">
                                <i class="fas fa-puzzle-piece" style="color: var(--training-accent); font-size: 1.5rem;"></i>
                                <div>
                                    <p style="font-weight: 600;">Spatial Reasoning</p>
                                    <p style="color: var(--training-accent); font-size: 1.2rem; font-weight: 700;">96% accuracy</p>
                                </div>
                            </div>
                            <div style="display: flex; align-items: center; gap: 1rem; padding: 1rem; background: var(--glass-strong); border-radius: 12px; margin: 0.5rem 0;">
                                <i class="fas fa-eye" style="color: var(--progress-accent); font-size: 1.5rem;"></i>
                                <div>
                                    <p style="font-weight: 600;">Attention Span</p>
                                    <p style="color: var(--progress-accent); font-size: 1.2rem; font-weight: 700;">4.7 minutes</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span>Skill Radar</span>
                        <i class="fas fa-chart-area"></i>
                    </div>
                    <div class="card-body">
                        <div style="height: 300px; position: relative;">
                            <canvas id="skillRadarChart"></canvas>
                        </div>
                        <div style="margin-top: 1rem;">
                            <p style="color: var(--text-muted); font-size: 0.9rem; text-align: center;">Your cognitive abilities across different domains</p>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span>Progress Insights</span>
                        <i class="fas fa-lightbulb"></i>
                    </div>
                    <div class="card-body">
                        <div style="space-y: 1rem;">
                            <div style="padding: 1rem; background: linear-gradient(135deg, rgba(34, 197, 94, 0.1), rgba(34, 197, 94, 0.05)); border-left: 4px solid var(--success); border-radius: 8px; margin: 1rem 0;">
                                <p style="font-weight: 600; color: var(--success); margin-bottom: 0.5rem;">Strength Identified</p>
                                <p style="color: var(--text-muted);">Your spatial reasoning skills are in the top 15% of users in your age group.</p>
                            </div>
                            <div style="padding: 1rem; background: linear-gradient(135deg, rgba(245, 158, 11, 0.1), rgba(245, 158, 11, 0.05)); border-left: 4px solid var(--warning); border-radius: 8px; margin: 1rem 0;">
                                <p style="font-weight: 600; color: var(--warning); margin-bottom: 0.5rem;">Opportunity</p>
                                <p style="color: var(--text-muted);">Focus on working memory exercises to see significant improvement in overall cognitive score.</p>
                            </div>
                            <div style="padding: 1rem; background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(59, 130, 246, 0.05)); border-left: 4px solid var(--dashboard-primary); border-radius: 8px; margin: 1rem 0;">
                                <p style="font-weight: 600; color: var(--dashboard-primary); margin-bottom: 0.5rem;">Trend Analysis</p>
                                <p style="color: var(--text-muted);">Your performance improves by 15% on average during morning sessions (8-10 AM).</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Meditation Tab -->
        <div id="meditation" class="tab-content">
            <div class="card-grid">
                <div class="card">
                    <div class="card-header">
                        <span>Guided Breathing</span>
                        <i class="fas fa-wind"></i>
                    </div>
                    <div class="card-body">
                        <div class="meditation-controls">
                            <div id="breathing-circle" class="breathing-circle">
                                <span style="position: relative; z-index: 10;">Breathe</span>
                            </div>
                            <p id="breathing-instruction" style="font-size: 1.2rem; font-weight: 600; color: var(--meditation-accent); margin: 1rem 0;">Click start to begin</p>
                            <div style="margin: 1rem 0;">
                                <select id="breathing-pattern" style="padding: 0.5rem 1rem; background: var(--glass-strong); border: 1px solid var(--border); border-radius: 8px; color: var(--text); margin: 0 1rem;">
                                    <option value="4-4-4-4">Box Breathing (4-4-4-4)</option>
                                    <option value="4-7-8">Relaxing (4-7-8)</option>
                                    <option value="6-2-6-2">Energizing (6-2-6-2)</option>
                                </select>
                            </div>
                            <button class="btn primary" id="start-breathing">
                                <i class="fas fa-play"></i> Start Breathing Exercise
                            </button>
                            <button class="btn secondary" id="stop-breathing" style="display: none;">
                                <i class="fas fa-stop"></i> Stop
                            </button>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span>Focus Meditation</span>
                        <i class="fas fa-bullseye"></i>
                    </div>
                    <div class="card-body">
                        <p style="margin-bottom: 1rem; color: var(--text-muted);">Brief meditation sessions to enhance cognitive performance</p>
                        <div style="text-align: center; margin: 2rem 0;">
                            <select id="meditation-duration" class="sleep-input" style="margin: 1rem; background: var(--glass-strong); border: 1px solid var(--border);">
                                <option value="300">5 minutes</option>
                                <option value="600">10 minutes</option>
                                <option value="900">15 minutes</option>
                                <option value="1200">20 minutes</option>
                            </select>
                            <select id="meditation-type" class="sleep-input" style="margin: 1rem; background: var(--glass-strong); border: 1px solid var(--border);">
                                <option value="focus">Focus & Concentration</option>
                                <option value="mindfulness">Mindfulness</option>
                                <option value="loving-kindness">Loving Kindness</option>
                                <option value="body-scan">Body Scan</option>
                            </select>
                        </div>
                        <button class="btn success" id="start-meditation">
                            <i class="fas fa-play"></i> Start Focus Meditation
                        </button>
                        <div id="meditation-timer" style="display: none; text-align: center; margin-top: 2rem; padding: 2rem; background: var(--glass-strong); border-radius: 16px;">
                            <h2 id="timer-display" style="font-size: 3rem; color: var(--meditation-accent); margin-bottom: 1rem;">05:00</h2>
                            <p id="meditation-phase" style="font-size: 1.2rem; color: var(--meditation-accent);">Preparation</p>
                            <div style="margin-top: 1rem;">
                                <button class="btn secondary" id="pause-meditation">
                                    <i class="fas fa-pause"></i> Pause
                                </button>
                                <button class="btn danger" id="stop-meditation">
                                    <i class="fas fa-stop"></i> Stop
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span>Stress Relief</span>
                        <i class="fas fa-heart"></i>
                    </div>
                    <div class="card-body">
                        <p style="margin-bottom: 1rem; color: var(--text-muted);">Quick stress reduction techniques</p>
                        <div style="display: flex; flex-direction: column; gap: 1rem;">
                            <button class="btn secondary" id="stress-relief-1">
                                <i class="fas fa-hand-paper"></i> Progressive Muscle Relaxation
                            </button>
                            <button class="btn secondary" id="stress-relief-2">
                                <i class="fas fa-eye"></i> Mindful Observation
                            </button>
                            <button class="btn secondary" id="stress-relief-3">
                                <i class="fas fa-user-circle"></i> Body Scan
                            </button>
                            <button class="btn secondary" id="stress-relief-4">
                                <i class="fas fa-leaf"></i> 5-4-3-2-1 Grounding
                            </button>
                        </div>
                        <div id="stress-relief-content" style="margin-top: 2rem; display: none; padding: 1.5rem; background: var(--glass-strong); border-radius: 12px;">
                            <p id="stress-relief-text" style="line-height: 1.6; color: var(--meditation-accent);"></p>
                            <button class="btn secondary" id="close-stress-relief" style="margin-top: 1rem;">
                                <i class="fas fa-times"></i> Close
                            </button>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span>Meditation Sessions</span>
                        <i class="fas fa-history"></i>
                    </div>
                    <div class="card-body">
                        <div style="margin-bottom: 1rem;">
                            <h4 style="color: var(--meditation-accent); margin-bottom: 1rem;">This Week's Sessions</h4>
                            <div style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 0.5rem; margin-bottom: 1rem;">
                                <div style="text-align: center; font-size: 0.8rem; color: var(--text-muted);">Mon</div>
                                <div style="text-align: center; font-size: 0.8rem; color: var(--text-muted);">Tue</div>
                                <div style="text-align: center; font-size: 0.8rem; color: var(--text-muted);">Wed</div>
                                <div style="text-align: center; font-size: 0.8rem; color: var(--text-muted);">Thu</div>
                                <div style="text-align: center; font-size: 0.8rem; color: var(--text-muted);">Fri</div>
                                <div style="text-align: center; font-size: 0.8rem; color: var(--text-muted);">Sat</div>
                                <div style="text-align: center; font-size: 0.8rem; color: var(--text-muted);">Sun</div>
                                <div style="aspect-ratio: 1; background: var(--meditation-primary); border-radius: 4px; display: flex; align-items: center; justify-content: center; color: white; font-size: 0.8rem; font-weight: 600;">15</div>
                                <div style="aspect-ratio: 1; background: var(--meditation-primary); border-radius: 4px; display: flex; align-items: center; justify-content: center; color: white; font-size: 0.8rem; font-weight: 600;">10</div>
                                <div style="aspect-ratio: 1; background: var(--glass); border-radius: 4px;"></div>
                                <div style="aspect-ratio: 1; background: var(--meditation-primary); border-radius: 4px; display: flex; align-items: center; justify-content: center; color: white; font-size: 0.8rem; font-weight: 600;">20</div>
                                <div style="aspect-ratio: 1; background: var(--meditation-primary); border-radius: 4px; display: flex; align-items: center; justify-content: center; color: white; font-size: 0.8rem; font-weight: 600;">15</div>
                                <div style="aspect-ratio: 1; background: var(--meditation-secondary); border-radius: 4px; display: flex; align-items: center; justify-content: center; color: white; font-size: 0.8rem; font-weight: 600;">25</div>
                                <div style="aspect-ratio: 1; background: var(--meditation-primary); border-radius: 4px; display: flex; align-items: center; justify-content: center; color: white; font-size: 0.8rem; font-weight: 600;">10</div>
                            </div>
                        </div>
                        <div>
                            <p style="display: flex; justify-content: space-between; margin: 0.5rem 0;">
                                <span>Total Time This Week:</span>
                                <span style="color: var(--meditation-accent); font-weight: 600;">95 minutes</span>
                            </p>
                            <p style="display: flex; justify-content: space-between; margin: 0.5rem 0;">
                                <span>Longest Session:</span>
                                <span style="color: var(--meditation-accent); font-weight: 600;">25 minutes</span>
                            </p>
                            <p style="display: flex; justify-content: space-between; margin: 0.5rem 0;">
                                <span>Completion Rate:</span>
                                <span style="color: var(--success); font-weight: 600;">87%</span>
                            </p>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span>Mindful Moments</span>
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="card-body">
                        <p style="margin-bottom: 1rem; color: var(--text-muted);">Quick 1-3 minute mindfulness exercises</p>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 1rem;">
                            <div style="text-align: center; padding: 1rem; background: var(--glass-strong); border-radius: 12px; cursor: pointer; transition: all 0.3s ease;" onclick="startMindfulMoment('gratitude')">
                                <i class="fas fa-heart" style="font-size: 2rem; color: var(--meditation-accent); margin-bottom: 0.5rem;"></i>
                                <p style="font-weight: 600;">Gratitude</p>
                                <p style="font-size: 0.8rem; color: var(--text-muted);">1 min</p>
                            </div>
                            <div style="text-align: center; padding: 1rem; background: var(--glass-strong); border-radius: 12px; cursor: pointer; transition: all 0.3s ease;" onclick="startMindfulMoment('breath')">
                                <i class="fas fa-wind" style="font-size: 2rem; color: var(--meditation-accent); margin-bottom: 0.5rem;"></i>
                                <p style="font-weight: 600;">Breath Focus</p>
                                <p style="font-size: 0.8rem; color: var(--text-muted);">2 min</p>
                            </div>
                            <div style="text-align: center; padding: 1rem; background: var(--glass-strong); border-radius: 12px; cursor: pointer; transition: all 0.3s ease;" onclick="startMindfulMoment('intention')">
                                <i class="fas fa-bullseye" style="font-size: 2rem; color: var(--meditation-accent); margin-bottom: 0.5rem;"></i>
                                <p style="font-weight: 600;">Intention</p>
                                <p style="font-size: 0.8rem; color: var(--text-muted);">3 min</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sleep Tab -->
        <div id="sleep" class="tab-content">
            <div class="card-grid">
                <div class="card">
                    <div class="card-header">
                        <span>Sleep Log</span>
                        <i class="fas fa-bed"></i>
                    </div>
                    <div class="card-body">
                        <div class="sleep-log">
                            <input type="time" id="bedtime" class="sleep-input" placeholder="Bedtime" value="22:30">
                            <input type="time" id="waketime" class="sleep-input" placeholder="Wake Time" value="06:45">
                            <select id="sleep-quality" class="sleep-input">
                                <option value="">Sleep Quality</option>
                                <option value="poor">Poor</option>
                                <option value="fair">Fair</option>
                                <option value="good" selected>Good</option>
                                <option value="excellent">Excellent</option>
                            </select>
                            <input type="number" id="sleep-interruptions" class="sleep-input" placeholder="Wake-ups" min="0" value="1">
                            <select id="sleep-environment" class="sleep-input">
                                <option value="">Room Temperature</option>
                                <option value="too-cold">Too Cold</option>
                                <option value="cool">Cool</option>
                                <option value="comfortable" selected>Comfortable</option>
                                <option value="warm">Warm</option>
                                <option value="too-warm">Too Warm</option>
                            </select>
                            <select id="pre-sleep-activity" class="sleep-input">
                                <option value="">Pre-Sleep Activity</option>
                                <option value="reading">Reading</option>
                                <option value="meditation" selected>Meditation</option>
                                <option value="screen-time">Screen Time</option>
                                <option value="exercise">Exercise</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        <button class="btn primary" id="log-sleep">
                            <i class="fas fa-save"></i> Log Sleep Data
                        </button>
                        <div style="margin-top: 1rem;">
                            <button class="btn secondary" id="import-sleep-data">
                                <i class="fas fa-download"></i> Import from Device
                            </button>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span>Sleep Phase Analysis</span>
                        <i class="fas fa-chart-pie"></i>
                    </div>
                    <div class="card-body">
                        <div id="sleep-phases">
                            <div class="sleep-phase" style="border-left-color: var(--sleep-primary);">
                                <span>REM Sleep (Memory Consolidation)</span>
                                <div style="display: flex; align-items: center; gap: 1rem;">
                                    <span id="rem-percentage" style="font-weight: 700; color: var(--sleep-accent);">28%</span>
                                    <div style="width: 60px; height: 8px; background: var(--glass); border-radius: 4px; overflow: hidden;">
                                        <div style="width: 28%; height: 100%; background: var(--sleep-primary); border-radius: 4px;"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="sleep-phase" style="border-left-color: var(--sleep-secondary);">
                                <span>Deep Sleep (Physical Recovery)</span>
                                <div style="display: flex; align-items: center; gap: 1rem;">
                                    <span id="deep-percentage" style="font-weight: 700; color: var(--sleep-accent);">22%</span>
                                    <div style="width: 60px; height: 8px; background: var(--glass); border-radius: 4px; overflow: hidden;">
                                        <div style="width: 22%; height: 100%; background: var(--sleep-secondary); border-radius: 4px;"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="sleep-phase" style="border-left-color: var(--sleep-accent);">
                                <span>Light Sleep (Transition)</span>
                                <div style="display: flex; align-items: center; gap: 1rem;">
                                    <span id="light-percentage" style="font-weight: 700; color: var(--sleep-accent);">50%</span>
                                    <div style="width: 60px; height: 8px; background: var(--glass); border-radius: 4px; overflow: hidden;">
                                        <div style="width: 50%; height: 100%; background: var(--sleep-accent); border-radius: 4px;"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <button class="btn secondary" id="analyze-sleep">
                            <i class="fas fa-chart-line"></i> Analyze Last Night
                        </button>
                        <div style="margin-top: 1rem;">
                            <p style="color: var(--text-muted); font-size: 0.9rem; text-align: center;">Sleep efficiency: <span style="color: var(--success); font-weight: 600;">87%</span></p>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span>Sleep Insights</span>
                        <i class="fas fa-lightbulb"></i>
                    </div>
                    <div class="card-body">
                        <div id="sleep-insights">
                            <h4 style="color: var(--sleep-accent); margin-bottom: 1rem;">Personalized Recommendations:</h4>
                            <div style="margin: 1rem 0;">
                                <div style="display: flex; align-items: center; gap: 1rem; padding: 0.8rem; background: var(--glass-strong); border-radius: 8px; margin: 0.5rem 0;">
                                    <i class="fas fa-check-circle" style="color: var(--success);"></i>
                                    <span>Maintain consistent sleep schedule (✓ 12-day streak)</span>
                                </div>
                                <div style="display: flex; align-items: center; gap: 1rem; padding: 0.8rem; background: var(--glass-strong); border-radius: 8px; margin: 0.5rem 0;">
                                    <i class="fas fa-thermometer-half" style="color: var(--sleep-accent);"></i>
                                    <span>Optimize room temperature (65-68°F)</span>
                                </div>
                                <div style="display: flex; align-items: center; gap: 1rem; padding: 0.8rem; background: var(--glass-strong); border-radius: 8px; margin: 0.5rem 0;">
                                    <i class="fas fa-mobile-alt" style="color: var(--warning);"></i>
                                    <span>Limit blue light 1 hour before bed</span>
                                </div>
                                <div style="display: flex; align-items: center; gap: 1rem; padding: 0.8rem; background: var(--glass-strong); border-radius: 8px; margin: 0.5rem 0;">
                                    <i class="fas fa-leaf" style="color: var(--meditation-accent);"></i>
                                    <span>Consider meditation before sleep (improves REM by 15%)</span>
                                </div>
                            </div>
                        </div>
                        <div style="margin-top: 2rem;">
                            <canvas id="sleepChart" height="200"></canvas>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span>Sleep Score Trends</span>
                        <i class="fas fa-chart-area"></i>
                    </div>
                    <div class="card-body">
                        <div style="margin-bottom: 2rem;">
                            <div style="text-align: center;">
                                <h3 style="font-size: 3rem; color: var(--sleep-accent); margin-bottom: 0.5rem;">84</h3>
                                <p style="color: var(--text-muted);">Overall Sleep Score</p>
                                <p style="color: var(--success); font-size: 0.9rem;">+7 points this week</p>
                            </div>
                        </div>
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem;">
                            <div style="text-align: center; padding: 1rem; background: var(--glass-strong); border-radius: 12px;">
                                <div style="font-size: 1.8rem; color: var(--sleep-accent); font-weight: 700;">8.2h</div>
                                <div style="color: var(--text-muted); font-size: 0.9rem;">Avg Duration</div>
                            </div>
                            <div style="text-align: center; padding: 1rem; background: var(--glass-strong); border-radius: 12px;">
                                <div style="font-size: 1.8rem; color: var(--sleep-accent); font-weight: 700;">22:30</div>
                                <div style="color: var(--text-muted); font-size: 0.9rem;">Avg Bedtime</div>
                            </div>
                            <div style="text-align: center; padding: 1rem; background: var(--glass-strong); border-radius: 12px;">
                                <div style="font-size: 1.8rem; color: var(--sleep-accent); font-weight: 700;">87%</div>
                                <div style="color: var(--text-muted); font-size: 0.9rem;">Efficiency</div>
                            </div>
                            <div style="text-align: center; padding: 1rem; background: var(--glass-strong); border-radius: 12px;">
                                <div style="font-size: 1.8rem; color: var(--sleep-accent); font-weight: 700;">1.2</div>
                                <div style="color: var(--text-muted); font-size: 0.9rem;">Avg Wake-ups</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span>Sleep Hygiene</span>
                        <i class="fas fa-spa"></i>
                    </div>
                    <div class="card-body">
                        <p style="margin-bottom: 1rem; color: var(--text-muted);">Optimize your sleep environment and habits</p>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem;">
                            <div style="text-align: center; padding: 1rem; background: var(--glass-strong); border-radius: 12px; cursor: pointer; transition: all 0.3s ease;" onclick="showSleepTip('temperature')">
                                <i class="fas fa-thermometer-half" style="font-size: 2rem; color: var(--sleep-accent); margin-bottom: 0.5rem;"></i>
                                <p style="font-weight: 600;">Temperature</p>
                            </div>
                            <div style="text-align: center; padding: 1rem; background: var(--glass-strong); border-radius: 12px; cursor: pointer; transition: all 0.3s ease;" onclick="showSleepTip('light')">
                                <i class="fas fa-lightbulb" style="font-size: 2rem; color: var(--sleep-accent); margin-bottom: 0.5rem;"></i>
                                <p style="font-weight: 600;">Lighting</p>
                            </div>
                            <div style="text-align: center; padding: 1rem; background: var(--glass-strong); border-radius: 12px; cursor: pointer; transition: all 0.3s ease;" onclick="showSleepTip('noise')">
                                <i class="fas fa-volume-mute" style="font-size: 2rem; color: var(--sleep-accent); margin-bottom: 0.5rem;"></i>
                                <p style="font-weight: 600;">Noise</p>
                            </div>
                            <div style="text-align: center; padding: 1rem; background: var(--glass-strong); border-radius: 12px; cursor: pointer; transition: all 0.3s ease;" onclick="showSleepTip('routine')">
                                <i class="fas fa-clock" style="font-size: 2rem; color: var(--sleep-accent); margin-bottom: 0.5rem;"></i>
                                <p style="font-weight: 600;">Routine</p>
                            </div>
                        </div>
                        <div id="sleep-tip-content" style="margin-top: 1rem; display: none; padding: 1.5rem; background: var(--glass-strong); border-radius: 12px;">
                            <h4 id="sleep-tip-title" style="color: var(--sleep-accent); margin-bottom: 1rem;"></h4>
                            <p id="sleep-tip-text" style="line-height: 1.6;"></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- EEG Tab -->
        <div id="eeg" class="tab-content">
            <div class="card-grid">
                <div class="card full-width">
                    <div class="card-header">
                        <span>Real-Time EEG Simulation</span>
                        <div style="display: flex; gap: 1rem; align-items: center;">
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <div style="width: 10px; height: 10px; background: var(--success); border-radius: 50%; animation: pulse 2s infinite;"></div>
                                <span style="font-size: 0.9rem; color: var(--text-muted);">Live Simulation</span>
                            </div>
                            <i class="fas fa-brain"></i>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="eeg-container" id="eeg-container">
                            <div class="brainwave wave-delta">
                                <div class="brainwave-label">Delta (0.5-4 Hz) - Deep Sleep</div>
                                <div class="wave-line"></div>
                            </div>
                            <div class="brainwave wave-theta">
                                <div class="brainwave-label">Theta (4-8 Hz) - Creativity</div>
                                <div class="wave-line"></div>
                            </div>
                            <div class="brainwave wave-alpha">
                                <div class="brainwave-label">Alpha (8-13 Hz) - Relaxed Focus</div>
                                <div class="wave-line"></div>
                            </div>
                            <div class="brainwave wave-beta">
                                <div class="brainwave-label">Beta (13-30 Hz) - Active Thinking</div>
                                <div class="wave-line"></div>
                            </div>
                            <div class="brainwave wave-gamma">
                                <div class="brainwave-label">Gamma (30+ Hz) - Peak Performance</div>
                                <div class="wave-line"></div>
                            </div>
                        </div>
                        <div style="text-align: center; margin-top: 2rem; display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
                            <button class="btn primary" id="start-eeg">
                                <i class="fas fa-play"></i> Start Simulation
                            </button>
                            <button class="btn secondary" id="stop-eeg">
                                <i class="fas fa-stop"></i> Stop
                            </button>
                            <button class="btn warning" id="calibrate-eeg">
                                <i class="fas fa-cog"></i> Calibrate
                            </button>
                            <button class="btn success" id="export-eeg">
                                <i class="fas fa-download"></i> Export Data
                            </button>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span>Current Brain State</span>
                        <i class="fas fa-brain"></i>
                    </div>
                    <div class="card-body">
                        <div id="eeg-state" style="text-align: center;">
                            <div style="margin-bottom: 2rem;">
                                <h3 id="current-eeg-state" style="font-size: 2rem; color: var(--eeg-accent); margin-bottom: 0.5rem;">Focused Alert</h3>
                                <p style="color: var(--text-muted);">Dominant: <span style="color: var(--eeg-accent); font-weight: 600;">Beta waves</span></p>
                                <p style="color: var(--text-muted);">Cognitive State: <span style="color: var(--eeg-accent); font-weight: 600;">Optimal for problem-solving</span></p>
                            </div>
                            <div style="margin: 2rem 0;">
                                <canvas id="eegStateChart" height="150"></canvas>
                            </div>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(80px, 1fr)); gap: 1rem; margin-top: 1rem;">
                                <div style="text-align: center;">
                                    <div style="font-size: 1.5rem; font-weight: 700; color: #8b5cf6;">15%</div>
                                    <div style="font-size: 0.8rem; color: var(--text-muted);">Delta</div>
                                </div>
                                <div style="text-align: center;">
                                    <div style="font-size: 1.5rem; font-weight: 700; color: #06b6d4;">20%</div>
                                    <div style="font-size: 0.8rem; color: var(--text-muted);">Theta</div>
                                </div>
                                <div style="text-align: center;">
                                    <div style="font-size: 1.5rem; font-weight: 700; color: #10b981;">25%</div>
                                    <div style="font-size: 0.8rem; color: var(--text-muted);">Alpha</div>
                                </div>
                                <div style="text-align: center;">
                                    <div style="font-size: 1.5rem; font-weight: 700; color: var(--eeg-accent);">35%</div>
                                    <div style="font-size: 0.8rem; color: var(--text-muted);">Beta</div>
                                </div>
                                <div style="text-align: center;">
                                    <div style="font-size: 1.5rem; font-weight: 700; color: #ef4444;">5%</div>
                                    <div style="font-size: 0.8rem; color: var(--text-muted);">Gamma</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span>Neurofeedback Training</span>
                        <i class="fas fa-graduation-cap"></i>
                    </div>
                    <div class="card-body">
                        <p style="margin-bottom: 1rem; color: var(--text-muted);">Train your brain to achieve desired states</p>
                        <div style="display: flex; flex-direction: column; gap: 1rem;">
                            <button class="btn success" id="alpha-training">
                                <i class="fas fa-leaf"></i> Alpha Enhancement (Relaxed Focus)
                            </button>
                            <button class="btn primary" id="beta-training">
                                <i class="fas fa-bolt"></i> Beta Focus Training (Active Thinking)
                            </button>
                            <button class="btn secondary" id="theta-training">
                                <i class="fas fa-lightbulb"></i> Theta Creativity (Creative Flow)
                            </button>
                            <button class="btn warning" id="gamma-training">
                                <i class="fas fa-rocket"></i> Gamma Boost (Peak Performance)
                            </button>
                        </div>
                        <div id="neurofeedback-progress" style="margin-top: 2rem; display: none; padding: 1.5rem; background: var(--glass-strong); border-radius: 12px;">
                            <h4 style="color: var(--eeg-accent); margin-bottom: 1rem;">Training Progress</h4>
                            <p style="margin-bottom: 1rem;">Session Duration: <span id="session-duration" style="color: var(--eeg-accent); font-weight: 600;">0:00</span></p>
                            <p style="margin-bottom: 1rem;">Target Achievement: <span id="training-progress" style="color: var(--eeg-accent); font-weight: 600;">0%</span></p>
                            <div style="width: 100%; height: 12px; background: var(--glass); border-radius: 6px; overflow: hidden; margin-bottom: 1rem;">
                                <div id="training-bar" style="width: 0%; height: 100%; background: linear-gradient(90deg, var(--eeg-primary), var(--eeg-accent)); border-radius: 6px; transition: width 0.3s;"></div>
                            </div>
                            <div style="display: flex; gap: 1rem;">
                                <button class="btn secondary" id="pause-training">
                                    <i class="fas fa-pause"></i> Pause
                                </button>
                                <button class="btn danger" id="stop-training">
                                    <i class="fas fa-stop"></i> Stop Training
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span>EEG History</span>
                        <i class="fas fa-history"></i>
                    </div>
                    <div class="card-body">
                        <div style="margin-bottom: 1rem;">
                            <h4 style="color: var(--eeg-accent); margin-bottom: 1rem;">Recent Sessions</h4>
                        </div>
                        <div style="space-y: 1rem;">
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 1rem; background: var(--glass-strong); border-radius: 12px; margin: 0.5rem 0;">
                                <div>
                                    <div style="font-weight: 600;">Beta Training</div>
                                    <div style="color: var(--text-muted); font-size: 0.9rem;">Today, 2:30 PM</div>
                                </div>
                                <div style="text-align: right;">
                                    <div style="color: var(--eeg-accent); font-weight: 600;">15 min</div>
                                    <div style="color: var(--success); font-size: 0.9rem;">92% success</div>
                                </div>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 1rem; background: var(--glass-strong); border-radius: 12px; margin: 0.5rem 0;">
                                <div>
                                    <div style="font-weight: 600;">Alpha Enhancement</div>
                                    <div style="color: var(--text-muted); font-size: 0.9rem;">Yesterday, 7:15 PM</div>
                                </div>
                                <div style="text-align: right;">
                                    <div style="color: var(--eeg-accent); font-weight: 600;">20 min</div>
                                    <div style="color: var(--success); font-size: 0.9rem;">87% success</div>
                                </div>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 1rem; background: var(--glass-strong); border-radius: 12px; margin: 0.5rem 0;">
                                <div>
                                    <div style="font-weight: 600;">Theta Creativity</div>
                                    <div style="color: var(--text-muted); font-size: 0.9rem;">2 days ago, 11:00 AM</div>
                                </div>
                                <div style="text-align: right;">
                                    <div style="color: var(--eeg-accent); font-weight: 600;">12 min</div>
                                    <div style="color: var(--warning); font-size: 0.9rem;">74% success</div>
                                </div>
                            </div>
                        </div>
                        <div style="margin-top: 1rem; text-align: center;">
                            <button class="btn secondary">
                                <i class="fas fa-chart-line"></i> View Detailed Analytics
                            </button>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span>Brainwave Insights</span>
                        <i class="fas fa-microscope"></i>
                    </div>
                    <div class="card-body">
                        <div style="margin-bottom: 1rem;">
                            <h4 style="color: var(--eeg-accent); margin-bottom: 1rem;">What Your Brainwaves Mean</h4>
                        </div>
                        <div style="space-y: 1rem;">
                            <div style="padding: 1rem; background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(139, 92, 246, 0.05)); border-left: 4px solid #8b5cf6; border-radius: 8px; margin: 1rem 0;">
                                <div style="font-weight: 600; color: #8b5cf6; margin-bottom: 0.5rem;">Delta Waves (0.5-4 Hz)</div>
                                <p style="color: var(--text-muted); font-size: 0.9rem;">Associated with deep sleep, healing, and regeneration. High during rest and recovery.</p>
                            </div>
                            <div style="padding: 1rem; background: linear-gradient(135deg, rgba(6, 182, 212, 0.1), rgba(6, 182, 212, 0.05)); border-left: 4px solid #06b6d4; border-radius: 8px; margin: 1rem 0;">
                                <div style="font-weight: 600; color: #06b6d4; margin-bottom: 0.5rem;">Theta Waves (4-8 Hz)</div>
                                <p style="color: var(--text-muted); font-size: 0.9rem;">Linked to creativity, intuition, and deep meditation. Prominent during REM sleep.</p>
                            </div>
                            <div style="padding: 1rem; background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(16, 185, 129, 0.05)); border-left: 4px solid #10b981; border-radius: 8px; margin: 1rem 0;">
                                <div style="font-weight: 600; color: #10b981; margin-bottom: 0.5rem;">Alpha Waves (8-13 Hz)</div>
                                <p style="color: var(--text-muted); font-size: 0.9rem;">Present during relaxed awareness and flow states. Ideal for learning and memory.</p>
                            </div>
                            <div style="padding: 1rem; background: linear-gradient(135deg, rgba(245, 158, 11, 0.1), rgba(245, 158, 11, 0.05)); border-left: 4px solid #f59e0b; border-radius: 8px; margin: 1rem 0;">
                                <div style="font-weight: 600; color: #f59e0b; margin-bottom: 0.5rem;">Beta Waves (13-30 Hz)</div>
                                <p style="color: var(--text-muted); font-size: 0.9rem;">Active during focused thinking, problem-solving, and decision-making.</p>
                            </div>
                            <div style="padding: 1rem; background: linear-gradient(135deg, rgba(239, 68, 68, 0.1), rgba(239, 68, 68, 0.05)); border-left: 4px solid #ef4444; border-radius: 8px; margin: 1rem 0;">
                                <div style="font-weight: 600; color: #ef4444; margin-bottom: 0.5rem;">Gamma Waves (30+ Hz)</div>
                                <p style="color: var(--text-muted); font-size: 0.9rem;">Associated with peak cognitive performance and heightened awareness.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Insights Tab -->
        <div id="insights" class="tab-content">
            <div class="card-grid">
                <div class="card">
                    <div class="card-header">
                        <span>Enhanced Mood Tracking</span>
                        <i class="fas fa-heart"></i>
                    </div>
                    <div class="card-body">
                        <p style="margin-bottom: 1rem; color: var(--text-muted);">Log your current emotional state</p>
                        <div class="mood-grid" id="mood-selector">
                            <button class="mood-btn" data-mood="Energetic" title="Energetic">⚡</button>
                            <button class="mood-btn" data-mood="Happy" title="Happy">😊</button>
                            <button class="mood-btn" data-mood="Calm" title="Calm">😌</button>
                            <button class="mood-btn" data-mood="Focused" title="Focused">🎯</button>
                            <button class="mood-btn" data-mood="Neutral" title="Neutral">😐</button>
                            <button class="mood-btn" data-mood="Tired" title="Tired">😴</button>
                            <button class="mood-btn" data-mood="Stressed" title="Stressed">😟</button>
                            <button class="mood-btn" data-mood="Anxious" title="Anxious">😰</button>
                        </div>
                        <div style="margin-top: 2rem;">
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Intensity (1-10):</label>
                            <input type="range" id="mood-intensity" min="1" max="10" value="5" style="width: 100%; margin: 0.5rem 0; accent-color: var(--insights-primary);">
                            <div style="display: flex; justify-content: space-between; font-size: 0.8rem; color: var(--text-muted);">
                                <span>Low</span>
                                <span id="intensity-value" style="color: var(--insights-accent); font-weight: 600;">5</span>
                                <span>High</span>
                            </div>
                        </div>
                        <div style="margin-top: 1rem;">
                            <textarea id="mood-notes" placeholder="Optional notes about your mood..." style="width: 100%; height: 80px; padding: 1rem; background: var(--glass-strong); border: 1px solid var(--border); border-radius: 12px; color: var(--text); resize: vertical;"></textarea>
                        </div>
                        <button class="btn primary" id="log-mood" style="margin-top: 1rem;">
                            <i class="fas fa-save"></i> Log Mood
                        </button>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span>Mood-Performance Correlation</span>
                        <i class="fas fa-chart-scatter"></i>
                    </div>
                    <div class="card-body">
                        <div style="height: 300px; margin-bottom: 1rem;">
                            <canvas id="moodPerformanceChart"></canvas>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 1rem;">
                            <div style="text-align: center;">
                                <div style="font-size: 1.5rem; font-weight: 700; color: var(--insights-accent);">0.73</div>
                                <div style="color: var(--text-muted); font-size: 0.9rem;">Correlation</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 1.5rem; font-weight: 700; color: var(--success);">+18%</div>
                                <div style="color: var(--text-muted); font-size: 0.9rem;">When Happy</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 1.5rem; font-weight: 700; color: var(--warning);">-12%</div>
                                <div style="color: var(--text-muted); font-size: 0.9rem;">When Stressed</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span>Memory Tagging</span>
                        <i class="fas fa-tag"></i>
                    </div>
                    <div class="card-body">
                        <p style="margin-bottom: 1rem; color: var(--text-muted);">Tag important memories with emotional context</p>
                        <textarea id="memory-description" placeholder="Describe the memory..." style="width: 100%; height: 100px; padding: 1rem; background: var(--glass-strong); border: 1px solid var(--border); border-radius: 12px; color: var(--text); margin: 1rem 0; resize: vertical;"></textarea>
                        
                        <div style="margin: 1rem 0;">
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Emotion:</label>
                            <div class="mood-grid">
                                <button class="memory-emotion-btn" data-emotion="joy" title="Joy">😄</button>
                                <button class="memory-emotion-btn" data-emotion="sadness" title="Sadness">😢</button>
                                <button class="memory-emotion-btn" data-emotion="fear" title="Fear">😨</button>
                                <button class="memory-emotion-btn" data-emotion="anger" title="Anger">😠</button>
                                <button class="memory-emotion-btn" data-emotion="surprise" title="Surprise">😮</button>
                                <button class="memory-emotion-btn" data-emotion="disgust" title="Disgust">🤢</button>
                                <button class="memory-emotion-btn" data-emotion="love" title="Love">❤️</button>
                                <button class="memory-emotion-btn" data-emotion="excitement" title="Excitement">🤩</button>
                            </div>
                        </div>

                        <div style="margin: 1rem 0;">
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Vividness (1-10):</label>
                            <input type="range" id="memory-vividness" min="1" max="10" value="5" style="width: 100%; accent-color: var(--insights-primary);">
                            <span id="vividness-value" style="color: var(--insights-accent); font-weight: 600;">5</span>
                        </div>

                        <button class="btn primary" id="save-memory">
                            <i class="fas fa-save"></i> Save Memory
                        </button>
                        
                        <div style="margin-top: 2rem;">
                            <h4 style="color: var(--insights-accent); margin-bottom: 1rem;">Recent Memories</h4>
                            <div id="recent-memories" style="max-height: 200px; overflow-y: auto;">
                                <!-- Recent memories will be populated here -->
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span>Cognitive Load Monitor</span>
                        <i class="fas fa-tachometer-alt"></i>
                    </div>
                    <div class="card-body">
                        <p style="margin-bottom: 1rem; color: var(--text-muted);">Track your mental workload throughout the day</p>
                        <div style="text-align: center; margin: 2rem 0;">
                            <div style="position: relative; width: 200px; height: 200px; margin: 0 auto;">
                                <canvas id="cognitiveLoadGauge" width="200" height="200"></canvas>
                                <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center;">
                                    <div style="font-size: 2rem; font-weight: 700; color: var(--insights-accent);">72%</div>
                                    <div style="color: var(--text-muted); font-size: 0.9rem;">Current Load</div>
                                </div>
                            </div>
                        </div>
                        <div style="margin: 1rem 0;">
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">How mentally demanding is your current task?</label>
                            <div style="display: flex; gap: 0.5rem; margin: 1rem 0;">
                                <button class="btn secondary" data-load="low" style="flex: 1; padding: 0.5rem;">Low</button>
                                <button class="btn secondary" data-load="medium" style="flex: 1; padding: 0.5rem;">Medium</button>
                                <button class="btn secondary" data-load="high" style="flex: 1; padding: 0.5rem;">High</button>
                            </div>
                        </div>
                        <div style="margin-top: 1rem;">
                            <p style="color: var(--text-muted); font-size: 0.9rem;">Optimal load: 60-80% for peak performance</p>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span>Data Export & Privacy</span>
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <div class="card-body">
                        <p style="margin-bottom: 1rem; color: var(--text-muted);">Export your data while maintaining privacy</p>
                        <div class="export-options">
                            <button class="btn secondary" id="export-json">
                                <i class="fas fa-file-code"></i> Export JSON
                            </button>
                            <button class="btn secondary" id="export-csv">
                                <i class="fas fa-file-csv"></i> Export CSV
                            </button>
                            <button class="btn secondary" id="export-pdf">
                                <i class="fas fa-file-pdf"></i> Export PDF Report
                            </button>
                        </div>
                        <div class="data-summary">
                            <h4 style="color: var(--insights-accent); margin-bottom: 1rem;">Data Summary:</h4>
                            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem;">
                                <p>Sessions: <span id="export-sessions" style="color: var(--insights-accent); font-weight: 600;">47</span></p>
                                <p>Test Results: <span id="export-tests" style="color: var(--insights-accent); font-weight: 600;">156</span></p>
                                <p>Mood Logs: <span id="export-moods" style="color: var(--insights-accent); font-weight: 600;">32</span></p>
                                <p>Sleep Records: <span id="export-sleep" style="color: var(--insights-accent); font-weight: 600;">28</span></p>
                                <p>Memory Tags: <span id="export-memories" style="color: var(--insights-accent); font-weight: 600;">15</span></p>
                                <p>EEG Sessions: <span id="export-eeg" style="color: var(--insights-accent); font-weight: 600;">23</span></p>
                            </div>
                        </div>
                        <div style="margin-top: 1rem; padding: 1rem; background: linear-gradient(135deg, rgba(239, 68, 68, 0.1), rgba(239, 68, 68, 0.05)); border-left: 4px solid var(--danger); border-radius: 8px;">
                            <h5 style="color: var(--danger); margin-bottom: 0.5rem;">Data Deletion</h5>
                            <p style="color: var(--text-muted); font-size: 0.9rem; margin-bottom: 1rem;">Permanently delete all your data. This action cannot be undone.</p>
                            <button class="btn danger" id="clear-data">
                                <i class="fas fa-trash"></i> Clear All Data
                            </button>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span>Behavioral Patterns</span>
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <div class="card-body">
                        <p style="margin-bottom: 1rem; color: var(--text-muted);">Discover patterns in your cognitive performance</p>
                        <div style="margin: 1rem 0;">
                            <h4 style="color: var(--insights-accent); margin-bottom: 1rem;">Key Insights</h4>
                            <div style="space-y: 1rem;">
                                <div style="padding: 1rem; background: var(--glass-strong); border-radius: 12px; margin: 0.5rem 0;">
                                    <div style="display: flex; align-items: center; gap: 1rem;">
                                        <i class="fas fa-clock" style="color: var(--insights-accent); font-size: 1.2rem;"></i>
                                        <div>
                                            <div style="font-weight: 600;">Peak Performance Time</div>
                                            <div style="color: var(--text-muted); font-size: 0.9rem;">You perform 23% better between 10-11 AM</div>
                                        </div>
                                    </div>
                                </div>
                                <div style="padding: 1rem; background: var(--glass-strong); border-radius: 12px; margin: 0.5rem 0;">
                                    <div style="display: flex; align-items: center; gap: 1rem;">
                                        <i class="fas fa-moon" style="color: var(--insights-accent); font-size: 1.2rem;"></i>
                                        <div>
                                            <div style="font-weight: 600;">Sleep Impact</div>
                                            <div style="color: var(--text-muted); font-size: 0.9rem;">8+ hours sleep improves scores by 15%</div>
                                        </div>
                                    </div>
                                </div>
                                <div style="padding: 1rem; background: var(--glass-strong); border-radius: 12px; margin: 0.5rem 0;">
                                    <div style="display: flex; align-items: center; gap: 1rem;">
                                        <i class="fas fa-leaf" style="color: var(--insights-accent); font-size: 1.2rem;"></i>
                                        <div>
                                            <div style="font-weight: 600;">Meditation Boost</div>
                                            <div style="color: var(--text-muted); font-size: 0.9rem;">10-min meditation before tests increases focus by 18%</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- AI Coach Tab -->
        <div id="coach" class="tab-content">
            <div class="card-grid">
                <div class="card">
                    <div class="card-header">
                        <span>Personalized AI Coach</span>
                        <i class="fas fa-robot"></i>
                    </div>
                    <div class="card-body" style="text-align: center;">
                        <div style="margin: 2rem 0;">
                            <span id="coach-icon" style="font-size: 4rem; margin-bottom: 1rem; display:inline-block; animation: pulse 2s infinite;">🤖</span>
                            <h3 style="color: var(--coach-accent); margin-bottom: 1rem;">NeuroCoach AI</h3>
                            <div style="background: var(--glass-strong); padding: 2rem; border-radius: 16px; margin: 1rem 0;">
                                <p id="coach-tip" style="font-size: 1.1rem; line-height: 1.6; color: var(--text);">
                                    Great work on your 12-day streak! Your spatial reasoning has improved 24% this week. 
                                    I recommend trying the dual N-back exercise to boost your working memory even further.
                                </p>
                            </div>
                        </div>
                        <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
                            <button class="btn primary" id="get-personalized-tip">
                                <i class="fas fa-lightbulb"></i> Get New Tip
                            </button>
                            <button class="btn secondary" id="adjust-difficulty">
                                <i class="fas fa-sliders-h"></i> Adjust Difficulty
                            </button>
                            <button class="btn success" id="coach-motivation">
                                <i class="fas fa-trophy"></i> Motivational Boost
                            </button>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span>Training Recommendations</span>
                        <i class="fas fa-clipboard-list"></i>
                    </div>
                    <div class="card-body">
                        <div id="training-recommendations">
                            <h4 style="color: var(--coach-accent); margin-bottom: 1rem;">Based on your performance:</h4>
                            <div style="space-y: 1rem;">
                                <div style="display: flex; align-items: center; gap: 1rem; padding: 1rem; background: var(--glass-strong); border-radius: 12px; margin: 0.5rem 0; cursor: pointer; transition: all 0.3s ease;" onclick="switchTab('training')">
                                    <i class="fas fa-brain" style="color: var(--coach-accent); font-size: 1.5rem;"></i>
                                    <div style="flex: 1;">
                                        <div style="font-weight: 600;">Dual N-Back Training</div>
                                        <div style="color: var(--text-muted); font-size: 0.9rem;">Boost working memory capacity</div>
                                    </div>
                                    <div style="color: var(--success); font-weight: 600;">High Priority</div>
                                </div>
                                <div style="display: flex; align-items: center; gap: 1rem; padding: 1rem; background: var(--glass-strong); border-radius: 12px; margin: 0.5rem 0; cursor: pointer; transition: all 0.3s ease;" onclick="switchTab('assessment')">
                                    <i class="fas fa-stopwatch" style="color: var(--coach-accent); font-size: 1.5rem;"></i>
                                    <div style="flex: 1;">
                                        <div style="font-weight: 600;">Morning Reaction Tests</div>
                                        <div style="color: var(--text-muted); font-size: 0.9rem;">Practice during peak hours (10-11 AM)</div>
                                    </div>
                                    <div style="color: var(--warning); font-weight: 600;">Medium</div>
                                </div>
                                <div style="display: flex; align-items: center; gap: 1rem; padding: 1rem; background: var(--glass-strong); border-radius: 12px; margin: 0.5rem 0; cursor: pointer; transition: all 0.3s ease;" onclick="switchTab('meditation')">
                                    <i class="fas fa-leaf" style="color: var(--coach-accent); font-size: 1.5rem;"></i>
                                    <div style="flex: 1;">
                                        <div style="font-weight: 600;">Pre-Test Meditation</div>
                                        <div style="color: var(--text-muted); font-size: 0.9rem;">5-minute sessions before cognitive tests</div>
                                    </div>
                                    <div style="color: var(--meditation-accent); font-weight: 600;">Recommended</div>
                                </div>
                            </div>
                        </div>
                        <button class="btn success" id="apply-recommendations" style="margin-top: 1rem; width: 100%;">
                            <i class="fas fa-check"></i> Apply All Recommendations
                        </button>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span>Adaptive Difficulty</span>
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <div class="card-body">
                        <div style="margin-bottom: 2rem;">
                            <p style="margin-bottom: 1rem;">Current Level: <span id="current-difficulty" style="color: var(--coach-accent); font-weight: 700; font-size: 1.2rem;">Expert</span></p>
                            <div style="margin: 1rem 0;">
                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">Difficulty Adjustment:</label>
                                <select id="difficulty-selector" class="sleep-input" style="width: 100%; background: var(--glass-strong); border: 1px solid var(--border);">
                                    <option value="beginner">Beginner - Gentle introduction</option>
                                    <option value="intermediate">Intermediate - Balanced challenge</option>
                                    <option value="advanced">Advanced - Increased complexity</option>
                                    <option value="expert" selected>Expert - Maximum challenge</option>
                                    <option value="adaptive">Adaptive - AI-driven optimization</option>
                                </select>
                            </div>
                            <div style="background: var(--glass-strong); padding: 1.5rem; border-radius: 12px; margin: 1rem 0;">
                                <p id="difficulty-description" style="color: var(--text-muted);">
                                    Expert level provides maximum cognitive challenge with complex multi-step problems and advanced memory tasks.
                                </p>
                            </div>
                        </div>
                        <div style="margin: 1rem 0;">
                            <h4 style="color: var(--coach-accent); margin-bottom: 1rem;">Performance Zones</h4>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem; font-size: 0.9rem; color: var(--text-muted);">
                                <span>Too Easy</span>
                                <span>Challenge Zone</span>
                                <span>Too Hard</span>
                            </div>
                            <div style="height: 20px; background: linear-gradient(90deg, var(--danger) 0%, var(--warning) 30%, var(--success) 50%, var(--warning) 70%, var(--danger) 100%); border-radius: 10px; position: relative;">
                                <div style="width: 20px; height: 20px; background: white; border-radius: 50%; position: absolute; top: 0; left: 75%; transform: translateX(-50%); border: 2px solid var(--coach-primary);"></div>
                            </div>
                            <p style="text-align: center; margin-top: 1rem; color: var(--success); font-weight: 600;">Optimal Challenge Level</p>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span>Goal Tracking</span>
                        <i class="fas fa-bullseye"></i>
                    </div>
                    <div class="card-body">
                        <div style="margin-bottom: 2rem;">
                            <h4 style="color: var(--coach-accent); margin-bottom: 1rem;">Active Goals</h4>
                            <div style="space-y: 1rem;">
                                <div style="padding: 1rem; background: var(--glass-strong); border-radius: 12px; margin: 0.5rem 0;">
                                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                                        <span style="font-weight: 600;">Reach 90+ Cognitive Score</span>
                                        <span style="color: var(--success); font-weight: 600;">85/90</span>
                                    </div>
                                    <div style="width: 100%; height: 8px; background: var(--glass); border-radius: 4px; overflow: hidden;">
                                        <div style="width: 94%; height: 100%; background: linear-gradient(90deg, var(--success), var(--coach-accent)); border-radius: 4px;"></div>
                                    </div>
                                    <div style="color: var(--text-muted); font-size: 0.9rem; margin-top: 0.5rem;">5 points to go!</div>
                                </div>
                                <div style="padding: 1rem; background: var(--glass-strong); border-radius: 12px; margin: 0.5rem 0;">
                                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                                        <span style="font-weight: 600;">30-Day Meditation Streak</span>
                                        <span style="color: var(--meditation-accent); font-weight: 600;">12/30</span>
                                    </div>
                                    <div style="width: 100%; height: 8px; background: var(--glass); border-radius: 4px; overflow: hidden;">
                                        <div style="width: 40%; height: 100%; background: linear-gradient(90deg, var(--meditation-primary), var(--meditation-accent)); border-radius: 4px;"></div>
                                    </div>
                                    <div style="color: var(--text-muted); font-size: 0.9rem; margin-top: 0.5rem;">18 days remaining</div>
                                </div>
                                <div style="padding: 1rem; background: var(--glass-strong); border-radius: 12px; margin: 0.5rem 0;">
                                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                                        <span style="font-weight: 600;">Sub-180ms Reaction Time</span>
                                        <span style="color: var(--warning); font-weight: 600;">185ms</span>
                                    </div>
                                    <div style="width: 100%; height: 8px; background: var(--glass); border-radius: 4px; overflow: hidden;">
                                        <div style="width: 75%; height: 100%; background: linear-gradient(90deg, var(--warning), var(--coach-accent)); border-radius: 4px;"></div>
                                    </div>
                                    <div style="color: var(--text-muted); font-size: 0.9rem; margin-top: 0.5rem;">5ms improvement needed</div>
                                </div>
                            </div>
                        </div>
                        <button class="btn primary" id="add-goal" style="width: 100%;">
                            <i class="fas fa-plus"></i> Add New Goal
                        </button>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span>Weekly Challenge</span>
                        <i class="fas fa-calendar-week"></i>
                    </div>
                    <div class="card-body">
                        <div style="text-align: center; margin: 2rem 0;">
                            <div style="background: linear-gradient(135deg, var(--coach-primary), var(--coach-secondary)); padding: 2rem; border-radius: 16px; color: white;">
                                <h3 style="margin-bottom: 1rem;">Memory Marathon</h3>
                                <p style="margin-bottom: 1rem; opacity: 0.9;">Complete 5 different memory tests this week</p>
                                <div style="font-size: 2rem; font-weight: 700; margin: 1rem 0;">3/5</div>
                                <div style="background: rgba(255,255,255,0.2); height: 8px; border-radius: 4px; overflow: hidden;">
                                    <div style="width: 60%; height: 100%; background: white; border-radius: 4px;"></div>
                                </div>
                            </div>
                        </div>
                        <div style="text-align: center;">
                            <p style="color: var(--text-muted); margin-bottom: 1rem;">Reward: <span style="color: var(--coach-accent); font-weight: 600;">Memory Master Badge</span></p>
                            <button class="btn secondary">
                                <i class="fas fa-info-circle"></i> View All Challenges
                            </button>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span>Coach Analytics</span>
                        <i class="fas fa-chart-bar"></i>
                    </div>
                    <div class="card-body">
                        <div style="margin-bottom: 2rem;">
                            <h4 style="color: var(--coach-accent); margin-bottom: 1rem;">Coaching Impact</h4>
                            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem;">
                                <div style="text-align: center; padding: 1rem; background: var(--glass-strong); border-radius: 12px;">
                                    <div style="font-size: 1.8rem; font-weight: 700; color: var(--success);">+31%</div>
                                    <div style="color: var(--text-muted); font-size: 0.9rem;">Improvement</div>
                                </div>
                                <div style="text-align: center; padding: 1rem; background: var(--glass-strong); border-radius: 12px;">
                                    <div style="font-size: 1.8rem; font-weight: 700; color: var(--coach-accent);">47</div>
                                    <div style="color: var(--text-muted); font-size: 0.9rem;">Tips Given</div>
                                </div>
                                <div style="text-align: center; padding: 1rem; background: var(--glass-strong); border-radius: 12px;">
                                    <div style="font-size: 1.8rem; font-weight: 700; color: var(--meditation-accent);">12</div>
                                    <div style="color: var(--text-muted); font-size: 0.9rem;">Goals Achieved</div>
                                </div>
                                <div style="text-align: center; padding: 1rem; background: var(--glass-strong); border-radius: 12px;">
                                    <div style="font-size: 1.8rem; font-weight: 700; color: var(--progress-accent);">96%</div>
                                    <div style="color: var(--text-muted); font-size: 0.9rem;">Success Rate</div>
                                </div>
                            </div>
                        </div>
                        <div style="margin: 1rem 0;">
                            <h4 style="color: var(--coach-accent); margin-bottom: 1rem;">Recent Achievements</h4>
                            <div style="space-y: 0.5rem;">
                                <div style="display: flex; align-items: center; gap: 1rem; padding: 0.8rem; background: var(--glass-strong); border-radius: 8px; margin: 0.5rem 0;">
                                    <i class="fas fa-medal" style="color: var(--coach-accent);"></i>
                                    <span style="font-size: 0.9rem;">Consistency Champion - 12 days</span>
                                </div>
                                <div style="display: flex; align-items: center; gap: 1rem; padding: 0.8rem; background: var(--glass-strong); border-radius: 8px; margin: 0.5rem 0;">
                                    <i class="fas fa-trophy" style="color: var(--success);"></i>
                                    <span style="font-size: 0.9rem;">Memory Master - Level 12</span>
                                </div>
                                <div style="display: flex; align-items: center; gap: 1rem; padding: 0.8rem; background: var(--glass-strong); border-radius: 8px; margin: 0.5rem 0;">
                                    <i class="fas fa-star" style="color: var(--warning);"></i>
                                    <span style="font-size: 0.9rem;">Speed Demon - Sub-200ms</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Enhanced Application with Full Features
        const app = {
            state: {
                cognitiveScore: 85,
                focusScore: 85,
                memoryScore: 78,
                resilienceScore: 92,
                sessions: 47,
                currentStreak: 12,
                totalTime: 408, // minutes
                userData: {},
                testResults: [],
                moodLogs: [],
                sleepData: [],
                memoryTags: [],
                eegSessions: [],
                settings: {
                    difficulty: 'expert',
                    soundEnabled: true
                },
                activeTimers: {},
                gameStates: {}
            },
            
            charts: {},
            timers: {},
            
            // Utility Functions
            utils: {
                playSound(type) {
                    // Sound implementation would go here
                    console.log(`Playing sound: ${type}`);
                },
                
                saveToLocalStorage() {
                    localStorage.setItem('neuroMindData', JSON.stringify(app.state));
                },
                
                loadFromLocalStorage() {
                    const saved = localStorage.getItem('neuroMindData');
                    if (saved) {
                        app.state = { ...app.state, ...JSON.parse(saved) };
                    }
                },
                
                updateHeaderStats() {
                    document.getElementById('header-cognitive-score').textContent = app.state.cognitiveScore;
                    document.getElementById('header-sessions').textContent = app.state.sessions;
                    document.getElementById('header-streak').textContent = app.state.currentStreak + ' days';
                },
                
                generateCoachTip() {
                    const tips = [
                        "Your spatial reasoning is in the top 15% of users! Keep challenging yourself with complex puzzles.",
                        "Morning sessions show 23% better performance. Try scheduling important tests between 10-11 AM.",
                        "Your meditation practice is paying off - tests after meditation show 18% improvement in focus scores.",
                        "Sleep quality directly impacts cognitive performance. Your 8+ hour nights correlate with your best scores.",
                        "You're building impressive consistency! 12-day streaks show real commitment to cognitive health.",
                        "Working memory improvements unlock better performance across all other cognitive domains.",
                        "Your reaction times are getting faster! Sub-200ms puts you in the expert performance range."
                    ];
                    return tips[Math.floor(Math.random() * tips.length)];
                },

                formatTime(seconds) {
                    const mins = Math.floor(seconds / 60);
                    const secs = seconds % 60;
                    return `${mins}:${secs.toString().padStart(2, '0')}`;
                },

                showNotification(message, type = 'info') {
                    // Create notification element
                    const notification = document.createElement('div');
                    notification.style.cssText = `
                        position: fixed;
                        top: 2rem;
                        right: 2rem;
                        background: var(--card-bg);
                        color: var(--text);
                        padding: 1rem 2rem;
                        border-radius: 12px;
                        border: 1px solid var(--border);
                        backdrop-filter: blur(20px);
                        z-index: 1000;
                        animation: slideInFromRight 0.3s ease;
                        max-width: 300px;
                    `;
                    notification.textContent = message;
                    
                    document.body.appendChild(notification);
                    
                    setTimeout(() => {
                        notification.style.animation = 'slideOutToRight 0.3s ease';
                        setTimeout(() => notification.remove(), 300);
                    }, 3000);
                }
            },
            
            // Assessment Tests - Enhanced
            assessment: {
                reactionTest: {
                    trials: [],
                    currentTrial: 0,
                    startTime: 0,
                    
                    start() {
                        this.trials = [];
                        this.currentTrial = 0;
                        const circle = document.getElementById('reaction-circle');
                        circle.textContent = "Get Ready...";
                        circle.className = "reaction-test waiting";
                        
                        setTimeout(() => this.nextTrial(), 1000);
                    },
                    
                    nextTrial() {
                        if (this.currentTrial >= 10) {
                            this.complete();
                            return;
                        }
                        
                        const circle = document.getElementById('reaction-circle');
                        circle.textContent = "Wait...";
                        circle.className = "reaction-test waiting";
                        
                        const delay = 1000 + Math.random() * 3000;
                        setTimeout(() => {
                            if (circle.className.includes('waiting')) {
                                circle.textContent = "CLICK NOW!";
                                circle.className = "reaction-test ready";
                                this.startTime = performance.now();
                            }
                        }, delay);
                    },
                    
                    click() {
                        const circle = document.getElementById('reaction-circle');
                        if (circle.className.includes('ready')) {
                            const reactionTime = performance.now() - this.startTime;
                            circle.textContent = Math.round(reactionTime) + "ms";
                            circle.className = "reaction-test clicked";
                            
                            this.trials.push(reactionTime);
                            this.currentTrial++;
                            
                            document.getElementById('last-reaction').textContent = Math.round(reactionTime) + 'ms';
                            
                            setTimeout(() => this.nextTrial(), 1500);
                        }
                    },
                    
                    complete() {
                        const validTrials = this.trials.filter(t => t > 100 && t < 1000);
                        const meanRT = validTrials.reduce((a, b) => a + b, 0) / validTrials.length;
                        const bestRT = Math.min(...validTrials);
                        
                        document.getElementById('best-reaction').textContent = Math.round(bestRT) + 'ms';
                        
                        app.state.testResults.push({
                            type: 'reaction',
                            score: Math.round(meanRT),
                            timestamp: Date.now(),
                            trials: validTrials
                        });
                        
                        app.utils.saveToLocalStorage();
                        app.utils.showNotification(`Reaction test complete! Average: ${Math.round(meanRT)}ms`, 'success');
                        
                        const circle = document.getElementById('reaction-circle');
                        circle.textContent = "Click when GREEN";
                        circle.className = "reaction-test waiting";
                    }
                },
                
                memoryTest: {
                    sequence: [],
                    userSequence: [],
                    level: 1,
                    showing: false,
                    
                    start() {
                        this.sequence = [];
                        this.userSequence = [];
                        this.level = 1;
                        this.generateSequence();
                        this.showSequence();
                    },
                    
                    generateSequence() {
                        this.sequence = [];
                        for (let i = 0; i < this.level + 3; i++) {
                            this.sequence.push(Math.floor(Math.random() * 9));
                        }
                    },
                    
                    showSequence() {
                        const grid = document.getElementById('memory-test-grid');
                        grid.innerHTML = '';
                        
                        for (let i = 0; i < 9; i++) {
                            const item = document.createElement('div');
                            item.className = 'memory-item';
                            item.dataset.index = i;
                            item.addEventListener('click', () => this.userClick(i));
                            grid.appendChild(item);
                        }
                        
                        this.showing = true;
                        let index = 0;
                        const showNext = () => {
                            if (index < this.sequence.length && this.showing) {
                                const item = grid.children[this.sequence[index]];
                                item.classList.add('highlighted');
                                setTimeout(() => {
                                    if (item) item.classList.remove('highlighted');
                                    index++;
                                    setTimeout(showNext, 300);
                                }, 800);
                            } else {
                                this.showing = false;
                            }
                        };
                        showNext();
                    },
                    
                    userClick(index) {
                        if (this.showing) return;
                        
                        this.userSequence.push(index);
                        const item = document.getElementById('memory-test-grid').children[index];
                        item.style.background = 'var(--assessment-accent)';
                        setTimeout(() => {
                            item.style.background = '';
                        }, 200);
                        
                        if (this.userSequence.length === this.sequence.length) {
                            setTimeout(() => this.checkSequence(), 500);
                        }
                    },
                    
                    checkSequence() {
                        const correct = this.sequence.every((val, i) => val === this.userSequence[i]);
                        if (correct) {
                            this.level++;
                            document.getElementById('memory-level').textContent = this.level;
                            document.getElementById('memory-test-score').textContent = this.level - 1;
                            
                            app.utils.showNotification(`Level ${this.level} unlocked!`, 'success');
                            
                            this.userSequence = [];
                            setTimeout(() => {
                                this.generateSequence();
                                this.showSequence();
                            }, 1000);
                        } else {
                            app.state.testResults.push({
                                type: 'memory',
                                score: this.level - 1,
                                timestamp: Date.now()
                            });
                            
                            app.utils.showNotification(`Memory test complete! Final level: ${this.level - 1}`, 'info');
                            app.utils.saveToLocalStorage();
                            this.start();
                        }
                    }
                },

                stroopTest: {
                    words: ['RED', 'BLUE', 'GREEN', 'YELLOW'],
                    colors: ['red', 'blue', 'green', 'yellow'],
                    currentWord: '',
                    currentColor: '',
                    score: { correct: 0, errors: 0 },
                    active: false,
                    
                    start() {
                        this.score = { correct: 0, errors: 0 };
                        this.active = true;
                        document.getElementById('stroop-buttons').style.display = 'flex';
                        document.getElementById('start-stroop-test').style.display = 'none';
                        this.nextWord();
                    },
                    
                    nextWord() {
                        if (this.score.correct + this.score.errors >= 20) {
                            this.complete();
                            return;
                        }
                        
                        this.currentWord = this.words[Math.floor(Math.random() * this.words.length)];
                        this.currentColor = this.colors[Math.floor(Math.random() * this.colors.length)];
                        
                        const wordElement = document.getElementById('stroop-word');
                        wordElement.textContent = this.currentWord;
                        wordElement.style.color = this.currentColor;
                    },
                    
                    answer(selectedColor) {
                        if (!this.active) return;
                        
                        if (selectedColor === this.currentColor) {
                            this.score.correct++;
                            app.utils.showNotification('Correct!', 'success');
                        } else {
                            this.score.errors++;
                            app.utils.showNotification('Try again!', 'warning');
                        }
                        
                        document.getElementById('stroop-correct').textContent = this.score.correct;
                        document.getElementById('stroop-errors').textContent = this.score.errors;
                        
                        setTimeout(() => this.nextWord(), 500);
                    },
                    
                    complete() {
                        this.active = false;
                        const accuracy = (this.score.correct / (this.score.correct + this.score.errors)) * 100;
                        
                        app.state.testResults.push({
                            type: 'stroop',
                            score: Math.round(accuracy),
                            timestamp: Date.now(),
                            details: this.score
                        });
                        
                        app.utils.saveToLocalStorage();
                        app.utils.showNotification(`Stroop test complete! Accuracy: ${Math.round(accuracy)}%`, 'success');
                        
                        document.getElementById('stroop-buttons').style.display = 'none';
                        document.getElementById('start-stroop-test').style.display = 'inline-block';
                        document.getElementById('stroop-word').textContent = 'Ready?';
                        document.getElementById('stroop-word').style.color = 'var(--text)';
                    }
                }
            },
            
            // Training Games - Enhanced
            training: {
                memoryGame: {
                    cards: [],
                    flippedCards: [],
                    matchedPairs: 0,
                    moves: 0,
                    timeLeft: 60,
                    timer: null,
                    
                    start() {
                        this.reset();
                        this.createBoard();
                        this.startTimer();
                        document.getElementById('memory-game-overlay').style.display = 'none';
                    },
                    
                    reset() {
                        this.cards = [];
                        this.flippedCards = [];
                        this.matchedPairs = 0;
                        this.moves = 0;
                        this.timeLeft = 60;
                        document.getElementById('game-moves').textContent = '0';
                        document.getElementById('game-time').textContent = '60';
                    },
                    
                    createBoard() {
                        const icons = ['🚀', '🧠', '⚛️', '🔬', '🧬', '🛰️', '🤖', '💊'];
                        const gameIcons = [...icons, ...icons].sort(() => 0.5 - Math.random());
                        const board = document.getElementById('memory-game-board');
                        board.innerHTML = '';
                        
                        gameIcons.forEach((icon, index) => {
                            const card = document.createElement('div');
                            card.className = 'memory-card';
                            card.dataset.icon = icon;
                            card.dataset.index = index;
                            card.innerHTML = `
                                <div class="memory-card-face memory-card-front"></div>
                                <div class="memory-card-face memory-card-back">${icon}</div>
                            `;
                            card.addEventListener('click', () => this.flipCard(card));
                            board.appendChild(card);
                            this.cards.push(card);
                        });
                    },
                    
                    startTimer() {
                        this.timer = setInterval(() => {
                            this.timeLeft--;
                            document.getElementById('game-time').textContent = this.timeLeft;
                            if (this.timeLeft <= 0) {
                                this.endGame(false);
                            }
                        }, 1000);
                    },
                    
                    flipCard(card) {
                        if (this.flippedCards.length >= 2 || card.classList.contains('is-flipped') || card.classList.contains('is-matched')) {
                            return;
                        }
                        
                        card.classList.add('is-flipped');
                        this.flippedCards.push(card);
                        
                        if (this.flippedCards.length === 2) {
                            this.moves++;
                            document.getElementById('game-moves').textContent = this.moves;
                            setTimeout(() => this.checkMatch(), 1000);
                        }
                    },
                    
                    checkMatch() {
                        const [card1, card2] = this.flippedCards;
                        
                        if (card1.dataset.icon === card2.dataset.icon) {
                            card1.classList.add('is-matched');
                            card2.classList.add('is-matched');
                            this.matchedPairs++;
                            
                            if (this.matchedPairs === 8) {
                                this.endGame(true);
                            }
                        } else {
                            card1.classList.remove('is-flipped');
                            card2.classList.remove('is-flipped');
                        }
                        
                        this.flippedCards = [];
                    },
                    
                    endGame(won) {
                        clearInterval(this.timer);
                        const overlay = document.getElementById('memory-game-overlay');
                        const title = document.getElementById('game-over-title');
                        
                        if (won) {
                            title.textContent = "Excellent Memory!";
                            const score = Math.max(0, 100 - this.moves * 2 - (60 - this.timeLeft));
                            app.state.testResults.push({
                                type: 'memory-game',
                                score: score,
                                timestamp: Date.now(),
                                moves: this.moves,
                                timeUsed: 60 - this.timeLeft
                            });
                            app.utils.showNotification(`Memory game won! Score: ${score}`, 'success');
                        } else {
                            title.textContent = "Time's Up!";
                            app.utils.showNotification('Try again for a better score!', 'info');
                        }
                        
                        overlay.style.display = 'flex';
                        app.utils.saveToLocalStorage();
                    }
                }
            },
            
            // Meditation & Wellness - Enhanced
            meditation: {
                breathing: {
                    active: false,
                    pattern: '4-4-4-4',
                    phase: 'inhale',
                    timer: null,
                    
                    start() {
                        this.active = true;
                        this.pattern = document.getElementById('breathing-pattern').value;
                        const circle = document.getElementById('breathing-circle');
                        const instruction = document.getElementById('breathing-instruction');
                        
                        document.getElementById('start-breathing').style.display = 'none';
                        document.getElementById('stop-breathing').style.display = 'inline-block';
                        
                        this.cycle();
                    },
                    
                    cycle() {
                        if (!this.active) return;
                        
                        const [inhale, hold1, exhale, hold2] = this.pattern.split('-').map(Number);
                        const circle = document.getElementById('breathing-circle');
                        const instruction = document.getElementById('breathing-instruction');
                        
                        // Inhale
                        instruction.textContent = "Breathe in...";
                        circle.classList.add('inhale');
                        circle.classList.remove('exhale');
                        
                        setTimeout(() => {
                            if (!this.active) return;
                            // Hold
                            instruction.textContent = "Hold...";
                            
                            setTimeout(() => {
                                if (!this.active) return;
                                // Exhale
                                instruction.textContent = "Breathe out...";
                                circle.classList.add('exhale');
                                circle.classList.remove('inhale');
                                
                                setTimeout(() => {
                                    if (!this.active) return;
                                    // Hold
                                    instruction.textContent = "Hold...";
                                    setTimeout(() => this.cycle(), hold2 * 1000);
                                }, exhale * 1000);
                            }, hold1 * 1000);
                        }, inhale * 1000);
                    },
                    
                    stop() {
                        this.active = false;
                        const circle = document.getElementById('breathing-circle');
                        circle.classList.remove('inhale', 'exhale');
                        document.getElementById('breathing-instruction').textContent = "Click start to begin";
                        document.getElementById('start-breathing').style.display = 'inline-block';
                        document.getElementById('stop-breathing').style.display = 'none';
                    }
                },
                
                session: {
                    active: false,
                    duration: 300,
                    timeLeft: 0,
                    timer: null,
                    
                    start() {
                        this.duration = parseInt(document.getElementById('meditation-duration').value);
                        this.timeLeft = this.duration;
                        this.active = true;
                        
                        document.getElementById('meditation-timer').style.display = 'block';
                        document.getElementById('start-meditation').style.display = 'none';
                        
                        this.updateDisplay();
                        this.timer = setInterval(() => this.tick(), 1000);
                    },
                    
                    tick() {
                        this.timeLeft--;
                        this.updateDisplay();
                        
                        if (this.timeLeft <= 0) {
                            this.complete();
                        }
                    },
                    
                    updateDisplay() {
                        document.getElementById('timer-display').textContent = app.utils.formatTime(this.timeLeft);
                        
                        const elapsed = this.duration - this.timeLeft;
                        const phase = elapsed < 30 ? 'Settling in...' : 
                                     elapsed < this.duration - 30 ? 'Deep meditation...' : 
                                     'Gently returning...';
                        document.getElementById('meditation-phase').textContent = phase;
                    },
                    
                    complete() {
                        clearInterval(this.timer);
                        this.active = false;
                        
                        app.state.testResults.push({
                            type: 'meditation',
                            score: this.duration,
                            timestamp: Date.now(),
                            completed: true
                        });
                        
                        app.utils.saveToLocalStorage();
                        app.utils.showNotification(`Meditation complete! Duration: ${Math.floor(this.duration/60)} minutes`, 'success');
                        
                        document.getElementById('meditation-timer').style.display = 'none';
                        document.getElementById('start-meditation').style.display = 'inline-block';
                    },
                    
                    stop() {
                        clearInterval(this.timer);
                        this.active = false;
                        document.getElementById('meditation-timer').style.display = 'none';
                        document.getElementById('start-meditation').style.display = 'inline-block';
                    }
                }
            },
            
            // EEG Simulation - Enhanced
            eeg: {
                active: false,
                bands: {
                    delta: 15,
                    theta: 20,
                    alpha: 25,
                    beta: 35,
                    gamma: 5
                },
                
                start() {
                    this.active = true;
                    this.animate();
                    app.utils.showNotification('EEG simulation started', 'info');
                },
                
                stop() {
                    this.active = false;
                    document.querySelectorAll('.wave-line').forEach(wave => {
                        wave.style.animationPlayState = 'paused';
                    });
                    app.utils.showNotification('EEG simulation stopped', 'info');
                },
                
                animate() {
                    if (!this.active) return;
                    
                    document.querySelectorAll('.wave-line').forEach(wave => {
                        wave.style.animationPlayState = 'running';
                    });
                    
                    // Simulate dynamic band powers based on recent test performance
                    const recentTests = app.state.testResults.slice(-5);
                    if (recentTests.length > 0) {
                        const avgScore = recentTests.reduce((sum, test) => sum + test.score, 0) / recentTests.length;
                        
                        // Adjust band powers based on performance
                        if (avgScore > 80) {
                            this.bands.beta = Math.min(45, this.bands.beta + 2);
                            this.bands.gamma = Math.min(15, this.bands.gamma + 1);
                        } else if (avgScore < 60) {
                            this.bands.alpha = Math.min(35, this.bands.alpha + 2);
                            this.bands.theta = Math.min(30, this.bands.theta + 1);
                        }
                    }
                    
                    this.updateState();
                },
                
                updateState() {
                    const dominantBand = Object.entries(this.bands).reduce((a, b) => 
                        this.bands[a[0]] > this.bands[b[0]] ? a : b
                    );
                    
                    const states = {
                        delta: 'Deep Rest',
                        theta: 'Creative Flow',
                        alpha: 'Relaxed Focus',
                        beta: 'Active Thinking',
                        gamma: 'Peak Performance'
                    };
                    
                    document.getElementById('current-eeg-state').textContent = states[dominantBand[0]];
                    
                    // Update band percentages display
                    Object.entries(this.bands).forEach(([band, value]) => {
                        const element = document.querySelector(`[data-band="${band}"]`);
                        if (element) {
                            element.textContent = value + '%';
                        }
                    });
                }
            },
            
            // Data Management - Enhanced
            data: {
                export(format) {
                    const data = {
                        metadata: {
                            exportDate: new Date().toISOString(),
                            version: '2.0',
                            userId: 'user_' + Date.now()
                        },
                        cognitiveScores: app.state.testResults,
                        moodLogs: app.state.moodLogs,
                        sleepData: app.state.sleepData,
                        memoryTags: app.state.memoryTags,
                        eegSessions: app.state.eegSessions,
                        settings: app.state.settings
                    };
                    
                    if (format === 'json') {
                        const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
                        this.downloadFile(blob, `neuromind-data-${new Date().toISOString().split('T')[0]}.json`);
                    } else if (format === 'csv') {
                        const csv = this.convertToCSV(data);
                        const blob = new Blob([csv], { type: 'text/csv' });
                        this.downloadFile(blob, `neuromind-data-${new Date().toISOString().split('T')[0]}.csv`);
                    }
                    
                    app.utils.showNotification(`Data exported as ${format.toUpperCase()}`, 'success');
                },
                
                downloadFile(blob, filename) {
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = filename;
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                },
                
                convertToCSV(data) {
                    let csv = 'Type,Score,Timestamp,Details\n';
                    data.cognitiveScores.forEach(entry => {
                        const details = entry.moves ? `moves:${entry.moves}` : '';
                        csv += `"${entry.type}","${entry.score}","${new Date(entry.timestamp).toISOString()}","${details}"\n`;
                    });
                    return csv;
                },
                
                clearAll() {
                    if (confirm('Are you sure you want to delete all your data? This cannot be undone.')) {
                        localStorage.removeItem('neuroMindData');
                        app.state = {
                            cognitiveScore: 50,
                            focusScore: 50,
                            memoryScore: 50,
                            resilienceScore: 50,
                            sessions: 0,
                            currentStreak: 0,
                            totalTime: 0,
                            testResults: [],
                            moodLogs: [],
                            sleepData: [],
                            memoryTags: [],
                            eegSessions: [],
                            settings: { difficulty: 'intermediate', soundEnabled: true }
                        };
                        app.utils.showNotification('All data cleared', 'warning');
                        location.reload();
                    }
                }
            },
            
            // Chart Management - Enhanced
            initCharts() {
                if (typeof Chart === 'undefined') {
                    console.error('Chart.js not loaded');
                    return;
                }
                
                Chart.register(ChartDataLabels);
                
                // Cognitive Score Gauge
                const cognitiveCtx = document.getElementById('cognitiveScoreChart');
                if (cognitiveCtx) {
                    this.charts.cognitive = new Chart(cognitiveCtx, {
                        type: 'doughnut',
                        data: {
                            datasets: [{
                                data: [app.state.cognitiveScore, 100 - app.state.cognitiveScore],
                                backgroundColor: ['#3b82f6', 'rgba(255, 255, 255, 0.1)'],
                                borderWidth: 0,
                                circumference: 180,
                                rotation: 270
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: { display: false },
                                tooltip: { enabled: false },
                                datalabels: {
                                    formatter: (value, context) => {
                                        return context.dataIndex === 0 ? value : '';
                                    },
                                    color: '#f1f5f9',
                                    font: { size: 40, weight: 'bold' }
                                }
                            }
                        }
                    });
                }
                
                // Progress Chart
                const progressCtx = document.getElementById('progressChart');
                if (progressCtx) {
                    const last7Days = Array.from({length: 7}, (_, i) => {
                        const date = new Date();
                        date.setDate(date.getDate() - 6 + i);
                        return date.toLocaleDateString('en', { weekday: 'short' });
                    });
                    
                    const scores = [72, 75, 78, 82, 79, 85, 88];
                    
                    this.charts.progress = new Chart(progressCtx, {
                        type: 'line',
                        data: {
                            labels: last7Days,
                            datasets: [{
                                label: 'Cognitive Score',
                                data: scores,
                                borderColor: '#10b981',
                                backgroundColor: 'rgba(16, 185, 129, 0.1)',
                                tension: 0.4,
                                fill: true,
                                pointBackgroundColor: '#10b981',
                                pointBorderColor: '#ffffff',
                                pointBorderWidth: 2,
                                pointRadius: 6
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: { display: false },
                                datalabels: { display: false }
                            },
                            scales: {
                                y: { 
                                    beginAtZero: true, 
                                    max: 100,
                                    grid: { color: 'rgba(255, 255, 255, 0.1)' },
                                    ticks: { color: '#94a3b8' }
                                },
                                x: {
                                    grid: { color: 'rgba(255, 255, 255, 0.1)' },
                                    ticks: { color: '#94a3b8' }
                                }
                            }
                        }
                    });
                }
                
                // Mood Performance Chart
                const moodCtx = document.getElementById('moodPerformanceChart');
                if (moodCtx) {
                    this.charts.moodPerformance = new Chart(moodCtx, {
                        type: 'scatter',
                        data: {
                            datasets: [{
                                label: 'Mood vs Performance',
                                data: [
                                    {x: 8, y: 92}, {x: 7, y: 85}, {x: 6, y: 78}, 
                                    {x: 4, y: 65}, {x: 9, y: 95}, {x: 5, y: 72}
                                ],
                                backgroundColor: '#ec4899',
                                borderColor: '#db2777',
                                pointRadius: 8,
                                pointHoverRadius: 10
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: { display: false },
                                datalabels: { display: false }
                            },
                            scales: {
                                x: { 
                                    title: { display: true, text: 'Mood Score (1-10)', color: '#94a3b8' },
                                    min: 1, max: 10,
                                    grid: { color: 'rgba(255, 255, 255, 0.1)' },
                                    ticks: { color: '#94a3b8' }
                                },
                                y: { 
                                    title: { display: true, text: 'Cognitive Performance', color: '#94a3b8' },
                                    min: 0, max: 100,
                                    grid: { color: 'rgba(255, 255, 255, 0.1)' },
                                    ticks: { color: '#94a3b8' }
                                }
                            }
                        }
                    });
                }
                
                // Skill Radar Chart
                const radarCtx = document.getElementById('skillRadarChart');
                if (radarCtx) {
                    this.charts.skillRadar = new Chart(radarCtx, {
                        type: 'radar',
                        data: {
                            labels: ['Memory', 'Focus', 'Speed', 'Logic', 'Spatial', 'Flexibility'],
                            datasets: [{
                                label: 'Current Level',
                                data: [78, 85, 82, 88, 96, 74],
                                backgroundColor: 'rgba(16, 185, 129, 0.2)',
                                borderColor: '#10b981',
                                pointBackgroundColor: '#10b981',
                                pointBorderColor: '#ffffff',
                                pointHoverBackgroundColor: '#ffffff',
                                pointHoverBorderColor: '#10b981'
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: { display: false },
                                datalabels: { display: false }
                            },
                            scales: {
                                r: {
                                    beginAtZero: true,
                                    max: 100,
                                    grid: { color: 'rgba(255, 255, 255, 0.1)' },
                                    angleLines: { color: 'rgba(255, 255, 255, 0.1)' },
                                    pointLabels: { color: '#94a3b8' },
                                    ticks: { color: '#94a3b8', display: false }
                                }
                            }
                        }
                    });
                }
            },
            
            // Event Listeners - Enhanced
            initEventListeners() {
                // Tab Navigation
                document.querySelectorAll('.tab-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        switchTab(e.target.dataset.tab);
                    });
                });
                
                // Assessment Tests
                const reactionBtn = document.getElementById('start-reaction-test');
                if (reactionBtn) {
                    reactionBtn.addEventListener('click', () => app.assessment.reactionTest.start());
                }
                
                const reactionCircle = document.getElementById('reaction-circle');
                if (reactionCircle) {
                    reactionCircle.addEventListener('click', () => app.assessment.reactionTest.click());
                }
                
                const memoryBtn = document.getElementById('start-memory-test');
                if (memoryBtn) {
                    memoryBtn.addEventListener('click', () => app.assessment.memoryTest.start());
                }
                
                // Stroop Test
                const stroopBtn = document.getElementById('start-stroop-test');
                if (stroopBtn) {
                    stroopBtn.addEventListener('click', () => app.assessment.stroopTest.start());
                }
                
                document.querySelectorAll('#stroop-buttons .btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        app.assessment.stroopTest.answer(e.target.dataset.color);
                    });
                });
                
                // Memory Game
                const gameBtn = document.getElementById('start-game-btn');
                if (gameBtn) {
                    gameBtn.addEventListener('click', () => app.training.memoryGame.start());
                }
                
                const restartBtn = document.getElementById('restart-game-btn');
                if (restartBtn) {
                    restartBtn.addEventListener('click', () => app.training.memoryGame.start());
                }
                
                // Meditation
                const breathingBtn = document.getElementById('start-breathing');
                if (breathingBtn) {
                    breathingBtn.addEventListener('click', () => app.meditation.breathing.start());
                }
                
                const stopBreathingBtn = document.getElementById('stop-breathing');
                if (stopBreathingBtn) {
                    stopBreathingBtn.addEventListener('click', () => app.meditation.breathing.stop());
                }
                
                const meditationBtn = document.getElementById('start-meditation');
                if (meditationBtn) {
                    meditationBtn.addEventListener('click', () => app.meditation.session.start());
                }
                
                // EEG
                const eegStartBtn = document.getElementById('start-eeg');
                if (eegStartBtn) {
                    eegStartBtn.addEventListener('click', () => app.eeg.start());
                }
                
                const eegStopBtn = document.getElementById('stop-eeg');
                if (eegStopBtn) {
                    eegStopBtn.addEventListener('click', () => app.eeg.stop());
                }
                
                // Mood Tracking
                document.querySelectorAll('.mood-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        document.querySelectorAll('.mood-btn').forEach(b => b.classList.remove('selected'));
                        e.target.classList.add('selected');
                    });
                });
                
                const logMoodBtn = document.getElementById('log-mood');
                if (logMoodBtn) {
                    logMoodBtn.addEventListener('click', () => {
                        const selectedMood = document.querySelector('.mood-btn.selected');
                        const intensity = document.getElementById('mood-intensity').value;
                        const notes = document.getElementById('mood-notes').value;
                        
                        if (selectedMood) {
                            app.state.moodLogs.push({
                                mood: selectedMood.dataset.mood,
                                intensity: parseInt(intensity),
                                notes: notes,
                                cognitiveScore: app.state.cognitiveScore,
                                timestamp: Date.now()
                            });
                            
                            app.utils.saveToLocalStorage();
                            app.utils.showNotification('Mood logged successfully!', 'success');
                            
                            // Clear form
                            selectedMood.classList.remove('selected');
                            document.getElementById('mood-notes').value = '';
                        }
                    });
                }
                
                // Mood intensity slider
                const intensitySlider = document.getElementById('mood-intensity');
                if (intensitySlider) {
                    intensitySlider.addEventListener('input', (e) => {
                        document.getElementById('intensity-value').textContent = e.target.value;
                    });
                }
                
                // Memory tagging
                const vividnessSlider = document.getElementById('memory-vividness');
                if (vividnessSlider) {
                    vividnessSlider.addEventListener('input', (e) => {
                        document.getElementById('vividness-value').textContent = e.target.value;
                    });
                }
                
                document.querySelectorAll('.memory-emotion-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        document.querySelectorAll('.memory-emotion-btn').forEach(b => b.classList.remove('selected'));
                        e.target.classList.add('selected');
                    });
                });
                
                const saveMemoryBtn = document.getElementById('save-memory');
                if (saveMemoryBtn) {
                    saveMemoryBtn.addEventListener('click', () => {
                        const description = document.getElementById('memory-description').value;
                        const selectedEmotion = document.querySelector('.memory-emotion-btn.selected');
                        const vividness = document.getElementById('memory-vividness').value;
                        
                        if (description && selectedEmotion) {
                            app.state.memoryTags.push({
                                description,
                                emotion: selectedEmotion.dataset.emotion,
                                vividness: parseInt(vividness),
                                timestamp: Date.now()
                            });
                            
                            app.utils.saveToLocalStorage();
                            app.utils.showNotification('Memory tagged successfully!', 'success');
                            
                            // Clear form
                            document.getElementById('memory-description').value = '';
                            selectedEmotion.classList.remove('selected');
                            document.getElementById('memory-vividness').value = '5';
                            document.getElementById('vividness-value').textContent = '5';
                        }
                    });
                }
                
                // Data Export
                const exportBtns = ['export-json', 'export-csv'];
                exportBtns.forEach(btnId => {
                    const btn = document.getElementById(btnId);
                    if (btn) {
                        btn.addEventListener('click', () => {
                            const format = btnId.split('-')[1];
                            app.data.export(format);
                        });
                    }
                });
                
                const clearDataBtn = document.getElementById('clear-data');
                if (clearDataBtn) {
                    clearDataBtn.addEventListener('click', () => app.data.clearAll());
                }
                
                // AI Coach
                const coachTipBtn = document.getElementById('get-personalized-tip');
                if (coachTipBtn) {
                    coachTipBtn.addEventListener('click', () => {
                        document.getElementById('coach-tip').textContent = app.utils.generateCoachTip();
                        app.utils.showNotification('New tip generated!', 'info');
                    });
                }
                
                // Sleep logging
                const logSleepBtn = document.getElementById('log-sleep');
                if (logSleepBtn) {
                    logSleepBtn.addEventListener('click', () => {
                        const bedtime = document.getElementById('bedtime').value;
                        const waketime = document.getElementById('waketime').value;
                        const quality = document.getElementById('sleep-quality').value;
                        const interruptions = document.getElementById('sleep-interruptions').value;
                        
                        if (bedtime && waketime && quality) {
                            app.state.sleepData.push({
                                bedtime,
                                waketime,
                                quality,
                                interruptions: parseInt(interruptions) || 0,
                                date: new Date().toDateString()
                            });
                            
                            app.utils.saveToLocalStorage();
                            app.utils.showNotification('Sleep data logged successfully!', 'success');
                        }
                    });
                }
            },
            
            // Initialization
            init() {
                this.utils.loadFromLocalStorage();
                this.utils.updateHeaderStats();
                this.initCharts();
                this.initEventListeners();
                
                // Set initial active tab
                document.querySelector('.tab-btn.active').click();
                
                app.utils.showNotification('Welcome to NeuroMind Elite!', 'success');
                console.log('NeuroMind Elite v2.0 initialized successfully');
            }
        };
        
        // Global Functions
        function switchTab(tabName) {
            // Remove active class from all tabs and content
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            // Add active class to selected tab and content
            document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
            document.getElementById(tabName).classList.add('active');
            
            app.utils.playSound('click');
        }
        
        function startMindfulMoment(type) {
            const messages = {
                gratitude: "Take a moment to think of three things you're grateful for today...",
                breath: "Focus on your breath. Feel the air entering and leaving your body...",
                intention: "Set a positive intention for the rest of your day..."
            };
            
            app.utils.showNotification(messages[type], 'info');
        }
        
        function showSleepTip(category) {
            const tips = {
                temperature: {
                    title: "Optimal Sleep Temperature",
                    text: "Keep your bedroom between 65-68°F (18-20°C) for the best sleep quality. Your body temperature naturally drops to initiate sleep, so a cooler environment supports this process."
                },
                light: {
                    title: "Light Management",
                    text: "Reduce blue light exposure 1-2 hours before bedtime. Use dim, warm lighting in the evening and consider blackout curtains or an eye mask for complete darkness."
                },
                noise: {
                    title: "Sound Environment",
                    text: "Maintain a quiet environment or use consistent white noise. Sudden sounds can disrupt sleep cycles even if they don't fully wake you."
                },
                routine: {
                    title: "Sleep Routine",
                    text: "Establish a consistent bedtime routine. Go to bed and wake up at the same time every day, even on weekends, to regulate your circadian rhythm."
                }
            };
            
            const tip = tips[category];
            document.getElementById('sleep-tip-title').textContent = tip.title;
            document.getElementById('sleep-tip-text').textContent = tip.text;
            document.getElementById('sleep-tip-content').style.display = 'block';
        }
        
        // Start the application
        document.addEventListener('DOMContentLoaded', () => {
            app.init();
        });
    </script>
</body>
</html>
