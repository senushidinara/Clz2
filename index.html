<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NeuroMind Elite | Reliable & Functional Edition</title>
    
    <!-- 
      IMPORTANT NOTE: This app requires an internet connection for two essential libraries below.
      If the charts or scores do not appear, please ensure you are connected to the internet.
    -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>

    <style>
        :root {
            --primary: #00a8ff; --primary-light: #4ddbff; --secondary: #e056fd; --tertiary: #7bed9f;
            --dark: #1e272e; --darker: #191f24; --card-bg: rgba(45, 52, 54, 0.6); --glass: rgba(255, 255, 255, 0.08);
            --text: #d2dae2; --text-muted: #808e9b; --success: #2ed573; --warning: #ffb142; --danger: #ff4757;
            --border: rgba(255, 255, 255, 0.15);
        }
        /* Using a system font for reliability - no external requests */
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"; }
        body { background: linear-gradient(135deg, var(--darker) 0%, var(--dark) 100%); color: var(--text); min-height: 100vh; overflow-x: hidden; }
        .app-container { max-width: 1600px; margin: 0 auto; padding: 2rem; }
        header { display: flex; justify-content: space-between; align-items: center; padding: 1rem 0; margin-bottom: 2rem; border-bottom: 1px solid var(--border); }
        .logo { display: flex; align-items: center; gap: 1rem; font-size: 2rem; font-weight: 700; }
        .nav-tabs { display: flex; background: var(--glass); border-radius: 12px; padding: 0.5rem; margin-bottom: 2rem; backdrop-filter: blur(10px); flex-wrap: wrap; }
        .tab-btn { flex: 1; padding: 1rem; background: transparent; border: none; color: var(--text); font-weight: 600; border-radius: 8px; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 0.75rem; min-width: 140px; }
        .tab-btn:hover { background: rgba(255, 255, 255, 0.1); }
        .tab-btn.active { background: var(--primary); box-shadow: 0 4px 15px rgba(0, 168, 255, 0.4); }
        .tab-content { display: none; animation: fadeIn 0.6s; }
        .tab-content.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
        .card-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 2rem; margin-bottom: 2rem; }
        .card { background: var(--card-bg); border-radius: 16px; overflow: hidden; }
        .card-header { padding: 1.5rem; border-bottom: 1px solid var(--border); display: flex; align-items: center; gap: 1rem; font-size: 1.4rem; font-weight: 600; }
        .card-body { padding: 1.5rem; }
        .btn { padding: 0.8rem 1.5rem; font-size: 0.9rem; border-radius: 8px; border: none; font-weight: 600; cursor: pointer; margin: 0.5rem 0; }
        .btn.primary { background: var(--primary); }
        .btn:disabled { background: var(--text-muted); cursor: not-allowed; }
        
        #cognitive-score-chart-container { position: relative; height: 300px; }
        .sub-scores-container { display: flex; justify-content: space-around; margin-top: 1.5rem; }
        .sub-score { text-align: center; }
        .sub-score .progress-bar { width: 100px; height: 8px; background: var(--glass); border-radius: 4px; margin: 0.5rem auto 0; overflow: hidden; }
        .sub-score .progress-fill { height: 100%; width: 50%; background: var(--primary); transition: width 0.5s ease; }
        .sub-score .memory { background: var(--secondary); }
        .sub-score .resilience { background: var(--tertiary); }
        
        .memory-game-board { display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem; max-width: 400px; margin: 1rem auto; perspective: 1000px; }
        .memory-card { aspect-ratio: 1; position: relative; cursor: pointer; transform-style: preserve-3d; transition: transform 0.6s; }
        .memory-card-face { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; display: flex; align-items: center; justify-content: center; border-radius: 8px; font-size: 2rem;}
        .memory-card-front { background: var(--glass); }
        .memory-card-back { background: linear-gradient(135deg, var(--primary), var(--secondary)); transform: rotateY(180deg); }
        .memory-card.is-flipped { transform: rotateY(180deg); }
        .memory-card.is-matched { opacity: 0.5; }
        #memory-game-overlay { position: absolute; top:0; left:0; right:0; bottom:0; background:rgba(0,0,0,0.8); display:none; flex-direction:column; justify-content:center; align-items:center; z-index:10; }

        .pulse-guide { animation: pulse-animation 1.5s infinite; }
        @keyframes pulse-animation { 0% { box-shadow: 0 0 0 0 rgba(0, 168, 255, 0.7); } 70% { box-shadow: 0 0 0 10px rgba(0, 168, 255, 0); } 100% { box-shadow: 0 0 0 0 rgba(0, 168, 255, 0); } }
    </style>
</head>
<body>
    <!-- 
      AUDIO NOTE: Modern browsers will not play sound until you click on the page.
      Click anywhere to enable the sound effects.
    -->
    <audio id="sfx-click" src="https://www.soundjay.com/buttons/sounds/button-16.mp3" preload="auto"></audio>
    <audio id="sfx-success" src="https://www.soundjay.com/buttons/sounds/button-09.mp3" preload="auto"></audio>
    <audio id="sfx-notify" src="https://www.soundjay.com/buttons/sounds/button-10.mp3" preload="auto"></audio>
    <audio id="sfx-win" src="https://www.soundjay.com/misc/sounds/magic-chime-01.mp3" preload="auto"></audio>
    <audio id="sfx-lose" src="https://www.soundjay.com/misc/sounds/fail-trombone-01.mp3" preload="auto"></audio>

    <div class="app-container">
        <header><div class="logo">üß† NeuroMind Elite</div></header>
        <nav class="nav-tabs">
            <button class="tab-btn active" data-tab="dashboard">üìà Dashboard</button>
            <button class="tab-btn" data-tab="training">üèãÔ∏è Training Hub</button>
            <button class="tab-btn" data-tab="insights">üí° Insights</button>
            <button class="tab-btn" data-tab="coach">ü§ñ AI Coach</button>
        </nav>

        <div id="dashboard" class="tab-content active">
             <div class="card">
                <div class="card-header">Your Cognitive Score</div>
                <div class="card-body">
                    <div id="cognitive-score-chart-container"><canvas id="cognitiveScoreChart"></canvas></div>
                    <div class="sub-scores-container">
                        <div class="sub-score"><span>Focus</span><div class="progress-bar"><div id="focus-score-bar" class="progress-fill"></div></div></div>
                        <div class="sub-score"><span>Memory</span><div class="progress-bar"><div id="memory-score-bar" class="progress-fill memory"></div></div></div>
                        <div class="sub-score"><span>Resilience</span><div class="progress-bar"><div id="resilience-score-bar" class="progress-fill resilience"></div></div></div>
                    </div>
                </div>
            </div>
        </div>

        <div id="training" class="tab-content">
             <div class="card-grid">
                <div class="card">
                    <div class="card-header">Synaptic Pathway</div>
                    <div class="card-body" style="position:relative; text-align:center;">
                        <div id="memory-game-overlay">
                            <h2 id="game-over-title" style="font-size: 2rem; margin-bottom: 1rem;">You Won!</h2>
                            <button class="btn primary" id="restart-game-btn">Play Again</button>
                        </div>
                        <div id="memory-game-stats" style="display:flex; justify-content:space-around; margin-bottom:1rem;">
                            <span>Time: <b id="game-time">30</b>s</span>
                            <span>Moves: <b id="game-moves">0</b></span>
                        </div>
                        <div class="memory-game-board" id="memory-game-board"></div>
                        <button class="btn primary" id="start-game-btn">‚ñ∂Ô∏è Start Game</button>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">Logical Deduction</div>
                    <div class="card-body" id="deduction-puzzle">
                        <p>If all Bloops are Bleeps, and no Bleeps are Blips, which statement is definitely true?</p>
                        <button class="btn primary option" data-correct="true">No Bloop is a Blip.</button>
                        <button class="btn primary option" data-correct="false">Some Bleeps are Bloops.</button>
                        <button class="btn primary option" data-correct="false">All Blips are Bloops.</button>
                        <p id="puzzle-feedback" style="margin-top:1rem; font-weight:bold;"></p>
                    </div>
                </div>
             </div>
        </div>

        <div id="insights" class="tab-content">
            <div class="card-grid">
                <div class="card">
                    <div class="card-header">Log Mood & Correlate</div>
                    <div class="card-body">
                        <p>Select your current mood to plot it against your live Cognitive Score.</p>
                        <div class="mood-selector" id="mood-selector">
                            <button class="mood-btn" data-mood="Happy">üòä</button>
                            <button class="mood-btn" data-mood="Neutral">üòê</button>
                            <button class="mood-btn" data-mood="Stressed">üòü</button>
                            <button class="mood-btn" data-mood="Tired">üò¥</button>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">Mood / Performance Correlation</div>
                    <div class="card-body"><canvas id="moodPerformanceChart" height="200"></canvas></div>
                </div>
            </div>
        </div>
        
        <div id="coach" class="tab-content">
             <div class="card">
                <div class="card-header">Your Proactive AI Coach</div>
                <div class="card-body" style="text-align: center;">
                    <span id="coach-icon" style="font-size: 3rem; margin-bottom: 1rem; display:inline-block;">üí°</span>
                    <p id="coach-tip" style="font-size: 1.1rem; line-height: 1.6;">Welcome to NeuroMind Elite! Get started by logging your mood on the Insights tab.</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const app = {
                state: { gameRunning: false, gameTimer: null, timeLeft: 30, moves: 0, flippedCards: [], matchedPairs: 0, soundEnabled: false },
                scores: { cognitive: 50, focus: 50, memory: 50, resilience: 50 },
                charts: {},
                sfx: {},
                methods: {
                    playSound(sound) {
                        if (!app.state.soundEnabled || !app.sfx[sound]) return;
                        app.sfx[sound].currentTime = 0;
                        app.sfx[sound].play();
                    },

                    updateCognitiveScore(focusChange = 0, memoryChange = 0, resilienceChange = 0) {
                        const clamp = (val) => Math.max(0, Math.min(100, val));
                        app.scores.focus = clamp(app.scores.focus + focusChange);
                        app.scores.memory = clamp(app.scores.memory + memoryChange);
                        app.scores.resilience = clamp(app.scores.resilience + resilienceChange);
                        app.scores.cognitive = Math.round(app.scores.focus * 0.4 + app.scores.memory * 0.4 + app.scores.resilience * 0.2);
                        
                        app.charts.cognitiveGauge.data.datasets[0].value = app.scores.cognitive;
                        app.charts.cognitiveGauge.update();
                        document.getElementById('focus-score-bar').style.width = `${app.scores.focus}%`;
                        document.getElementById('memory-score-bar').style.width = `${app.scores.memory}%`;
                        document.getElementById('resilience-score-bar').style.width = `${app.scores.resilience}%`;
                        
                        app.methods.checkScoresForCoach();
                    },

                    checkScoresForCoach() {
                        if (app.scores.focus < 40) app.methods.updateCoach("Your focus seems low. Try the Logical Deduction puzzle to sharpen it!", "üß©");
                        else if (app.scores.memory < 40) app.methods.updateCoach("Your memory score could use a boost. Play a round of Synaptic Pathway!", "üß†");
                        else if (app.scores.resilience < 40) app.methods.updateCoach("Feeling a bit down? Logging your mood can help track patterns and build resilience.", "üòä");
                    },
                    
                    updateCoach(text, icon = 'üí°') {
                        document.getElementById('coach-tip').textContent = text;
                        document.getElementById('coach-icon').textContent = icon;
                        app.methods.playSound('notify');
                    },

                    logMoodAndPerformance(mood) {
                        app.methods.playSound('success');
                        const score = app.scores.cognitive;
                        const chart = app.charts.moodPerformance;
                        chart.data.labels.push(mood);
                        chart.data.datasets[0].data.push(score);
                        chart.update();

                        let resilienceChange = 0;
                        if(mood === 'Happy') resilienceChange = 5;
                        if(mood === 'Tired' || mood === 'Stressed') resilienceChange = -5;
                        app.methods.updateCognitiveScore(0, 0, resilienceChange);
                        
                        app.methods.updateCoach(`Mood logged as ${mood}. Tracking this helps build self-awareness.`);
                    },
                    
                    startGame() {
                        if(app.state.gameRunning) return;
                        app.methods.playSound('click');
                        app.state = {...app.state, gameRunning: true, timeLeft: 30, moves: 0, flippedCards: [], matchedPairs: 0};
                        
                        document.getElementById('game-time').textContent = app.state.timeLeft;
                        document.getElementById('game-moves').textContent = app.state.moves;
                        document.getElementById('memory-game-overlay').style.display = 'none';

                        const ICONS = ['‚öõÔ∏è', 'üß†', 'üß™', 'üß¨', 'üî¨', 'üõ∞Ô∏è', 'üöÄ', 'ü§ñ'];
                        const gameIcons = [...ICONS, ...ICONS].sort(() => 0.5 - Math.random());
                        const board = document.getElementById('memory-game-board');
                        board.innerHTML = '';
                        gameIcons.forEach(icon => {
                            const card = document.createElement('div');
                            card.className = 'memory-card';
                            card.dataset.icon = icon;
                            card.innerHTML = `<div class="memory-card-face memory-card-front"></div><div class="memory-card-face memory-card-back">${icon}</div>`;
                            card.addEventListener('click', app.methods.onCardClick);
                            board.appendChild(card);
                        });

                        app.state.gameTimer = setInterval(() => {
                            app.state.timeLeft--;
                            document.getElementById('game-time').textContent = app.state.timeLeft;
                            if(app.state.timeLeft <= 0) app.methods.endGame(false);
                        }, 1000);
                    },

                    onCardClick(e) {
                        const clickedCard = e.currentTarget;
                        if (app.state.flippedCards.length >= 2 || clickedCard.classList.contains('is-flipped')) return;
                        
                        app.methods.playSound('click');
                        clickedCard.classList.add('is-flipped');
                        app.state.flippedCards.push(clickedCard);
                        
                        if(app.state.flippedCards.length === 2) {
                            app.state.moves++;
                            document.getElementById('game-moves').textContent = app.state.moves;
                            setTimeout(app.methods.checkForMatch, 700);
                        }
                    },

                    checkForMatch() {
                        const [card1, card2] = app.state.flippedCards;
                        if(card1.dataset.icon === card2.dataset.icon) {
                            card1.classList.add('is-matched');
                            card2.classList.add('is-matched');
                            app.state.matchedPairs++;
                            if(app.state.matchedPairs === 8) app.methods.endGame(true);
                        } else {
                            card1.classList.remove('is-flipped');
                            card2.classList.remove('is-flipped');
                        }
                        app.state.flippedCards = [];
                    },

                    endGame(won) {
                        clearInterval(app.state.gameTimer);
                        app.state.gameRunning = false;
                        document.getElementById('memory-game-overlay').style.display = 'flex';
                        const title = document.getElementById('game-over-title');
                        
                        if(won) {
                            app.methods.playSound('win');
                            title.textContent = "Victory!";
                            app.methods.updateCognitiveScore(0, 15, 0);
                            app.methods.updateCoach("Excellent work! Your memory score has increased significantly.", "üèÜ");
                        } else {
                            app.methods.playSound('lose');
                            title.textContent = "Time's Up!";
                            app.methods.updateCognitiveScore(0, -5, 0);
                        }
                    }
                },
                
                init() {
                    if (typeof Chart === 'undefined' || typeof ChartDataLabels === 'undefined') {
                        document.body.innerHTML = `<div style="text-align:center; padding: 50px; font-size:1.2rem;">
                            <h1>Error</h1>
                            <p>Could not load essential chart libraries. Please ensure you have an active internet connection and try reloading the page.</p>
                        </div>`;
                        return;
                    }
                    
                    ['click', 'success', 'notify', 'win', 'lose'].forEach(sfxKey => {
                        app.sfx[sfxKey] = document.getElementById(`sfx-${sfxKey}`);
                    });
                    document.body.addEventListener('click', () => { app.state.soundEnabled = true }, { once: true });

                    Chart.register(ChartDataLabels);
                    const gaugeCtx = document.getElementById('cognitiveScoreChart').getContext('2d');
                    app.charts.cognitiveGauge = new Chart(gaugeCtx, {
                        type: 'doughnut',
                        data: { datasets: [{ value: app.scores.cognitive, backgroundColor: [var(--primary), var(--glass)], borderWidth: 0, borderRadius: 20 }] },
                        options: {
                            circumference: 180, rotation: -90, cutout: '80%',
                            plugins: { legend: { display: false }, tooltip: { enabled: false }, datalabels: { formatter: (value) => value, color: var(--text), font: { size: 40, weight: 'bold' } } }
                        }
                    });

                    const moodPerfCtx = document.getElementById('moodPerformanceChart').getContext('2d');
                    app.charts.moodPerformance = new Chart(moodPerfCtx, { type: 'line', data: { labels: [], datasets: [{ label: 'Cognitive Score', data: [], borderColor: var(--primary), tension: 0.1 }] }, options: { scales: { y: { beginAtZero: true, max: 100 } } } });

                    document.querySelectorAll('.tab-btn').forEach(tab => tab.addEventListener('click', e => {
                        app.methods.playSound('click');
                        document.querySelector('.tab-btn.active').classList.remove('active');
                        e.currentTarget.classList.add('active');
                        document.querySelector('.tab-content.active').classList.remove('active');
                        document.getElementById(e.currentTarget.dataset.tab).classList.add('active');
                    }));

                    document.querySelectorAll('#deduction-puzzle .option').forEach(btn => btn.addEventListener('click', e => {
                        app.methods.playSound('click');
                        const isCorrect = e.currentTarget.dataset.correct === 'true';
                        document.getElementById('puzzle-feedback').textContent = isCorrect ? 'Correct!' : 'Incorrect.';
                        document.getElementById('puzzle-feedback').style.color = isCorrect ? 'var(--success)' : 'var(--danger)';
                        if (isCorrect) {
                            app.methods.playSound('success');
                            app.methods.updateCognitiveScore(10, 0, 0);
                            e.currentTarget.parentNode.style.pointerEvents = 'none';
                        }
                    }));
                    
                    document.querySelectorAll('#mood-selector .mood-btn').forEach(btn => btn.addEventListener('click', e => {
                        document.querySelectorAll('.mood-btn').forEach(b => b.classList.remove('selected', 'pulse-guide'));
                        e.currentTarget.classList.add('selected');
                        app.methods.logMoodAndPerformance(e.currentTarget.dataset.mood);
                    }));

                    document.getElementById('start-game-btn').addEventListener('click', app.methods.startGame);
                    document.getElementById('restart-game-btn').addEventListener('click', app.methods.startGame);

                    app.methods.updateCognitiveScore();
                    document.querySelector('#mood-selector .mood-btn').classList.add('pulse-guide');
                }
            };
            
            app.init();
        });
    </script>
</body>
</html>
