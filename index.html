<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NeuroX - Cognitive Training Platform</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <style>
        :root {
            /* Pastel Tab Colors */
            --home-color: #A7C7E7;
            --dashboard-color: #B9E0D8;
            --challenges-color: #FBC4AB;
            --sleep-color: #EAD7D1;
            --focus-color: #FFF5BA;
            
            /* Base Colors */
            --white: #ffffff;
            --black: #2d2d2d;
            --gray-light: #f8f9fa;
            --gray-medium: #6c757d;
            --gray-dark: #495057;
            --shadow: rgba(0, 0, 0, 0.1);
            --shadow-light: rgba(0, 0, 0, 0.05);
            
            /* Gradients */
            --home-gradient: linear-gradient(135deg, #A7C7E7 0%, #9BB8E0 50%, #8FA9D9 100%);
            --dashboard-gradient: linear-gradient(135deg, #B9E0D8 0%, #A5D6CC 50%, #91CCC0 100%);
            --challenges-gradient: linear-gradient(135deg, #FBC4AB 0%, #F9B59F 50%, #F7A693 100%);
            --sleep-gradient: linear-gradient(135deg, #EAD7D1 0%, #E4CAC3 50%, #DEBDB5 100%);
            --focus-gradient: linear-gradient(135deg, #FFF5BA 0%, #FDEF9F 50%, #FBE984 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--gray-light);
            color: var(--black);
            overflow-x: hidden;
        }

        /* Animated Background */
        .animated-bg {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: -1;
            transition: all 0.8s ease;
        }

        .bg-home { background: var(--home-gradient); animation: gradientShift 8s ease-in-out infinite; }
        .bg-dashboard { background: var(--dashboard-gradient); animation: gradientShift 8s ease-in-out infinite; }
        .bg-challenges { background: var(--challenges-gradient); animation: gradientShift 8s ease-in-out infinite; }
        .bg-sleep { background: var(--sleep-gradient); animation: gradientShift 8s ease-in-out infinite; }
        .bg-focus { background: var(--focus-gradient); animation: gradientShift 8s ease-in-out infinite; }

        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        /* Top Navigation */
        .top-nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 140px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            z-index: 100;
            box-shadow: 0 2px 20px var(--shadow-light);
            animation: fadeInDown 0.8s ease-out;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 1rem;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--black);
            letter-spacing: -0.5px;
            margin-bottom: 1rem;
        }

        .top-nav-tabs {
            display: flex;
            justify-content: space-around;
            align-items: center;
            width: 100%;
            max-width: 600px;
        }

        /* Main Content */
        .main-content {
            margin-top: 100px;
            margin-left: 300px;
            margin-bottom: 0;
            min-height: calc(100vh - 100px);
            padding: 2rem;
            animation: fadeInUp 0.8s ease-out;
            transition: margin-left 0.4s ease;
        }

        .main-content.sidebar-collapsed {
            margin-left: 50px;
        }

        /* Page Containers */
        .page {
            display: none;
            max-width: 1200px;
            margin: 0 auto;
            animation: fadeInUp 0.6s ease-out;
        }

        .page.active {
            display: block;
        }

        /* Cards */
        .card {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 20px var(--shadow);
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 30px var(--shadow);
        }

        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        /* Buttons */
        .btn {
            padding: 1rem 2rem;
            border: none;
            border-radius: 12px;
            font-family: inherit;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            text-decoration: none;
            background: var(--white);
            color: var(--black);
            box-shadow: 0 2px 10px var(--shadow-light);
        }

        .btn:hover {
            transform: translateY(-2px) scale(1.02);
            box-shadow: 0 4px 20px var(--shadow);
        }

        .btn:active {
            transform: translateY(0) scale(0.98);
        }

        .btn-primary {
            background: var(--home-color);
            color: var(--black);
        }

        .btn-dashboard {
            background: var(--dashboard-color);
            color: var(--black);
        }

        .btn-challenges {
            background: var(--challenges-color);
            color: var(--black);
        }

        .btn-sleep {
            background: var(--sleep-color);
            color: var(--black);
        }

        .btn-focus {
            background: var(--focus-color);
            color: var(--black);
        }

        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 100px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            display: flex;
            justify-content: space-around;
            align-items: center;
            z-index: 100;
            box-shadow: 0 -2px 20px var(--shadow-light);
            padding: 0 1rem;
            border-top: 1px solid rgba(0, 0, 0, 0.1);
        }

        /* Advanced AI Features */
        .ai-insights-panel {
            background: linear-gradient(135deg, rgba(138, 43, 226, 0.1), rgba(75, 0, 130, 0.1));
            border: 2px solid rgba(138, 43, 226, 0.3);
            border-radius: 15px;
            padding: 2rem;
            margin: 1rem 0;
            position: relative;
            overflow: hidden;
        }

        .ai-insights-panel::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(138, 43, 226, 0.1), transparent);
            animation: aiScan 3s ease-in-out infinite;
        }

        @keyframes aiScan {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .ai-recommendation {
            background: rgba(138, 43, 226, 0.1);
            padding: 1rem;
            border-radius: 10px;
            margin: 0.5rem 0;
            border-left: 4px solid #8A2BE2;
            animation: fadeInUp 0.6s ease-out;
        }

        .biometric-indicator {
            display: inline-flex;
            align-items: center;
            background: rgba(255, 255, 255, 0.9);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            margin: 0.5rem;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .heart-rate-monitor {
            color: #e74c3c;
            animation: heartBeat 1.5s ease-in-out infinite;
        }

        .stress-indicator {
            width: 100px;
            height: 6px;
            background: linear-gradient(90deg, #2ecc71, #f1c40f, #e74c3c);
            border-radius: 3px;
            position: relative;
            margin: 0 0.5rem;
        }

        .stress-level {
            position: absolute;
            top: -2px;
            width: 10px;
            height: 10px;
            background: white;
            border: 2px solid #34495e;
            border-radius: 50%;
            transition: left 0.3s ease;
        }

        /* Advanced Cognitive Games */
        .cognitive-game-container {
            position: relative;
            background: linear-gradient(135deg, rgba(52, 152, 219, 0.1), rgba(155, 89, 182, 0.1));
            border-radius: 15px;
            padding: 2rem;
            margin: 1rem 0;
            min-height: 300px;
            overflow: hidden;
        }

        .pattern-matrix {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin: 1rem 0;
        }

        .pattern-cell {
            aspect-ratio: 1;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .pattern-cell:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 20px rgba(52, 152, 219, 0.4);
        }

        .pattern-cell.active {
            background: linear-gradient(45deg, #3498db, #9b59b6);
            color: white;
            animation: cellPulse 0.5s ease-out;
        }

        @keyframes cellPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        /* Advanced Analytics Dashboard */
        .analytics-dashboard {
            background: linear-gradient(135deg, rgba(46, 204, 113, 0.1), rgba(52, 152, 219, 0.1));
            border-radius: 15px;
            padding: 2rem;
            margin: 1rem 0;
        }

        .metric-card {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 0.5rem;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .metric-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
        }

        .metric-value {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(45deg, #3498db, #9b59b6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .trend-indicator {
            display: inline-flex;
            align-items: center;
            margin-top: 0.5rem;
            padding: 0.3rem 0.8rem;
            border-radius: 15px;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .trend-up {
            background: rgba(46, 204, 113, 0.2);
            color: #27ae60;
        }

        .trend-down {
            background: rgba(231, 76, 60, 0.2);
            color: #e74c3c;
        }

        /* Social Features */
        .social-panel {
            background: linear-gradient(135deg, rgba(255, 193, 7, 0.1), rgba(255, 152, 0, 0.1));
            border-radius: 15px;
            padding: 2rem;
            margin: 1rem 0;
        }

        .leaderboard-item {
            display: flex;
            align-items: center;
            background: rgba(255, 255, 255, 0.8);
            padding: 1rem;
            border-radius: 10px;
            margin: 0.5rem 0;
            transition: all 0.3s ease;
        }

        .leaderboard-item:hover {
            transform: translateX(10px);
            box-shadow: 0 4px 20px rgba(255, 193, 7, 0.3);
        }

        .rank-badge {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(45deg, #f1c40f, #f39c12);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: white;
            margin-right: 1rem;
        }

        .rank-badge.first {
            background: linear-gradient(45deg, #ffd700, #ffed4a);
        }

        .rank-badge.second {
            background: linear-gradient(45deg, #c0c0c0, #e8e8e8);
        }

        .rank-badge.third {
            background: linear-gradient(45deg, #cd7f32, #d4a574);
        }

        /* Advanced Animations */
        .floating-particles {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: radial-gradient(circle, rgba(138, 43, 226, 0.8), transparent);
            border-radius: 50%;
            animation: floatParticle 8s linear infinite;
        }

        @keyframes floatParticle {
            0% {
                transform: translateY(100vh) translateX(0);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-10vh) translateX(50px);
                opacity: 0;
            }
        }

        .holographic-effect {
            position: relative;
            background: linear-gradient(45deg,
                rgba(138, 43, 226, 0.1) 0%,
                rgba(75, 0, 130, 0.1) 25%,
                rgba(106, 90, 205, 0.1) 50%,
                rgba(138, 43, 226, 0.1) 75%,
                rgba(75, 0, 130, 0.1) 100%);
            background-size: 400% 400%;
            animation: holographicShift 4s ease-in-out infinite;
        }

        @keyframes holographicShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        /* Voice Recognition Interface */
        .voice-interface {
            background: linear-gradient(135deg, rgba(142, 68, 173, 0.1), rgba(74, 144, 226, 0.1));
            border-radius: 50px;
            padding: 1rem 2rem;
            display: inline-flex;
            align-items: center;
            margin: 1rem 0;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .voice-interface:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 30px rgba(142, 68, 173, 0.3);
        }

        .voice-wave {
            width: 30px;
            height: 30px;
            margin: 0 0.5rem;
        }

        .voice-wave div {
            width: 3px;
            height: 100%;
            background: linear-gradient(to top, #8e44ad, #4a90e2);
            margin: 0 1px;
            display: inline-block;
            animation: voiceWave 1.2s ease-in-out infinite;
        }

        .voice-wave div:nth-child(2) { animation-delay: 0.1s; }
        .voice-wave div:nth-child(3) { animation-delay: 0.2s; }
        .voice-wave div:nth-child(4) { animation-delay: 0.3s; }
        .voice-wave div:nth-child(5) { animation-delay: 0.4s; }

        @keyframes voiceWave {
            0%, 100% { height: 10px; }
            50% { height: 30px; }
        }

        /* Advanced Progress Visualization */
        .neural-network-viz {
            position: relative;
            width: 100%;
            height: 200px;
            background: radial-gradient(ellipse at center, rgba(138, 43, 226, 0.1), transparent);
            border-radius: 15px;
            overflow: hidden;
        }

        .neuron {
            position: absolute;
            width: 12px;
            height: 12px;
            background: radial-gradient(circle, rgba(138, 43, 226, 0.9), rgba(75, 0, 130, 0.7));
            border-radius: 50%;
            animation: neuronPulse 3s ease-in-out infinite;
        }

        .neural-connection {
            position: absolute;
            height: 2px;
            background: linear-gradient(90deg, rgba(138, 43, 226, 0.6), rgba(75, 0, 130, 0.4));
            animation: connectionFlow 2s ease-in-out infinite;
        }

        @keyframes connectionFlow {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.8; }
        }

        /* Gesture Recognition Area */
        .gesture-area {
            background: linear-gradient(135deg, rgba(26, 188, 156, 0.1), rgba(52, 152, 219, 0.1));
            border: 2px dashed rgba(26, 188, 156, 0.3);
            border-radius: 15px;
            padding: 3rem;
            text-align: center;
            margin: 1rem 0;
            transition: all 0.3s ease;
        }

        .gesture-area.active {
            border-color: #1abc9c;
            background: linear-gradient(135deg, rgba(26, 188, 156, 0.2), rgba(52, 152, 219, 0.2));
            box-shadow: 0 0 30px rgba(26, 188, 156, 0.4);
        }

        /* Real-time Performance Meter */
        .performance-meter {
            position: relative;
            width: 200px;
            height: 100px;
            margin: 1rem auto;
        }

        .meter-arc {
            stroke: rgba(0, 0, 0, 0.1);
            stroke-width: 8;
            fill: none;
        }

        .meter-progress {
            stroke: url(#performanceGradient);
            stroke-width: 8;
            stroke-linecap: round;
            fill: none;
            transition: stroke-dashoffset 1s ease;
        }

        /* Predictive Analytics Visualization */
        .prediction-chart {
            background: linear-gradient(135deg, rgba(52, 152, 219, 0.1), rgba(155, 89, 182, 0.1));
            border-radius: 15px;
            padding: 2rem;
            margin: 1rem 0;
            position: relative;
        }

        .prediction-line {
            stroke: #3498db;
            stroke-width: 3;
            fill: none;
            stroke-dasharray: 5,5;
            animation: dashMove 2s linear infinite;
        }

        @keyframes dashMove {
            0% { stroke-dashoffset: 0; }
            100% { stroke-dashoffset: 20; }
        }

        /* Enhanced Modal Styles */
        .advanced-modal {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: modalSlideIn 0.5s ease-out;
        }

        @keyframes modalSlideIn {
            0% {
                transform: scale(0.8) translateY(50px);
                opacity: 0;
            }
            100% {
                transform: scale(1) translateY(0);
                opacity: 1;
            }
        }

        .nav-tab {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 0.8rem 1.2rem;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 70px;
            background: transparent;
            color: var(--gray-medium);
        }

        .nav-tab:hover {
            transform: translateY(-3px);
            background: rgba(255, 255, 255, 0.8);
        }

        .nav-tab.active {
            animation: slideUp 0.4s ease-out;
            color: var(--white);
            transform: translateY(-5px);
        }

        .nav-tab.active.tab-home { background: var(--home-color); }
        .nav-tab.active.tab-dashboard { background: var(--dashboard-color); }
        .nav-tab.active.tab-challenges { background: var(--challenges-color); }
        .nav-tab.active.tab-sleep { background: var(--sleep-color); }
        .nav-tab.active.tab-focus { background: var(--focus-color); }

        .nav-tab i {
            font-size: 1.5rem;
            margin-bottom: 0.3rem;
            transition: all 0.3s ease;
        }

        .nav-tab span {
            font-size: 0.8rem;
            font-weight: 500;
        }

        .nav-tab:active i {
            animation: bounce 0.3s ease;
        }

        /* Video Background for Home */
        .video-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 0.4;
            z-index: -1;
        }

        .video-container {
            position: relative;
            overflow: hidden;
            border-radius: 12px;
            margin-bottom: 2rem;
        }

        /* EEG Waveform Animation */
        .eeg-container {
            height: 200px;
            background: rgba(0, 0, 0, 0.05);
            border-radius: 12px;
            position: relative;
            overflow: hidden;
            margin: 1rem 0;
        }

        .eeg-wave {
            position: absolute;
            top: 50%;
            left: 0;
            width: 100%;
            height: 4px;
            background: var(--dashboard-color);
            animation: waveMove 2s linear infinite;
            transform-origin: left center;
        }

        .eeg-wave.growing {
            animation: waveGrow 3s ease-in-out, waveMove 2s linear infinite;
        }

        @keyframes waveMove {
            0% { transform: translateX(-100%) scaleY(1); }
            25% { transform: translateX(-50%) scaleY(2); }
            50% { transform: translateX(0%) scaleY(1.5); }
            75% { transform: translateX(50%) scaleY(3); }
            100% { transform: translateX(100%) scaleY(1); }
        }

        @keyframes waveGrow {
            0% { transform: scaleY(1); }
            50% { transform: scaleY(4); }
            100% { transform: scaleY(2); }
        }

        /* Sleep Animation */
        .sleep-scene {
            position: relative;
            height: 200px;
            background: linear-gradient(to bottom, #2c3e50 0%, #34495e 100%);
            border-radius: 12px;
            overflow: hidden;
            margin: 1rem 0;
        }

        .moon {
            position: absolute;
            top: 20px;
            right: 30px;
            width: 60px;
            height: 60px;
            background: #f4f4f4;
            border-radius: 50%;
            animation: moonGlow 4s ease-in-out infinite;
        }

        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle 2s ease-in-out infinite;
        }

        .star:nth-child(2) { top: 30px; left: 50px; width: 3px; height: 3px; animation-delay: 0.5s; }
        .star:nth-child(3) { top: 60px; left: 150px; width: 2px; height: 2px; animation-delay: 1s; }
        .star:nth-child(4) { top: 40px; left: 250px; width: 4px; height: 4px; animation-delay: 1.5s; }
        .star:nth-child(5) { top: 80px; left: 100px; width: 2px; height: 2px; animation-delay: 2s; }

        @keyframes moonGlow {
            0%, 100% { box-shadow: 0 0 10px rgba(244, 244, 244, 0.5); }
            50% { box-shadow: 0 0 20px rgba(244, 244, 244, 0.8); }
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }

        /* Focus Timer */
        .timer-circle {
            position: relative;
            width: 200px;
            height: 200px;
            margin: 2rem auto;
        }

        .timer-circle svg {
            width: 100%;
            height: 100%;
            transform: rotate(-90deg);
        }

        .timer-circle circle {
            fill: none;
            stroke-width: 8;
        }

        .timer-bg {
            stroke: rgba(0, 0, 0, 0.1);
        }

        .timer-progress {
            stroke: var(--focus-color);
            stroke-linecap: round;
            transition: stroke-dashoffset 1s linear;
        }

        .timer-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 2rem;
            font-weight: 700;
            color: var(--black);
        }

        /* Progress Bars */
        .progress-bar {
            width: 100%;
            height: 12px;
            background: rgba(0, 0, 0, 0.1);
            border-radius: 6px;
            overflow: hidden;
            margin: 1rem 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--challenges-color), var(--focus-color));
            border-radius: 6px;
            transition: width 0.3s ease;
        }

        .progress-fill.animated {
            animation: progressFill 5s ease-in-out;
        }

        @keyframes progressFill {
            0% { width: 0%; }
            100% { width: var(--target-width, 100%); }
        }

        /* Modal */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            animation: fadeIn 0.3s ease;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            animation: slideInFromBottom 0.4s ease;
            position: relative;
        }

        .modal-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--gray-medium);
            transition: color 0.3s ease;
        }

        .modal-close:hover {
            color: var(--black);
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            top: 100px;
            right: 2rem;
            background: var(--challenges-color);
            color: var(--black);
            padding: 1rem 2rem;
            border-radius: 12px;
            box-shadow: 0 4px 20px var(--shadow);
            transform: translateX(100%);
            transition: transform 0.3s ease;
            z-index: 1001;
        }

        .toast.show {
            transform: translateX(0);
        }

        /* Charts Placeholder */
        .chart-placeholder {
            width: 100%;
            height: 200px;
            background: linear-gradient(135deg, rgba(0,0,0,0.05) 0%, rgba(0,0,0,0.1) 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--gray-medium);
            font-weight: 500;
            margin: 1rem 0;
            position: relative;
            overflow: hidden;
        }

        .chart-placeholder::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        /* Confetti Animation */
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: var(--challenges-color);
            animation: confettiFall 3s linear infinite;
            z-index: 999;
        }

        .confetti:nth-child(odd) { background: var(--focus-color); }
        .confetti:nth-child(3n) { background: var(--dashboard-color); }

        @keyframes confettiFall {
            0% {
                transform: translateY(-100vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }

        /* Game Animations */
        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
                opacity: 1;
            }
            50% {
                transform: scale(1.1);
                opacity: 0.8;
            }
        }

        @keyframes targetPulse {
            0% {
                transform: scale(1);
                box-shadow: 0 0 20px rgba(255,107,107,0.6);
            }
            100% {
                transform: scale(1.2);
                box-shadow: 0 0 30px rgba(255,107,107,0.9);
            }
        }

        @keyframes gameIntro {
            0% {
                transform: scale(0.8) rotateY(180deg);
                opacity: 0;
            }
            100% {
                transform: scale(1) rotateY(0deg);
                opacity: 1;
            }
        }

        @keyframes correctAnswer {
            0% { background: rgba(0,255,0,0.8); transform: scale(1); }
            50% { background: rgba(0,255,0,1); transform: scale(1.2); }
            100% { background: rgba(0,255,0,0.8); transform: scale(1); }
        }

        @keyframes wrongAnswer {
            0% { background: rgba(255,0,0,0.8); transform: translateX(0); }
            25% { background: rgba(255,0,0,1); transform: translateX(-10px); }
            75% { background: rgba(255,0,0,1); transform: translateX(10px); }
            100% { background: rgba(255,0,0,0.8); transform: translateX(0); }
        }

        @keyframes scoreUpdate {
            0% { transform: scale(1); }
            50% { transform: scale(1.5); color: #ffd700; }
            100% { transform: scale(1); }
        }

        /* Meditation Animations */
        @keyframes gentleWaves {
            0%, 100% {
                background-position: 0% 50%;
                filter: hue-rotate(0deg);
            }
            50% {
                background-position: 100% 50%;
                filter: hue-rotate(10deg);
            }
        }

        @keyframes oceanWaves {
            0%, 100% {
                background-position: 0% 50%;
                filter: brightness(1);
            }
            50% {
                background-position: 100% 50%;
                filter: brightness(1.1);
            }
        }

        @keyframes mountainMist {
            0%, 100% {
                background-position: 0% 50%;
                filter: contrast(1);
            }
            50% {
                background-position: 100% 50%;
                filter: contrast(1.1);
            }
        }

        @keyframes wave1 {
            0%, 100% {
                transform: translateX(-20%) scaleY(1);
            }
            50% {
                transform: translateX(20%) scaleY(1.1);
            }
        }

        @keyframes wave2 {
            0%, 100% {
                transform: translateX(20%) scaleY(1);
            }
            50% {
                transform: translateX(-20%) scaleY(0.9);
            }
        }

        @keyframes sway {
            0%, 100% {
                transform: rotate(-2deg);
            }
            50% {
                transform: rotate(2deg);
            }
        }

        @keyframes fly {
            0% {
                left: -10%;
                top: 30%;
            }
            50% {
                left: 50%;
                top: 20%;
            }
            100% {
                left: 110%;
                top: 35%;
            }
        }

        @keyframes breathingPulse {
            0%, 100% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 0.7;
            }
            50% {
                transform: translate(-50%, -50%) scale(1.3);
                opacity: 1;
            }
        }

        @keyframes bodyScanMove {
            0% {
                top: 20%;
                opacity: 0.8;
            }
            50% {
                top: 50%;
                opacity: 1;
            }
            100% {
                top: 80%;
                opacity: 0.3;
            }
        }

        @keyframes rippleEffect {
            0% {
                width: 40px;
                height: 40px;
                opacity: 1;
            }
            100% {
                width: 120px;
                height: 120px;
                opacity: 0;
            }
        }

        @keyframes glowPulse {
            0%, 100% {
                opacity: 0.5;
                transform: translateX(-50%) scale(1);
            }
            50% {
                opacity: 1;
                transform: translateX(-50%) scale(1.2);
            }
        }

        @keyframes heartBeat {
            0%, 100% {
                transform: translateX(-50%) scale(1);
            }
            50% {
                transform: translateX(-50%) scale(1.2);
            }
        }

        @keyframes walkingMotion {
            0%, 100% {
                left: 20%;
                opacity: 0.8;
            }
            50% {
                left: 70%;
                opacity: 1;
            }
        }

        /* Enhanced Card Hover Effects */
        .meditation-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 15px 40px rgba(0,0,0,0.2);
            filter: brightness(1.1);
        }

        .enhanced-focus-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
        }

        /* Meditation Background Transitions */
        .meditation-video-container .nature-bg,
        .meditation-video-container .ocean-bg,
        .meditation-video-container .mountain-bg {
            transition: opacity 1s ease-in-out;
        }

        .bg-btn.active {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3) !important;
        }

        /* Neural Network Animations */
        @keyframes neuronPulse {
            0%, 100% {
                transform: scale(1);
                opacity: 0.7;
            }
            50% {
                transform: scale(1.5);
                opacity: 1;
            }
        }

        @keyframes connectionPulse {
            0%, 100% {
                opacity: 0.2;
                transform: scaleX(0.8);
            }
            50% {
                opacity: 0.6;
                transform: scaleX(1.2);
            }
        }

        /* Enhanced Chart Animations */
        @keyframes chartLoad {
            0% {
                transform: scaleY(0);
                opacity: 0;
            }
            100% {
                transform: scaleY(1);
                opacity: 1;
            }
        }

        @keyframes dataFlow {
            0% {
                background-position: -200% 0;
            }
            100% {
                background-position: 200% 0;
            }
        }

        @keyframes brainGlow {
            0%, 100% {
                box-shadow: 0 10px 30px rgba(185,224,216,0.4);
                filter: brightness(1);
            }
            50% {
                box-shadow: 0 15px 40px rgba(185,224,216,0.6);
                filter: brightness(1.1);
            }
        }

        @keyframes regionPulse {
            0%, 100% {
                transform: scale(1);
                box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            }
            50% {
                transform: scale(1.05);
                box-shadow: 0 6px 20px rgba(0,0,0,0.3);
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideUp {
            from { transform: translateY(10px); }
            to { transform: translateY(-5px); }
        }

        @keyframes slideInFromBottom {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .main-content {
                padding: 1rem;
            }

            .card-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }

            .nav-tab {
                padding: 0.6rem 0.8rem;
                min-width: 60px;
            }

            .nav-tab i {
                font-size: 1.2rem;
            }

            .nav-tab span {
                font-size: 0.7rem;
            }

            .timer-circle {
                width: 150px;
                height: 150px;
            }

            .timer-text {
                font-size: 1.5rem;
            }
        }

        @media (max-width: 480px) {
            .logo {
                font-size: 1.5rem;
            }

            .card {
                padding: 1.5rem;
            }

            .nav-tab span {
                display: none;
            }

            .bottom-nav {
                height: 80px;
            }

            .main-content {
                margin-bottom: 80px;
            }
        }

        /* Specific Page Styles */
        .hero-section {
            text-align: center;
            padding: 3rem 0;
        }

        .hero-title {
            font-size: 3rem;
            font-weight: 800;
            margin-bottom: 1rem;
            color: var(--black);
        }

        .hero-subtitle {
            font-size: 1.2rem;
            color: var(--gray-medium);
            margin-bottom: 2rem;
        }

        .quick-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 2rem;
        }

        .stat-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.8);
            padding: 1.5rem;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 2px 10px var(--shadow-light);
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: var(--black);
        }

        .stat-label {
            color: var(--gray-medium);
            font-size: 0.9rem;
            margin-top: 0.5rem;
        }

        .challenge-card {
            background: rgba(255, 255, 255, 0.9);
            padding: 1.5rem;
            border-radius: 12px;
            margin-bottom: 1rem;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .challenge-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 25px var(--shadow);
        }

        .challenge-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .challenge-description {
            color: var(--gray-medium);
            margin-bottom: 1rem;
        }

        .quote-container {
            background: rgba(255, 255, 255, 0.9);
            padding: 2rem;
            border-radius: 12px;
            text-align: center;
            margin: 2rem 0;
            min-height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .quote-text {
            font-size: 1.1rem;
            font-style: italic;
            color: var(--gray-dark);
            animation: fadeIn 1s ease;
        }

        /* Sleep Score Display */
        .sleep-score {
            text-align: center;
            padding: 2rem;
        }

        .score-circle {
            position: relative;
            width: 150px;
            height: 150px;
            margin: 0 auto 1rem;
        }

        .score-circle svg {
            width: 100%;
            height: 100%;
            transform: rotate(-90deg);
        }

        .score-circle circle {
            fill: none;
            stroke-width: 10;
        }

        .score-bg {
            stroke: rgba(0, 0, 0, 0.1);
        }

        .score-progress {
            stroke: var(--sleep-color);
            stroke-linecap: round;
            transition: stroke-dashoffset 2s ease;
        }

        .score-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 2rem;
            font-weight: 700;
            color: var(--black);
        }

        /* Letter by letter animation */
        .typewriter {
            overflow: hidden;
            border-right: 2px solid var(--black);
            white-space: nowrap;
            animation: typewriter 3s steps(40, end), blink-caret 0.75s step-end infinite;
        }

        @keyframes typewriter {
            from { width: 0; }
            to { width: 100%; }
        }

        @keyframes blink-caret {
            from, to { border-color: transparent; }
            50% { border-color: var(--black); }
        }

        @keyframes researchPulse {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 1; }
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes meditationGlow {
            0%, 100% { opacity: 0.5; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.2); }
        }

        @keyframes aiCorePulse {
            0%, 100% { transform: scale(1); opacity: 0.8; }
            50% { transform: scale(1.1); opacity: 1; }
        }

        @keyframes aiRingRotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Revolutionary Sidebar */
        .revolutionary-sidebar {
            position: fixed;
            left: 0;
            top: 0;
            width: 300px;
            height: 100vh;
            background: linear-gradient(145deg, rgba(10, 10, 25, 0.95), rgba(20, 20, 50, 0.95));
            backdrop-filter: blur(20px);
            border-right: 2px solid rgba(138, 43, 226, 0.3);
            z-index: 1000;
            transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            overflow-y: auto;
            box-shadow: 5px 0 30px rgba(138, 43, 226, 0.2);
        }

        .revolutionary-sidebar.collapsed {
            transform: translateX(-250px);
        }

        .sidebar-header {
            padding: 2rem 1.5rem;
            border-bottom: 1px solid rgba(138, 43, 226, 0.2);
            position: relative;
        }

        .logo-advanced {
            font-size: 1.8rem;
            font-weight: 800;
            background: linear-gradient(45deg, #8A2BE2, #4B0082, #6A5ACD);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-align: center;
        }

        .neural-pulse-indicator {
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, transparent, #8A2BE2, transparent);
            margin-top: 1rem;
            animation: neuralPulse 2s ease-in-out infinite;
        }

        .sidebar-content {
            padding: 1rem;
        }

        .nav-section {
            margin-bottom: 2rem;
        }

        .section-title {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.6);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 1rem;
            padding-left: 0.5rem;
        }

        .nav-item {
            display: flex;
            align-items: center;
            padding: 1rem;
            margin: 0.5rem 0;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            color: rgba(255, 255, 255, 0.8);
            background: rgba(255, 255, 255, 0.05);
        }

        .nav-item:hover {
            background: linear-gradient(45deg, rgba(138, 43, 226, 0.2), rgba(75, 0, 130, 0.2));
            transform: translateX(5px);
            color: white;
        }

        .nav-item.active {
            background: linear-gradient(45deg, rgba(138, 43, 226, 0.3), rgba(75, 0, 130, 0.3));
            border: 1px solid rgba(138, 43, 226, 0.5);
            color: white;
        }

        .nav-item i {
            margin-right: 1rem;
            font-size: 1.2rem;
            width: 20px;
        }

        .activity-dot {
            width: 8px;
            height: 8px;
            background: #00ff00;
            border-radius: 50%;
            margin-left: auto;
            animation: pulse 2s ease-in-out infinite;
        }

        .status-indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-left: auto;
        }

        .status-indicator.online {
            background: #00ff00;
            box-shadow: 0 0 10px #00ff00;
        }

        .challenge-count {
            background: linear-gradient(45deg, #ff6b6b, #ff8787);
            color: white;
            padding: 0.2rem 0.6rem;
            border-radius: 10px;
            font-size: 0.8rem;
            margin-left: auto;
        }

        .research-status {
            width: 12px;
            height: 12px;
            background: #4ecdc4;
            border-radius: 50%;
            margin-left: auto;
            animation: researchPulse 3s ease-in-out infinite;
        }

        .progress-ring {
            width: 16px;
            height: 16px;
            border: 2px solid rgba(138, 43, 226, 0.3);
            border-top: 2px solid #8A2BE2;
            border-radius: 50%;
            margin-left: auto;
            animation: spin 2s linear infinite;
        }

        .champion-badge {
            width: 14px;
            height: 14px;
            background: linear-gradient(45deg, #ffd700, #ffed4a);
            border-radius: 50%;
            margin-left: auto;
            position: relative;
        }

        .champion-badge::before {
            content: 'ðŸ‘‘';
            position: absolute;
            top: -2px;
            left: -1px;
            font-size: 10px;
        }

        .meditation-glow {
            width: 12px;
            height: 12px;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.8), transparent);
            border-radius: 50%;
            margin-left: auto;
            animation: meditationGlow 4s ease-in-out infinite;
        }

        .ai-assistant-section {
            background: linear-gradient(135deg, rgba(138, 43, 226, 0.1), rgba(75, 0, 130, 0.1));
            border-radius: 15px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            border: 1px solid rgba(138, 43, 226, 0.3);
        }

        .ai-avatar {
            width: 60px;
            height: 60px;
            margin: 1rem auto;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .ai-core {
            width: 30px;
            height: 30px;
            background: radial-gradient(circle, #8A2BE2, #4B0082);
            border-radius: 50%;
            animation: aiCorePulse 2s ease-in-out infinite;
        }

        .ai-rings {
            position: absolute;
            width: 100%;
            height: 100%;
            border: 2px solid rgba(138, 43, 226, 0.3);
            border-radius: 50%;
            animation: aiRingRotate 8s linear infinite;
        }

        .ai-rings::before {
            content: '';
            position: absolute;
            top: -5px;
            left: -5px;
            right: -5px;
            bottom: -5px;
            border: 1px solid rgba(138, 43, 226, 0.2);
            border-radius: 50%;
            animation: aiRingRotate 6s linear infinite reverse;
        }

        .ai-status {
            text-align: center;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 0.5rem;
        }

        .ai-recommendation {
            background: rgba(255, 255, 255, 0.1);
            padding: 1rem;
            border-radius: 8px;
            font-style: italic;
            color: rgba(255, 255, 255, 0.9);
            text-align: center;
            font-size: 0.9rem;
        }

        .biometric-section {
            background: linear-gradient(135deg, rgba(46, 204, 113, 0.1), rgba(52, 152, 219, 0.1));
            border-radius: 15px;
            padding: 1.5rem;
            border: 1px solid rgba(46, 204, 113, 0.3);
        }

        .biometric-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .metric-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 0.5rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
        }

        .metric-item i {
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
            color: #2ecc71;
        }

        .metric-item span {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.9);
        }

        .sidebar-toggle {
            position: absolute;
            right: -40px;
            top: 50%;
            transform: translateY(-50%);
            width: 40px;
            height: 40px;
            background: linear-gradient(45deg, #8A2BE2, #4B0082);
            border-radius: 0 10px 10px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: white;
            transition: all 0.3s ease;
        }

        .sidebar-toggle:hover {
            background: linear-gradient(45deg, #9A3BF2, #5B1092);
            box-shadow: 0 5px 20px rgba(138, 43, 226, 0.4);
        }

        .elite-header {
            position: fixed;
            top: 0;
            left: 300px;
            right: 0;
            height: 100px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(245, 245, 255, 0.95));
            backdrop-filter: blur(20px);
            z-index: 500;
            transition: left 0.4s ease;
            border-bottom: 1px solid rgba(138, 43, 226, 0.2);
        }

        .elite-header.sidebar-collapsed {
            left: 50px;
        }

        .neural-network-bg {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            overflow: hidden;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 2rem;
            height: 100%;
            position: relative;
            z-index: 2;
        }

        .session-info {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }

        .session-type {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--black);
        }

        .session-time {
            font-size: 1rem;
            color: var(--gray-medium);
            font-family: monospace;
        }

        .performance-text {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.9rem;
            color: var(--gray-dark);
            font-weight: 600;
        }
    </style>
</head>
<body>
    <!-- Animated Background -->
    <div class="animated-bg bg-home" id="animatedBg"></div>

    <!-- Revolutionary Sidebar Navigation -->
    <div class="revolutionary-sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="logo-advanced">NeuroX Elite</div>
            <div class="neural-pulse-indicator"></div>
        </div>

        <div class="sidebar-content">
            <!-- Main Navigation -->
            <div class="nav-section">
                <div class="section-title">Core Modules</div>
                <div class="nav-item active" onclick="navigateToPage('home')" data-page="home">
                    <i class="fas fa-home"></i>
                    <span>Neural Hub</span>
                    <div class="activity-dot"></div>
                </div>
                <div class="nav-item" onclick="navigateToPage('dashboard')" data-page="dashboard">
                    <i class="fas fa-brain"></i>
                    <span>Brain Monitor</span>
                    <div class="status-indicator online"></div>
                </div>
                <div class="nav-item" onclick="navigateToPage('challenges')" data-page="challenges">
                    <i class="fas fa-trophy"></i>
                    <span>Elite Challenges</span>
                    <div class="challenge-count">3</div>
                </div>
                <div class="nav-item" onclick="navigateToPage('research')" data-page="research">
                    <i class="fas fa-flask"></i>
                    <span>Research Lab</span>
                    <div class="research-status active"></div>
                </div>
                <div class="nav-item" onclick="navigateToPage('memory')" data-page="memory">
                    <i class="fas fa-puzzle-piece"></i>
                    <span>Memory Palace</span>
                    <div class="progress-ring"></div>
                </div>
                <div class="nav-item" onclick="navigateToPage('winners')" data-page="winners">
                    <i class="fas fa-crown"></i>
                    <span>Champions</span>
                    <div class="champion-badge"></div>
                </div>
                <div class="nav-item" onclick="navigateToPage('focus')" data-page="focus">
                    <i class="fas fa-bullseye"></i>
                    <span>Zen Studio</span>
                    <div class="meditation-glow"></div>
                </div>
            </div>

            <!-- AI Assistant Section -->
            <div class="ai-assistant-section">
                <div class="section-title">ARIA Assistant</div>
                <div class="ai-avatar" id="ariaAvatar">
                    <div class="ai-core"></div>
                    <div class="ai-rings"></div>
                </div>
                <div class="ai-status">Neural patterns: Optimal</div>
                <div class="ai-recommendation" id="aiRecommendation">
                    "Ready for advanced training session"
                </div>
            </div>

            <!-- Biometric Monitor -->
            <div class="biometric-section">
                <div class="section-title">Live Metrics</div>
                <div class="biometric-grid">
                    <div class="metric-item">
                        <i class="fas fa-heartbeat heart-rate-monitor"></i>
                        <span id="heartRate">72 BPM</span>
                    </div>
                    <div class="metric-item">
                        <i class="fas fa-brain"></i>
                        <span id="focusLevel">87%</span>
                    </div>
                    <div class="stress-indicator">
                        <div class="stress-level" style="left: 25%;"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="sidebar-toggle" onclick="toggleSidebar()">
            <i class="fas fa-chevron-left"></i>
        </div>
    </div>

    <!-- Top Header with Neural Network Background -->
    <div class="elite-header">
        <div class="neural-network-bg">
            <div class="floating-particles"></div>
        </div>
        <div class="header-content">
            <div class="session-info">
                <span class="session-type">Elite Training Session</span>
                <span class="session-time" id="sessionTimer">00:00</span>
            </div>
            <div class="performance-meter">
                <svg width="200" height="100">
                    <defs>
                        <linearGradient id="performanceGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                            <stop offset="0%" style="stop-color:#ff6b6b;stop-opacity:1" />
                            <stop offset="50%" style="stop-color:#4ecdc4;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#45b7d1;stop-opacity:1" />
                        </linearGradient>
                    </defs>
                    <path class="meter-arc" d="M 20 80 A 80 80 0 0 1 180 80" />
                    <path class="meter-progress" d="M 20 80 A 80 80 0 0 1 180 80" stroke-dasharray="251" stroke-dashoffset="50" />
                </svg>
                <div class="performance-text">Neural Efficiency: 87%</div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content" id="mainContent">
        <!-- Home Page -->
        <div class="page active" id="home">
            <div class="video-container">
                <div class="video-bg" style="
                    background:
                        radial-gradient(circle at 20% 80%, rgba(167,199,231,0.4) 0%, transparent 50%),
                        radial-gradient(circle at 80% 20%, rgba(155,184,224,0.4) 0%, transparent 50%),
                        radial-gradient(circle at 40% 40%, rgba(142,169,217,0.3) 0%, transparent 50%),
                        linear-gradient(135deg, rgba(167,199,231,0.2) 0%, rgba(155,184,224,0.3) 100%);
                    position: relative; animation: gentleWaves 12s ease-in-out infinite;
                ">
                    <!-- Enhanced neural network simulation -->
                    <div style="position: absolute; top: 20%; left: 10%; width: 6px; height: 6px; background: rgba(255,255,255,0.9); border-radius: 50%; animation: neuronPulse 2s infinite; box-shadow: 0 0 10px rgba(255,255,255,0.5);"></div>
                    <div style="position: absolute; top: 60%; left: 30%; width: 4px; height: 4px; background: rgba(255,255,255,0.8); border-radius: 50%; animation: neuronPulse 2.5s infinite; animation-delay: 0.5s; box-shadow: 0 0 8px rgba(255,255,255,0.4);"></div>
                    <div style="position: absolute; top: 40%; left: 70%; width: 8px; height: 8px; background: rgba(255,255,255,0.9); border-radius: 50%; animation: neuronPulse 1.8s infinite; animation-delay: 1s; box-shadow: 0 0 12px rgba(255,255,255,0.6);"></div>
                    <div style="position: absolute; top: 80%; left: 50%; width: 5px; height: 5px; background: rgba(255,255,255,0.85); border-radius: 50%; animation: neuronPulse 2.2s infinite; animation-delay: 1.5s; box-shadow: 0 0 9px rgba(255,255,255,0.5);"></div>
                    <div style="position: absolute; top: 30%; left: 50%; width: 7px; height: 7px; background: rgba(255,255,255,0.7); border-radius: 50%; animation: neuronPulse 3s infinite; animation-delay: 2s; box-shadow: 0 0 11px rgba(255,255,255,0.4);"></div>

                    <!-- Neural connections -->
                    <div style="position: absolute; top: 20%; left: 10%; width: 20%; height: 2px; background: linear-gradient(90deg, rgba(255,255,255,0.3), transparent); animation: connectionPulse 3s ease-in-out infinite;"></div>
                    <div style="position: absolute; top: 40%; left: 30%; width: 40%; height: 1px; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent); animation: connectionPulse 4s ease-in-out infinite; animation-delay: 1s;"></div>

                    <!-- Floating brain waves -->
                    <div style="position: absolute; top: 10%; right: 15%; font-size: 2rem; color: rgba(255,255,255,0.6); animation: float 6s ease-in-out infinite;">ðŸ§ </div>
                    <div style="position: absolute; bottom: 20%; left: 20%; font-size: 1.5rem; color: rgba(255,255,255,0.5); animation: float 8s ease-in-out infinite reverse;">âš¡</div>
                </div>
            </div>

            <div class="hero-section">
                <h1 class="hero-title">Welcome to NeuroX</h1>
                <p class="hero-subtitle">Advanced cognitive training for peak mental performance</p>
                
                <div class="quick-actions">
                    <button class="btn btn-dashboard" onclick="navigateToPage('dashboard')">
                        <i class="fas fa-brain"></i>
                        Start Brain Dashboard
                    </button>
                    <button class="btn btn-sleep" onclick="navigateToPage('sleep')">
                        <i class="fas fa-moon"></i>
                        Improve Sleep
                    </button>
                    <button class="btn btn-challenges" onclick="navigateToPage('challenges')">
                        <i class="fas fa-trophy"></i>
                        Daily Challenge
                    </button>
                </div>
            </div>

            <div class="stat-grid">
                <div class="stat-card">
                    <div class="stat-number">87</div>
                    <div class="stat-label">Cognitive Score</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">15</div>
                    <div class="stat-label">Days Streak</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">42</div>
                    <div class="stat-label">Sessions</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">Pro</div>
                    <div class="stat-label">Level</div>
                </div>
            </div>
        </div>

        <!-- Dashboard Page -->
        <div class="page" id="dashboard">
            <div class="card">
                <h2>ðŸ§  Advanced Brain Activity Monitor</h2>
                <div class="eeg-container" id="eegContainer" style="
                    background:
                        radial-gradient(circle at 30% 30%, rgba(185,224,216,0.3), transparent 50%),
                        radial-gradient(circle at 70% 70%, rgba(185,224,216,0.2), transparent 50%),
                        linear-gradient(135deg, rgba(0,0,0,0.05), rgba(185,224,216,0.1));
                    border: 2px solid rgba(185,224,216,0.3);
                ">
                    <div class="eeg-wave" style="background: linear-gradient(90deg, var(--dashboard-color), #4ECDC4, var(--dashboard-color));"></div>
                    <!-- Multiple EEG waves -->
                    <div style="position: absolute; top: 60%; left: 0; width: 100%; height: 3px; background: linear-gradient(90deg, transparent, rgba(185,224,216,0.6), transparent); animation: waveMove 3s linear infinite; animation-delay: 0.5s;"></div>
                    <div style="position: absolute; top: 70%; left: 0; width: 100%; height: 2px; background: linear-gradient(90deg, transparent, rgba(185,224,216,0.4), transparent); animation: waveMove 4s linear infinite; animation-delay: 1s;"></div>
                </div>
                <div style="display: flex; gap: 1rem; justify-content: center; margin-top: 1rem;">
                    <button class="btn btn-dashboard" onclick="startBrainScan()">
                        <i class="fas fa-play"></i>
                        Start Brain Scan
                    </button>
                    <div style="display: flex; align-items: center; background: rgba(185,224,216,0.2); padding: 0.5rem 1rem; border-radius: 8px;">
                        <span style="color: #00C851; margin-right: 0.5rem;">â—</span>
                        <span style="font-size: 0.9rem;">Neural Activity: Optimal</span>
                    </div>
                </div>
            </div>

            <div class="card-grid">
                <div class="card" style="background: linear-gradient(135deg, rgba(255,99,132,0.1), rgba(255,205,210,0.1)); border: 2px solid rgba(255,99,132,0.2);">
                    <h3>ðŸ“ˆ Memory Improvement</h3>
                    <div class="chart-placeholder" style="
                        background:
                            linear-gradient(90deg, transparent, rgba(255,99,132,0.1), transparent),
                            repeating-linear-gradient(90deg, transparent, transparent 10px, rgba(255,99,132,0.1) 10px, rgba(255,99,132,0.1) 20px);
                        animation: dataFlow 3s ease-in-out infinite;
                    ">
                        <div style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%;">
                            <i class="fas fa-chart-line" style="font-size: 3rem; margin-bottom: 1rem; color: #FF6384; animation: pulse 2s ease-in-out infinite;"></i>
                            <div style="text-align: center;">
                                <div style="font-size: 2rem; font-weight: bold; color: #FF6384;">+23%</div>
                                <div style="font-size: 0.9rem; opacity: 0.8;">This week</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card" style="background: linear-gradient(135deg, rgba(54,162,235,0.1), rgba(179,226,255,0.1)); border: 2px solid rgba(54,162,235,0.2);">
                    <h3>ðŸŽ¯ Focus Levels</h3>
                    <div class="chart-placeholder" style="
                        background:
                            linear-gradient(90deg, transparent, rgba(54,162,235,0.1), transparent),
                            repeating-linear-gradient(90deg, transparent, transparent 15px, rgba(54,162,235,0.1) 15px, rgba(54,162,235,0.1) 30px);
                        animation: dataFlow 4s ease-in-out infinite reverse;
                    ">
                        <div style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%;">
                            <i class="fas fa-chart-bar" style="font-size: 3rem; margin-bottom: 1rem; color: #36A2EB; animation: pulse 2s ease-in-out infinite; animation-delay: 0.5s;"></i>
                            <div style="text-align: center;">
                                <div style="font-size: 2rem; font-weight: bold; color: #36A2EB;">87%</div>
                                <div style="font-size: 0.9rem; opacity: 0.8;">Current session</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <h3>ðŸ§  Interactive 3D Brain Model</h3>
                <div style="text-align: center; padding: 3rem;">
                    <div style="position: relative; display: inline-block;">
                        <!-- Enhanced 3D Brain -->
                        <div style="
                            width: 250px; height: 200px;
                            background:
                                radial-gradient(ellipse at 30% 30%, rgba(185,224,216,0.8), transparent 70%),
                                radial-gradient(ellipse at 70% 70%, rgba(176,224,230,0.6), transparent 70%),
                                linear-gradient(135deg, var(--dashboard-color), rgba(185,224,216,0.7));
                            border-radius: 50% 50% 45% 45%;
                            margin: 0 auto; position: relative; cursor: pointer;
                            box-shadow: 0 10px 30px rgba(185,224,216,0.4);
                            animation: brainGlow 4s ease-in-out infinite;
                            transform-style: preserve-3d;
                        " onclick="showBrainInfo('memory')">
                            <!-- Brain regions with enhanced visuals -->
                            <div style="
                                position: absolute; top: 30%; left: 20%;
                                background: linear-gradient(45deg, rgba(255,255,255,0.9), rgba(185,224,216,0.8));
                                padding: 0.8rem; border-radius: 12px; font-size: 0.9rem; font-weight: 600;
                                cursor: pointer; box-shadow: 0 4px 15px rgba(0,0,0,0.2);
                                animation: regionPulse 3s ease-in-out infinite;
                            " onclick="showBrainInfo('memory')">
                                ðŸ§  Memory
                            </div>
                            <div style="
                                position: absolute; top: 20%; right: 20%;
                                background: linear-gradient(45deg, rgba(255,255,255,0.9), rgba(135,206,235,0.8));
                                padding: 0.8rem; border-radius: 12px; font-size: 0.9rem; font-weight: 600;
                                cursor: pointer; box-shadow: 0 4px 15px rgba(0,0,0,0.2);
                                animation: regionPulse 3s ease-in-out infinite; animation-delay: 1s;
                            " onclick="showBrainInfo('focus')">
                                ðŸŽ¯ Focus
                            </div>
                            <div style="
                                position: absolute; bottom: 30%; left: 50%; transform: translateX(-50%);
                                background: linear-gradient(45deg, rgba(255,255,255,0.9), rgba(255,182,193,0.8));
                                padding: 0.8rem; border-radius: 12px; font-size: 0.9rem; font-weight: 600;
                                cursor: pointer; box-shadow: 0 4px 15px rgba(0,0,0,0.2);
                                animation: regionPulse 3s ease-in-out infinite; animation-delay: 2s;
                            " onclick="showBrainInfo('emotion')">
                                â¤ï¸ Emotion
                            </div>

                            <!-- Neural activity indicators -->
                            <div style="position: absolute; top: 10%; left: 30%; width: 8px; height: 8px; background: #00C851; border-radius: 50%; animation: neuronPulse 2s infinite;"></div>
                            <div style="position: absolute; top: 40%; right: 25%; width: 6px; height: 6px; background: #FF6384; border-radius: 50%; animation: neuronPulse 2.5s infinite; animation-delay: 0.5s;"></div>
                            <div style="position: absolute; bottom: 40%; left: 40%; width: 7px; height: 7px; background: #36A2EB; border-radius: 50%; animation: neuronPulse 1.8s infinite; animation-delay: 1s;"></div>
                        </div>

                        <!-- Brain wave visualization -->
                        <div style="margin-top: 2rem; display: flex; justify-content: center; gap: 1rem;">
                            <div style="text-align: center;">
                                <div style="font-size: 1.5rem; color: #00C851;">Alpha</div>
                                <div style="width: 60px; height: 4px; background: #00C851; border-radius: 2px; animation: waveMove 2s ease-in-out infinite;"></div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 1.5rem; color: #FF6384;">Beta</div>
                                <div style="width: 60px; height: 4px; background: #FF6384; border-radius: 2px; animation: waveMove 1.5s ease-in-out infinite; animation-delay: 0.5s;"></div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 1.5rem; color: #36A2EB;">Theta</div>
                                <div style="width: 60px; height: 4px; background: #36A2EB; border-radius: 2px; animation: waveMove 3s ease-in-out infinite; animation-delay: 1s;"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Challenges Page -->
        <div class="page" id="challenges">
            <div class="card">
                <h2>Neuro Challenges</h2>
                <p>Test your cognitive abilities with these engaging challenges</p>
            </div>

            <div class="challenge-card" onclick="openChallenge('memory')">
                <div class="challenge-title">Memory Match Challenge</div>
                <div class="challenge-description">Test your working memory with pattern matching</div>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 65%;"></div>
                </div>
                <small>Progress: 65% Complete</small>
            </div>

            <div class="challenge-card" onclick="openChallenge('speed')">
                <div class="challenge-title">Speed Processing</div>
                <div class="challenge-description">React quickly to visual stimuli</div>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 40%;"></div>
                </div>
                <small>Progress: 40% Complete</small>
            </div>

            <div class="challenge-card" onclick="openChallenge('logic')">
                <div class="challenge-title">Logic Puzzles</div>
                <div class="challenge-description">Solve complex reasoning problems</div>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 80%;"></div>
                </div>
                <small>Progress: 80% Complete</small>
            </div>

            <div class="card">
                <h3>Leaderboard</h3>
                <button class="btn btn-challenges" onclick="showLeaderboard()">
                    <i class="fas fa-trophy"></i>
                    View Leaderboard
                </button>
                <button class="btn btn-primary" onclick="joinChallenge()">
                    <i class="fas fa-plus"></i>
                    Join Challenge
                </button>
            </div>
        </div>

        <!-- Sleep Page -->
        <div class="page" id="sleep">
            <div class="card">
                <h2>Sleep & Recovery</h2>
                <div class="sleep-scene">
                    <div class="moon"></div>
                    <div class="star"></div>
                    <div class="star"></div>
                    <div class="star"></div>
                    <div class="star"></div>
                </div>
            </div>

            <div class="card">
                <div class="sleep-score">
                    <h3>Last Night's Sleep Score</h3>
                    <div class="score-circle">
                        <svg>
                            <circle cx="75" cy="75" r="65" class="score-bg" stroke-dasharray="408" stroke-dashoffset="0"></circle>
                            <circle cx="75" cy="75" r="65" class="score-progress" stroke-dasharray="408" stroke-dashoffset="53" id="sleepScoreCircle"></circle>
                        </svg>
                        <div class="score-text" id="sleepScoreText">87/100</div>
                    </div>
                </div>
                <button class="btn btn-sleep" onclick="trackSleep()">
                    <i class="fas fa-moon"></i>
                    Track Sleep Now
                </button>
            </div>

            <div class="card-grid">
                <div class="card">
                    <h3>Sleep Stages</h3>
                    <div class="chart-placeholder">
                        <i class="fas fa-chart-pie" style="font-size: 2rem; margin-right: 1rem;"></i>
                        Hypnogram Chart
                    </div>
                </div>
                <div class="card">
                    <h3>Sleep Tips</h3>
                    <div style="cursor: pointer;" onclick="expandSleepTips()">
                        <p><i class="fas fa-lightbulb"></i> Click to view personalized sleep tips</p>
                    </div>
                </div>
            </div>

            <div class="card">
                <h3>Sleep History</h3>
                <button class="btn btn-sleep" onclick="viewSleepHistory()">
                    <i class="fas fa-history"></i>
                    View Sleep History
                </button>
            </div>
        </div>

        <!-- Advanced Research Laboratory Page -->
        <div class="page" id="research">
            <div class="card holographic-effect">
                <h2>ðŸ”¬ Advanced Research Laboratory</h2>
                <div class="research-hero" style="
                    background: url('https://cdn.builder.io/api/v1/image/assets%2Fc6d8455cd26c4b90a359f3d7d2158396%2F2359e4e0c2ed466894e9cb8fdd03b302?format=webp&width=800') center/cover;
                    height: 300px; border-radius: 15px; position: relative; overflow: hidden; margin: 1rem 0;
                ">
                    <div style="position: absolute; inset: 0; background: linear-gradient(135deg, rgba(138, 43, 226, 0.2), rgba(75, 0, 130, 0.3)); display: flex; align-items: center; justify-content: center;">
                        <div style="text-align: center; color: white;">
                            <h3 style="font-size: 2rem; margin-bottom: 1rem; text-shadow: 2px 2px 4px rgba(0,0,0,0.5);">Elite Neuroscience Research</h3>
                            <p style="font-size: 1.2rem; text-shadow: 1px 1px 2px rgba(0,0,0,0.5);">Advancing cognitive science through innovative research</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card-grid">
                <div class="card">
                    <h3>ðŸ§  Real-time Neural Monitoring</h3>
                    <div class="research-visual" style="
                        background: url('https://cdn.builder.io/api/v1/image/assets%2Fc6d8455cd26c4b90a359f3d7d2158396%2Ffb79b2181bcb4759be3044df14c9d1fa?format=webp&width=800') center/cover;
                        height: 200px; border-radius: 12px; position: relative; margin: 1rem 0;
                    ">
                        <div class="neural-overlay" style="position: absolute; inset: 0; background: linear-gradient(45deg, rgba(46, 204, 113, 0.8), rgba(52, 152, 219, 0.8)); border-radius: 12px;">
                            <div class="neural-data" style="padding: 2rem; color: white;">
                                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem;">
                                    <div class="data-point">
                                        <div style="font-size: 2rem; font-weight: bold;" id="reactionTimeDisplay">143ms</div>
                                        <div style="font-size: 0.9rem;">Reaction Time</div>
                                    </div>
                                    <div class="data-point">
                                        <div style="font-size: 2rem; font-weight: bold;" id="neuralSyncDisplay">94%</div>
                                        <div style="font-size: 0.9rem;">Neural Sync</div>
                                    </div>
                                    <div class="data-point">
                                        <div style="font-size: 2rem; font-weight: bold;" id="dominantWaveDisplay">Alpha</div>
                                        <div style="font-size: 0.9rem;">Dominant Wave</div>
                                    </div>
                                    <div class="data-point">
                                        <div style="font-size: 2rem; font-weight: bold;" id="peakFreqDisplay">8.7Hz</div>
                                        <div style="font-size: 0.9rem;">Peak Frequency</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3>ðŸ“Š Research Progress Tracking</h3>
                    <div class="research-progress" style="
                        background: url('https://cdn.builder.io/api/v1/image/assets%2Fc6d8455cd26c4b90a359f3d7d2158396%2F4b33034565b94be5804f938cdf79b153?format=webp&width=800') center/cover;
                        height: 200px; border-radius: 12px; position: relative; margin: 1rem 0;
                    ">
                        <div style="position: absolute; inset: 0; background: linear-gradient(135deg, rgba(155, 89, 182, 0.8), rgba(52, 152, 219, 0.8)); border-radius: 12px; display: flex; flex-direction: column; justify-content: center; align-items: center; color: white;">
                            <div style="text-align: center;">
                                <div style="font-size: 3rem; font-weight: bold; margin-bottom: 0.5rem;" id="researchCountDisplay">847</div>
                                <div style="font-size: 1.2rem; margin-bottom: 1rem;">Active Research Protocols</div>
                                <div class="progress-bars">
                                    <div style="margin: 0.5rem 0;">
                                        <div style="display: flex; justify-content: space-between; margin-bottom: 0.3rem;">
                                            <span>Memory Enhancement</span>
                                            <span id="memoryProgressDisplay">78%</span>
                                        </div>
                                        <div style="width: 100%; height: 4px; background: rgba(255,255,255,0.3); border-radius: 2px;">
                                            <div style="width: 78%; height: 100%; background: white; border-radius: 2px;" id="memoryProgressBar"></div>
                                        </div>
                                    </div>
                                    <div style="margin: 0.5rem 0;">
                                        <div style="display: flex; justify-content: space-between; margin-bottom: 0.3rem;">
                                            <span>Neural Plasticity</span>
                                            <span id="plasticityProgressDisplay">92%</span>
                                        </div>
                                        <div style="width: 100%; height: 4px; background: rgba(255,255,255,0.3); border-radius: 2px;">
                                            <div style="width: 92%; height: 100%; background: white; border-radius: 2px;" id="plasticityProgressBar"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <h3>ðŸ† Research Findings & Breakthroughs</h3>
                <div class="findings-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem; margin: 1rem 0;">
                    <div class="finding-card" style="
                        background: linear-gradient(135deg, rgba(52, 152, 219, 0.1), rgba(155, 89, 182, 0.1));
                        border: 2px solid rgba(52, 152, 219, 0.3);
                        border-radius: 12px; padding: 1.5rem; transition: all 0.3s ease;
                    ">
                        <h4 style="color: #3498db; margin-bottom: 1rem;">ðŸ§  Neuroplasticity Enhancement</h4>
                        <p style="margin-bottom: 1rem;">Advanced cognitive training protocols show 34% improvement in neural pathway formation.</p>
                        <div class="metric-highlight" style="background: rgba(52, 152, 219, 0.2); padding: 0.8rem; border-radius: 8px; text-align: center;">
                            <div style="font-size: 1.5rem; font-weight: bold; color: #3498db;">+34%</div>
                            <div style="font-size: 0.9rem; color: #34495e;">Neural Pathway Formation</div>
                        </div>
                    </div>

                    <div class="finding-card" style="
                        background: linear-gradient(135deg, rgba(46, 204, 113, 0.1), rgba(52, 152, 219, 0.1));
                        border: 2px solid rgba(46, 204, 113, 0.3);
                        border-radius: 12px; padding: 1.5rem; transition: all 0.3s ease;
                    ">
                        <h4 style="color: #2ecc71; margin-bottom: 1rem;">âš¡ Reaction Time Optimization</h4>
                        <p style="margin-bottom: 1rem;">Elite training protocols reduce cognitive processing time by average 127ms.</p>
                        <div class="metric-highlight" style="background: rgba(46, 204, 113, 0.2); padding: 0.8rem; border-radius: 8px; text-align: center;">
                            <div style="font-size: 1.5rem; font-weight: bold; color: #2ecc71;">-127ms</div>
                            <div style="font-size: 0.9rem; color: #34495e;">Processing Time Reduction</div>
                        </div>
                    </div>

                    <div class="finding-card" style="
                        background: linear-gradient(135deg, rgba(155, 89, 182, 0.1), rgba(142, 68, 173, 0.1));
                        border: 2px solid rgba(155, 89, 182, 0.3);
                        border-radius: 12px; padding: 1.5rem; transition: all 0.3s ease;
                    ">
                        <h4 style="color: #9b59b6; margin-bottom: 1rem;">ðŸŽ¯ Focus Enhancement</h4>
                        <p style="margin-bottom: 1rem;">Advanced meditation protocols increase sustained attention span significantly.</p>
                        <div class="metric-highlight" style="background: rgba(155, 89, 182, 0.2); padding: 0.8rem; border-radius: 8px; text-align: center;">
                            <div style="font-size: 1.5rem; font-weight: bold; color: #9b59b6;">+67%</div>
                            <div style="font-size: 0.9rem; color: #34495e;">Attention Span Increase</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Advanced Memory Challenge Page -->
        <div class="page" id="memory">
            <div class="card holographic-effect">
                <h2>ðŸ§© Advanced Memory Palace</h2>
                <div class="memory-hero" style="
                    background: url('https://cdn.builder.io/api/v1/image/assets%2Fc6d8455cd26c4b90a359f3d7d2158396%2Fe90b3cb6b5c94d92b5f5e0105e1a9d19?format=webp&width=800') center/cover;
                    height: 300px; border-radius: 15px; position: relative; overflow: hidden; margin: 1rem 0;
                ">
                    <div style="position: absolute; inset: 0; background: linear-gradient(135deg, rgba(231, 76, 60, 0.2), rgba(155, 89, 182, 0.3)); display: flex; align-items: center; justify-content: center;">
                        <div style="text-align: center; color: white;">
                            <h3 style="font-size: 2rem; margin-bottom: 1rem; text-shadow: 2px 2px 4px rgba(0,0,0,0.5);">Elite Memory Training</h3>
                            <p style="font-size: 1.2rem; text-shadow: 1px 1px 2px rgba(0,0,0,0.5);">Advanced pattern recognition and cognitive enhancement</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="cognitive-game-container">
                <h3>ðŸŽ¯ Interactive Memory Challenge</h3>
                <div class="memory-game-interface">
                    <div class="game-stats" style="display: flex; justify-content: space-between; margin-bottom: 2rem;">
                        <div class="stat-item" style="text-align: center;">
                            <div style="font-size: 2rem; font-weight: bold; color: #e74c3c;" id="memoryLevel">8</div>
                            <div>Level</div>
                        </div>
                        <div class="stat-item" style="text-align: center;">
                            <div style="font-size: 2rem; font-weight: bold; color: #3498db;" id="memoryScore">1,247</div>
                            <div>Score</div>
                        </div>
                        <div class="stat-item" style="text-align: center;">
                            <div style="font-size: 2rem; font-weight: bold; color: #2ecc71;" id="memoryAccuracy">94%</div>
                            <div>Accuracy</div>
                        </div>
                        <div class="stat-item" style="text-align: center;">
                            <div style="font-size: 2rem; font-weight: bold; color: #9b59b6;" id="memoryResponse">347ms</div>
                            <div>Avg Response</div>
                        </div>
                    </div>

                    <div class="pattern-matrix" id="memoryMatrix">
                        <!-- Pattern cells will be generated by JavaScript -->
                        <div class="pattern-cell" data-index="0">ðŸ§ </div>
                        <div class="pattern-cell" data-index="1">âš¡</div>
                        <div class="pattern-cell" data-index="2">ðŸŽ¯</div>
                        <div class="pattern-cell" data-index="3">ðŸ”¥</div>
                        <div class="pattern-cell" data-index="4">ðŸ’Ž</div>
                        <div class="pattern-cell" data-index="5">â­</div>
                        <div class="pattern-cell" data-index="6">ðŸš€</div>
                        <div class="pattern-cell" data-index="7">ðŸ’¡</div>
                        <div class="pattern-cell" data-index="8">ðŸŽ¨</div>
                        <div class="pattern-cell" data-index="9">ðŸ”¬</div>
                        <div class="pattern-cell" data-index="10">ðŸ†</div>
                        <div class="pattern-cell" data-index="11">ðŸŽª</div>
                        <div class="pattern-cell" data-index="12">ðŸŽµ</div>
                        <div class="pattern-cell" data-index="13">ðŸŒŸ</div>
                        <div class="pattern-cell" data-index="14">ðŸ”®</div>
                        <div class="pattern-cell" data-index="15">ðŸ’«</div>
                    </div>

                    <div class="game-controls" style="display: flex; justify-content: center; gap: 1rem; margin-top: 2rem;">
                        <button class="btn btn-challenges" onclick="startMemoryChallenge()">
                            <i class="fas fa-play"></i>
                            Start Challenge
                        </button>
                        <button class="btn btn-primary" onclick="resetMemoryGame()">
                            <i class="fas fa-refresh"></i>
                            Reset
                        </button>
                        <button class="btn btn-focus" onclick="showMemoryStats()">
                            <i class="fas fa-chart-line"></i>
                            View Progress
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Champions & Winners Page -->
        <div class="page" id="winners">
            <div class="card holographic-effect">
                <h2>ðŸ† Elite Champions Hall</h2>
                <div class="champions-hero" style="
                    background: url('https://cdn.builder.io/api/v1/image/assets%2Fc6d8455cd26c4b90a359f3d7d2158396%2F878c65ea5641473f82711856372886f9?format=webp&width=800') center/cover;
                    height: 300px; border-radius: 15px; position: relative; overflow: hidden; margin: 1rem 0;
                ">
                    <div style="position: absolute; inset: 0; background: linear-gradient(135deg, rgba(255, 193, 7, 0.2), rgba(255, 152, 0, 0.3)); display: flex; align-items: center; justify-content: center;">
                        <div style="text-align: center; color: white;">
                            <h3 style="font-size: 2rem; margin-bottom: 1rem; text-shadow: 2px 2px 4px rgba(0,0,0,0.5);">Celebrating Excellence</h3>
                            <p style="font-size: 1.2rem; text-shadow: 1px 1px 2px rgba(0,0,0,0.5);">Recognizing the brightest minds in cognitive training</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="social-panel">
                <h3>ðŸŒŸ Elite Leaderboard</h3>
                <div class="leaderboard-categories" style="display: flex; justify-content: center; gap: 1rem; margin-bottom: 2rem;">
                    <button class="btn btn-primary active" onclick="filterLeaderboard('overall')">Overall</button>
                    <button class="btn btn-dashboard" onclick="filterLeaderboard('memory')">Memory</button>
                    <button class="btn btn-challenges" onclick="filterLeaderboard('focus')">Focus</button>
                    <button class="btn btn-sleep" onclick="filterLeaderboard('speed')">Speed</button>
                </div>

                <div class="leaderboard-list">
                    <div class="leaderboard-item champion-highlight" style="background: linear-gradient(45deg, rgba(255, 215, 0, 0.2), rgba(255, 193, 7, 0.3)); border: 2px solid #ffd700;">
                        <div class="rank-badge first">1</div>
                        <div class="champion-info" style="flex: 1;">
                            <div style="font-weight: bold; font-size: 1.1rem;">Alex Chen</div>
                            <div style="color: #666; font-size: 0.9rem;">Cognitive Elite â€¢ Neural Efficiency: 98%</div>
                        </div>
                        <div class="champion-score" style="text-align: right;">
                            <div style="font-size: 1.5rem; font-weight: bold; color: #f1c40f;">2,847</div>
                            <div style="font-size: 0.8rem; color: #666;">Elite Points</div>
                        </div>
                    </div>

                    <div class="leaderboard-item">
                        <div class="rank-badge second">2</div>
                        <div class="champion-info" style="flex: 1;">
                            <div style="font-weight: bold;">Maya Rodriguez</div>
                            <div style="color: #666; font-size: 0.9rem;">Memory Master â€¢ Accuracy: 96%</div>
                        </div>
                        <div class="champion-score" style="text-align: right;">
                            <div style="font-size: 1.3rem; font-weight: bold; color: #666;">2,534</div>
                            <div style="font-size: 0.8rem; color: #666;">Elite Points</div>
                        </div>
                    </div>

                    <div class="leaderboard-item">
                        <div class="rank-badge third">3</div>
                        <div class="champion-info" style="flex: 1;">
                            <div style="font-weight: bold;">Jordan Kim</div>
                            <div style="color: #666; font-size: 0.9rem;">Focus Champion â€¢ Reaction: 142ms</div>
                        </div>
                        <div class="champion-score" style="text-align: right;">
                            <div style="font-size: 1.3rem; font-weight: bold; color: #cd7f32;">2,297</div>
                            <div style="font-size: 0.8rem; color: #666;">Elite Points</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Focus Page -->
        <div class="page" id="focus">
            <div class="card">
                <h2>ðŸ§˜â€â™€ï¸ Meditation & Focus Studio</h2>
                <div class="meditation-video-container" style="position: relative; height: 300px; border-radius: 12px; overflow: hidden; margin-bottom: 2rem;">
                    <!-- Animated Nature Background -->
                    <div class="nature-bg active" id="natureBg" style="
                        position: absolute; top: 0; left: 0; width: 100%; height: 100%;
                        background:
                            radial-gradient(ellipse at top, rgba(135, 206, 235, 0.8), transparent),
                            radial-gradient(ellipse at bottom, rgba(34, 139, 34, 0.6), transparent),
                            linear-gradient(135deg, #87CEEB 0%, #98FB98 50%, #32CD32 100%);
                        animation: gentleWaves 8s ease-in-out infinite;
                    ">
                        <!-- Floating clouds -->
                        <div style="position: absolute; top: 10%; left: 10%; width: 60px; height: 30px; background: rgba(255,255,255,0.7); border-radius: 50px; animation: float 6s ease-in-out infinite;"></div>
                        <div style="position: absolute; top: 20%; right: 15%; width: 80px; height: 40px; background: rgba(255,255,255,0.6); border-radius: 50px; animation: float 8s ease-in-out infinite reverse;"></div>

                        <!-- Animated trees -->
                        <div style="position: absolute; bottom: 20%; left: 20%; font-size: 3rem; color: #228B22; animation: sway 4s ease-in-out infinite;">ðŸŒ²</div>
                        <div style="position: absolute; bottom: 15%; right: 25%; font-size: 2.5rem; color: #228B22; animation: sway 5s ease-in-out infinite reverse;">ðŸŒ³</div>

                        <!-- Sun/Moon -->
                        <div style="position: absolute; top: 15%; right: 20%; font-size: 3rem; animation: pulse 3s ease-in-out infinite;">â˜€ï¸</div>
                    </div>

                    <!-- Ocean Background -->
                    <div class="ocean-bg" id="oceanBg" style="
                        position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: none;
                        background:
                            radial-gradient(ellipse at center top, rgba(135, 206, 235, 0.9), transparent),
                            linear-gradient(135deg, #4682B4 0%, #87CEEB 50%, #B0E0E6 100%);
                        animation: oceanWaves 6s ease-in-out infinite;
                    ">
                        <!-- Animated waves -->
                        <div style="position: absolute; bottom: 0; left: 0; width: 100%; height: 30%; background: linear-gradient(90deg, rgba(70,130,180,0.8) 0%, rgba(135,206,235,0.6) 50%, rgba(176,224,230,0.8) 100%); border-radius: 50% 50% 0 0; animation: wave1 4s ease-in-out infinite;"></div>
                        <div style="position: absolute; bottom: 0; left: 0; width: 100%; height: 20%; background: linear-gradient(90deg, rgba(176,224,230,0.7) 0%, rgba(135,206,235,0.5) 50%, rgba(70,130,180,0.7) 100%); border-radius: 50% 50% 0 0; animation: wave2 3s ease-in-out infinite reverse;"></div>

                        <!-- Seagulls -->
                        <div style="position: absolute; top: 30%; left: 30%; color: white; font-size: 1.5rem; animation: fly 10s linear infinite;">ðŸ•Šï¸</div>
                    </div>

                    <!-- Mountain Background -->
                    <div class="mountain-bg" id="mountainBg" style="
                        position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: none;
                        background:
                            linear-gradient(135deg, #4169E1 0%, #9370DB 30%, #8B4513 70%, #2F4F4F 100%);
                        animation: mountainMist 10s ease-in-out infinite;
                    ">
                        <!-- Mountain peaks -->
                        <div style="position: absolute; bottom: 30%; left: 10%; font-size: 4rem; color: #696969; text-shadow: 2px 2px 4px rgba(0,0,0,0.3);">â›°ï¸</div>
                        <div style="position: absolute; bottom: 20%; right: 20%; font-size: 3.5rem; color: #808080; text-shadow: 2px 2px 4px rgba(0,0,0,0.3);">ðŸ”ï¸</div>

                        <!-- Stars -->
                        <div style="position: absolute; top: 20%; left: 20%; color: white; font-size: 1rem; animation: twinkle 2s ease-in-out infinite;">âœ¨</div>
                        <div style="position: absolute; top: 15%; right: 30%; color: white; font-size: 0.8rem; animation: twinkle 3s ease-in-out infinite reverse;">â­</div>
                    </div>
                </div>

                <div class="meditation-controls" style="display: flex; justify-content: center; gap: 1rem; margin-bottom: 2rem;">
                    <button onclick="changeMeditationBg('nature')" class="bg-btn active" data-bg="nature" style="
                        padding: 0.8rem 1.5rem; border: none; border-radius: 25px;
                        background: linear-gradient(45deg, #32CD32, #98FB98); color: white;
                        cursor: pointer; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(50,205,50,0.3);
                    ">ðŸŒ¿ Forest</button>
                    <button onclick="changeMeditationBg('ocean')" class="bg-btn" data-bg="ocean" style="
                        padding: 0.8rem 1.5rem; border: none; border-radius: 25px;
                        background: linear-gradient(45deg, #4682B4, #87CEEB); color: white;
                        cursor: pointer; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(70,130,180,0.3);
                    ">ðŸŒŠ Ocean</button>
                    <button onclick="changeMeditationBg('mountain')" class="bg-btn" data-bg="mountain" style="
                        padding: 0.8rem 1.5rem; border: none; border-radius: 25px;
                        background: linear-gradient(45deg, #4169E1, #9370DB); color: white;
                        cursor: pointer; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(65,105,225,0.3);
                    ">â›°ï¸ Mountain</button>
                </div>

                <div class="card">
                    <h3>ðŸ§˜â€â™€ï¸ Advanced Binaural Beats</h3>
                    <div class="binaural-player" style="background: linear-gradient(135deg, rgba(138, 43, 226, 0.1), rgba(75, 0, 130, 0.1)); border-radius: 15px; padding: 2rem; margin: 1rem 0;">
                        <div class="frequency-selector" style="display: flex; justify-content: center; gap: 0.5rem; margin-bottom: 2rem; flex-wrap: wrap;">
                            <button class="freq-btn active" data-freq="delta" style="padding: 0.5rem 1rem; border: none; border-radius: 20px; background: linear-gradient(45deg, #667eea, #764ba2); color: white; cursor: pointer; transition: all 0.3s ease;" onclick="selectFrequency('delta')">Delta (0.5-4Hz)</button>
                            <button class="freq-btn" data-freq="theta" style="padding: 0.5rem 1rem; border: none; border-radius: 20px; background: rgba(255,255,255,0.2); color: #333; cursor: pointer; transition: all 0.3s ease;" onclick="selectFrequency('theta')">Theta (4-8Hz)</button>
                            <button class="freq-btn" data-freq="alpha" style="padding: 0.5rem 1rem; border: none; border-radius: 20px; background: rgba(255,255,255,0.2); color: #333; cursor: pointer; transition: all 0.3s ease;" onclick="selectFrequency('alpha')">Alpha (8-13Hz)</button>
                            <button class="freq-btn" data-freq="beta" style="padding: 0.5rem 1rem; border: none; border-radius: 20px; background: rgba(255,255,255,0.2); color: #333; cursor: pointer; transition: all 0.3s ease;" onclick="selectFrequency('beta')">Beta (13-30Hz)</button>
                            <button class="freq-btn" data-freq="gamma" style="padding: 0.5rem 1rem; border: none; border-radius: 20px; background: rgba(255,255,255,0.2); color: #333; cursor: pointer; transition: all 0.3s ease;" onclick="selectFrequency('gamma')">Gamma (30+Hz)</button>
                        </div>
                        <div class="wave-visualizer" id="waveVisualizer" style="background: rgba(0,0,0,0.1); border-radius: 12px; padding: 1rem; margin-bottom: 2rem;">
                            <canvas id="audioCanvas" width="400" height="100" style="width: 100%; height: 100px; display: block;"></canvas>
                        </div>
                        <div class="player-controls" style="display: flex; justify-content: space-between; align-items: center;">
                            <button class="btn btn-focus" onclick="playBinauralBeats()" style="flex: 1; margin-right: 2rem;">
                                <i class="fas fa-play"></i>
                                Start Binaural Session
                            </button>
                            <div class="volume-control" style="display: flex; align-items: center; gap: 0.5rem;">
                                <i class="fas fa-volume-down" style="color: #666;"></i>
                                <input type="range" id="volumeSlider" min="0" max="100" value="50" style="width: 100px;">
                                <i class="fas fa-volume-up" style="color: #666;"></i>
                            </div>
                        </div>
                        <div class="frequency-info" id="frequencyInfo" style="margin-top: 1rem; padding: 1rem; background: rgba(255,255,255,0.1); border-radius: 8px; font-size: 0.9rem; color: #666;">
                            <strong>Delta Waves (0.5-4Hz):</strong> Deep sleep, healing, regeneration. Perfect for rest and recovery sessions.
                        </div>
                    </div>
                    <button onclick="changeMeditationBg('mountain')" class="bg-btn" data-bg="mountain" style="
                        padding: 0.8rem 1.5rem; border: none; border-radius: 25px;
                        background: linear-gradient(45deg, #4169E1, #9370DB); color: white;
                        cursor: pointer; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(65,105,225,0.3);
                    ">ðŸ”ï¸ Mountain</button>
                </div>
            </div>

            <div class="card">
                <h3>ðŸŽ¯ Enhanced Pomodoro Timer</h3>
                <div class="timer-circle">
                    <svg>
                        <circle cx="100" cy="100" r="90" class="timer-bg" stroke-dasharray="565" stroke-dashoffset="0"></circle>
                        <circle cx="100" cy="100" r="90" class="timer-progress" stroke-dasharray="565" stroke-dashoffset="565" id="timerProgress"></circle>
                    </svg>
                    <div class="timer-text" id="timerText">25:00</div>
                </div>
                <div style="text-align: center;">
                    <button class="btn btn-focus" onclick="startFocusSession()">
                        <i class="fas fa-play"></i>
                        Begin Focus Session
                    </button>
                </div>
            </div>

            <div class="card">
                <h3>ðŸ§˜â€â™€ï¸ Meditation Techniques</h3>
                <div class="meditation-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; margin-top: 2rem;">

                    <div class="meditation-card" onclick="startMeditation('breathwork')" style="
                        background: linear-gradient(135deg, rgba(255,182,193,0.8), rgba(255,218,185,0.8));
                        padding: 2rem; border-radius: 15px; cursor: pointer; transition: all 0.3s ease;
                        border: 2px solid rgba(255,182,193,0.5); position: relative; overflow: hidden;
                    ">
                        <div class="breathing-animation" style="
                            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
                            width: 60px; height: 60px; border: 3px solid rgba(255,255,255,0.7);
                            border-radius: 50%; animation: breathingPulse 4s ease-in-out infinite;
                        "></div>
                        <h4 style="text-align: center; margin-bottom: 1rem; color: #8B4513;">ðŸ« Breathwork</h4>
                        <p style="text-align: center; color: #654321; font-size: 0.9rem;">4-7-8 breathing technique for relaxation</p>
                        <div style="text-align: center; margin-top: 1rem; font-size: 0.8rem; opacity: 0.8;">5-15 minutes</div>
                    </div>

                    <div class="meditation-card" onclick="startMeditation('bodyscan')" style="
                        background: linear-gradient(135deg, rgba(173,216,230,0.8), rgba(175,238,238,0.8));
                        padding: 2rem; border-radius: 15px; cursor: pointer; transition: all 0.3s ease;
                        border: 2px solid rgba(173,216,230,0.5); position: relative; overflow: hidden;
                    ">
                        <div class="body-scan-animation" style="
                            position: absolute; top: 20%; left: 50%; transform: translateX(-50%);
                            width: 30px; height: 80px; background: linear-gradient(180deg, rgba(255,255,255,0.8), transparent);
                            animation: bodyScanMove 3s ease-in-out infinite;
                        "></div>
                        <h4 style="text-align: center; margin-bottom: 1rem; color: #4682B4;">ðŸ§˜â€â™‚ï¸ Body Scan</h4>
                        <p style="text-align: center; color: #2F4F4F; font-size: 0.9rem;">Progressive muscle relaxation</p>
                        <div style="text-align: center; margin-top: 1rem; font-size: 0.8rem; opacity: 0.8;">10-20 minutes</div>
                    </div>

                    <div class="meditation-card" onclick="startMeditation('mindfulness')" style="
                        background: linear-gradient(135deg, rgba(221,160,221,0.8), rgba(238,130,238,0.8));
                        padding: 2rem; border-radius: 15px; cursor: pointer; transition: all 0.3s ease;
                        border: 2px solid rgba(221,160,221,0.5); position: relative; overflow: hidden;
                    ">
                        <div class="mindfulness-ripple" style="
                            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
                            width: 40px; height: 40px; border: 2px solid rgba(255,255,255,0.6);
                            border-radius: 50%; animation: rippleEffect 3s ease-out infinite;
                        "></div>
                        <h4 style="text-align: center; margin-bottom: 1rem; color: #8B008B;">ðŸŒ¸ Mindfulness</h4>
                        <p style="text-align: center; color: #663366; font-size: 0.9rem;">Present moment awareness practice</p>
                        <div style="text-align: center; margin-top: 1rem; font-size: 0.8rem; opacity: 0.8;">5-30 minutes</div>
                    </div>

                    <div class="meditation-card" onclick="startMeditation('visualization')" style="
                        background: linear-gradient(135deg, rgba(255,215,0,0.8), rgba(255,228,181,0.8));
                        padding: 2rem; border-radius: 15px; cursor: pointer; transition: all 0.3s ease;
                        border: 2px solid rgba(255,215,0,0.5); position: relative; overflow: hidden;
                    ">
                        <div class="visualization-glow" style="
                            position: absolute; top: 30%; left: 50%; transform: translateX(-50%);
                            width: 50px; height: 30px; background: radial-gradient(circle, rgba(255,255,255,0.8), transparent);
                            border-radius: 50%; animation: glowPulse 2s ease-in-out infinite;
                        "></div>
                        <h4 style="text-align: center; margin-bottom: 1rem; color: #B8860B;">âœ¨ Visualization</h4>
                        <p style="text-align: center; color: #8B7500; font-size: 0.9rem;">Guided imagery for peace</p>
                        <div style="text-align: center; margin-top: 1rem; font-size: 0.8rem; opacity: 0.8;">10-25 minutes</div>
                    </div>

                    <div class="meditation-card" onclick="startMeditation('lovingkindness')" style="
                        background: linear-gradient(135deg, rgba(255,192,203,0.8), rgba(255,182,193,0.8));
                        padding: 2rem; border-radius: 15px; cursor: pointer; transition: all 0.3s ease;
                        border: 2px solid rgba(255,192,203,0.5); position: relative; overflow: hidden;
                    ">
                        <div class="heart-pulse" style="
                            position: absolute; top: 40%; left: 50%; transform: translateX(-50%);
                            font-size: 2rem; color: rgba(255,255,255,0.8); animation: heartBeat 1.5s ease-in-out infinite;
                        ">ðŸ’–</div>
                        <h4 style="text-align: center; margin-bottom: 1rem; color: #C71585;">ðŸ’ Loving Kindness</h4>
                        <p style="text-align: center; color: #8B1538; font-size: 0.9rem;">Compassion and self-love practice</p>
                        <div style="text-align: center; margin-top: 1rem; font-size: 0.8rem; opacity: 0.8;">15-30 minutes</div>
                    </div>

                    <div class="meditation-card" onclick="startMeditation('walking')" style="
                        background: linear-gradient(135deg, rgba(152,251,152,0.8), rgba(144,238,144,0.8));
                        padding: 2rem; border-radius: 15px; cursor: pointer; transition: all 0.3s ease;
                        border: 2px solid rgba(152,251,152,0.5); position: relative; overflow: hidden;
                    ">
                        <div class="walking-steps" style="
                            position: absolute; top: 50%; left: 20%;
                            color: rgba(255,255,255,0.8); font-size: 1.5rem; animation: walkingMotion 2s ease-in-out infinite;
                        ">ðŸ‘£</div>
                        <h4 style="text-align: center; margin-bottom: 1rem; color: #228B22;">ðŸš¶â€â™€ï¸ Walking</h4>
                        <p style="text-align: center; color: #006400; font-size: 0.9rem;">Mindful movement meditation</p>
                        <div style="text-align: center; margin-top: 1rem; font-size: 0.8rem; opacity: 0.8;">Any duration</div>
                    </div>
                </div>
            </div>

            <div class="card-grid">
                <div class="card enhanced-focus-card" onclick="selectFocusMode('deep')" style="
                    background: linear-gradient(135deg, rgba(139,69,19,0.1), rgba(160,82,45,0.1));
                    border: 2px solid rgba(139,69,19,0.3);
                ">
                    <div style="text-align: center; font-size: 2rem; margin-bottom: 1rem;">ðŸ”¥</div>
                    <h4>Deep Work</h4>
                    <p>Intensive 50-minute sessions for complex tasks</p>
                </div>
                <div class="card enhanced-focus-card" onclick="selectFocusMode('light')" style="
                    background: linear-gradient(135deg, rgba(255,215,0,0.1), rgba(255,228,181,0.1));
                    border: 2px solid rgba(255,215,0,0.3);
                ">
                    <div style="text-align: center; font-size: 2rem; margin-bottom: 1rem;">âœ¨</div>
                    <h4>Light Focus</h4>
                    <p>25-minute sessions for routine activities</p>
                </div>
                <div class="card enhanced-focus-card" onclick="selectFocusMode('relax')" style="
                    background: linear-gradient(135deg, rgba(173,216,230,0.1), rgba(175,238,238,0.1));
                    border: 2px solid rgba(173,216,230,0.3);
                ">
                    <div style="text-align: center; font-size: 2rem; margin-bottom: 1rem;">ðŸŒ¸</div>
                    <h4>Relax Mode</h4>
                    <p>Gentle background ambience for calm focus</p>
                </div>
            </div>

            <div class="quote-container">
                <div class="quote-text" id="motivationalQuote">
                    "The successful warrior is the average person with laser-like focus."
                </div>
            </div>

            <div class="card">
                <h3>Current Streak</h3>
                <div style="text-align: center;">
                    <div style="font-size: 3rem; font-weight: 700; color: var(--focus-color); text-shadow: 2px 2px 4px rgba(0,0,0,0.1);">5</div>
                    <div style="color: var(--gray-medium);">Days of consistent focus training</div>
                </div>
            </div>
        </div>
    </div>


    <!-- Modals -->
    <div class="modal" id="brainScanModal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal('brainScanModal')">&times;</button>
            <h3>Brain Scan Analysis</h3>
            <div class="eeg-container">
                <div class="eeg-wave growing"></div>
            </div>
            <div id="analysisText" class="typewriter" style="margin-top: 1rem;">
                Analyzing neural patterns...
            </div>
        </div>
    </div>

    <div class="modal" id="challengeModal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal('challengeModal')">&times;</button>
            <h3 id="challengeTitle">Challenge Rules</h3>
            <div id="challengeContent">
                <p>Complete the memory sequence as quickly as possible. You'll see a pattern of lights - repeat the sequence in the same order.</p>
                <div style="margin: 2rem 0;">
                    <strong>Instructions:</strong>
                    <ul style="margin-left: 2rem; margin-top: 1rem;">
                        <li>Watch the sequence carefully</li>
                        <li>Wait for the "GO" signal</li>
                        <li>Click the squares in the same order</li>
                        <li>Try to beat your best time!</li>
                    </ul>
                </div>
                <button class="btn btn-challenges" onclick="startChallenge()">
                    <i class="fas fa-play"></i>
                    Start Challenge
                </button>
            </div>
        </div>
    </div>

    <div class="modal" id="leaderboardModal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal('leaderboardModal')">&times;</button>
            <h3>Global Leaderboard</h3>
            <div style="margin: 1rem 0;">
                <div style="display: flex; justify-content: space-between; padding: 1rem; background: var(--challenges-color); border-radius: 8px; margin-bottom: 0.5rem;">
                    <span><i class="fas fa-trophy" style="color: gold;"></i> Alex_Neuro</span>
                    <span>2,847 pts</span>
                </div>
                <div style="display: flex; justify-content: space-between; padding: 1rem; background: rgba(0,0,0,0.05); border-radius: 8px; margin-bottom: 0.5rem;">
                    <span><i class="fas fa-medal" style="color: silver;"></i> BrainMaster</span>
                    <span>2,634 pts</span>
                </div>
                <div style="display: flex; justify-content: space-between; padding: 1rem; background: rgba(0,0,0,0.05); border-radius: 8px; margin-bottom: 0.5rem;">
                    <span><i class="fas fa-medal" style="color: #cd7f32;"></i> NeuroNinja</span>
                    <span>2,521 pts</span>
                </div>
                <div style="display: flex; justify-content: space-between; padding: 1rem; background: var(--focus-color); border-radius: 8px; margin-bottom: 0.5rem;">
                    <span><strong>You</strong></span>
                    <span><strong>2,340 pts</strong></span>
                </div>
            </div>
        </div>
    </div>

    <div class="modal" id="sleepHistoryModal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal('sleepHistoryModal')">&times;</button>
            <h3>Sleep History</h3>
            <div class="chart-placeholder" style="height: 250px;">
                <i class="fas fa-chart-area" style="font-size: 2rem; margin-right: 1rem;"></i>
                7-Day Sleep Pattern Analysis
            </div>
            <div style="margin-top: 1rem;">
                <p><strong>Average Sleep Duration:</strong> 7.5 hours</p>
                <p><strong>Sleep Efficiency:</strong> 89%</p>
                <p><strong>Best Night:</strong> Tuesday (9.2 hours)</p>
            </div>
        </div>
    </div>

    <div class="modal" id="brainInfoModal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal('brainInfoModal')">&times;</button>
            <h3 id="brainRegionTitle">Brain Region</h3>
            <div id="brainRegionContent">
                Information about the selected brain region will appear here.
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast">Challenge Joined!</div>

    <script>
        // Global variables
        let activeTab = 'home';
        let focusTimer = null;
        let focusTime = 25 * 60;
        let isTimerRunning = false;

        // WORKING CHALLENGE FUNCTIONS
        function openChallenge(type) {
            console.log('Opening challenge:', type);
            alert('Opening ' + type + ' challenge!');

            const modal = document.getElementById('challengeModal');
            const title = document.getElementById('challengeTitle');
            const content = document.getElementById('challengeContent');

            if (modal && title && content) {
                const challenges = {
                    memory: "ðŸ§  Memory Match Challenge",
                    speed: "âš¡ Speed Processing Challenge",
                    logic: "ðŸ§© Logic Puzzle Challenge"
                };

                title.textContent = challenges[type] || "Challenge";
                content.innerHTML = `
                    <p>Ready to start the ${type} challenge?</p>
                    <button class="btn btn-challenges" onclick="startChallenge('${type}')">
                        <i class="fas fa-play"></i> Start Challenge
                    </button>
                `;
                modal.classList.add('active');
            }
        }

        function startChallenge(type) {
            console.log('Starting challenge:', type);
            closeModal('challengeModal');

            // Create fullscreen game interface
            const gameContainer = document.createElement('div');
            gameContainer.id = 'gameContainer';
            gameContainer.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                z-index: 2000; display: flex; flex-direction: column;
                align-items: center; justify-content: center; color: white;
                animation: fadeIn 0.5s ease;
            `;

            // Add animated video-like background
            const video = document.createElement('div');
            video.style.cssText = `
                position: absolute; top: 0; left: 0; width: 100%; height: 100%;
                background:
                    radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                    radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.3) 0%, transparent 50%),
                    radial-gradient(circle at 40% 40%, rgba(120, 255, 198, 0.3) 0%, transparent 50%),
                    linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                opacity: 0.9;
                animation: backgroundMove 10s ease-in-out infinite;
            `;

            // Add floating particles
            for (let i = 0; i < 20; i++) {
                const particle = document.createElement('div');
                particle.style.cssText = `
                    position: absolute; width: 4px; height: 4px;
                    background: rgba(255,255,255,0.6); border-radius: 50%;
                    left: ${Math.random() * 100}%; top: ${Math.random() * 100}%;
                    animation: float ${3 + Math.random() * 4}s ease-in-out infinite;
                    animation-delay: ${Math.random() * 2}s;
                `;
                video.appendChild(particle);
            }

            gameContainer.appendChild(video);

            // Add dynamic floating animation
            const style = document.createElement('style');
            style.textContent = `
                @keyframes backgroundMove {
                    0%, 100% {
                        background-position: 0% 50%, 100% 50%, 50% 0%, 0% 0%;
                    }
                    50% {
                        background-position: 100% 50%, 0% 50%, 50% 100%, 100% 100%;
                    }
                }
                @keyframes float {
                    0%, 100% {
                        transform: translateY(0px) rotate(0deg);
                        opacity: 0.6;
                    }
                    50% {
                        transform: translateY(-20px) rotate(180deg);
                        opacity: 1;
                    }
                }
            `;
            document.head.appendChild(style);

            // Game content
            const gameContent = document.createElement('div');
            gameContent.style.cssText = `
                position: relative; z-index: 10; text-align: center;
                max-width: 800px; padding: 2rem;
            `;

            if (type === 'memory') {
                startMemoryGame(gameContent);
            } else if (type === 'speed') {
                startSpeedGame(gameContent);
            } else if (type === 'logic') {
                startLogicGame(gameContent);
            }

            // Close button
            const closeBtn = document.createElement('button');
            closeBtn.innerHTML = 'âœ• Exit Game';
            closeBtn.style.cssText = `
                position: absolute; top: 2rem; right: 2rem;
                background: rgba(255,255,255,0.2); color: white;
                border: 2px solid white; padding: 1rem 2rem;
                border-radius: 12px; cursor: pointer; font-size: 1rem;
                transition: all 0.3s ease;
            `;
            closeBtn.onmouseover = () => closeBtn.style.background = 'rgba(255,255,255,0.3)';
            closeBtn.onmouseout = () => closeBtn.style.background = 'rgba(255,255,255,0.2)';
            closeBtn.onclick = () => {
                document.body.removeChild(gameContainer);
                showToast("Game exited");
            };

            gameContainer.appendChild(gameContent);
            gameContainer.appendChild(closeBtn);
            document.body.appendChild(gameContainer);
        }

        function startMemoryGame(container) {
            container.innerHTML = `
                <h1 style="font-size: 3rem; margin-bottom: 2rem; text-shadow: 2px 2px 4px rgba(0,0,0,0.5);">
                    ðŸ§  Memory Challenge
                </h1>
                <p style="font-size: 1.3rem; margin-bottom: 3rem; opacity: 0.9;">
                    Watch the sequence, then repeat it!
                </p>
                <div id="memoryGrid" style="
                    display: grid; grid-template-columns: repeat(3, 1fr);
                    gap: 1rem; max-width: 300px; margin: 0 auto 3rem;
                "></div>
                <div id="memoryStatus" style="font-size: 1.5rem; margin-bottom: 2rem;">
                    Get ready...
                </div>
                <button id="memoryStart" style="
                    background: linear-gradient(45deg, #ff6b6b, #ffa500);
                    color: white; border: none; padding: 1rem 3rem;
                    border-radius: 12px; font-size: 1.3rem; cursor: pointer;
                    box-shadow: 0 4px 15px rgba(0,0,0,0.3);
                    transition: transform 0.2s ease;
                " onmouseover="this.style.transform='scale(1.05)'"
                   onmouseout="this.style.transform='scale(1)'">
                    ðŸš€ Start Game
                </button>
            `;

            let sequence = [];
            let playerSequence = [];
            let level = 1;
            let showingSequence = false;

            // Create grid
            const grid = container.querySelector('#memoryGrid');
            for (let i = 0; i < 9; i++) {
                const cell = document.createElement('div');
                cell.style.cssText = `
                    width: 80px; height: 80px; background: rgba(255,255,255,0.3);
                    border-radius: 12px; cursor: pointer; display: flex;
                    align-items: center; justify-content: center; font-size: 2rem;
                    transition: all 0.3s ease; border: 2px solid transparent;
                `;
                cell.dataset.index = i;
                cell.onclick = () => {
                    if (!showingSequence) {
                        playerSequence.push(i);
                        cell.style.background = 'rgba(0,255,0,0.8)';
                        setTimeout(() => cell.style.background = 'rgba(255,255,255,0.3)', 200);
                        checkSequence();
                    }
                };
                grid.appendChild(cell);
            }

            container.querySelector('#memoryStart').onclick = startRound;

            function startRound() {
                sequence = [];
                playerSequence = [];
                for (let i = 0; i < level + 2; i++) {
                    sequence.push(Math.floor(Math.random() * 9));
                }
                showSequence();
            }

            function showSequence() {
                showingSequence = true;
                container.querySelector('#memoryStatus').textContent = `Level ${level} - Watch carefully!`;
                container.querySelector('#memoryStart').style.display = 'none';

                sequence.forEach((cellIndex, i) => {
                    setTimeout(() => {
                        const cell = grid.children[cellIndex];
                        cell.style.background = 'rgba(255,255,0,0.9)';
                        cell.style.transform = 'scale(1.1)';
                        setTimeout(() => {
                            cell.style.background = 'rgba(255,255,255,0.3)';
                            cell.style.transform = 'scale(1)';
                        }, 400);

                        if (i === sequence.length - 1) {
                            setTimeout(() => {
                                showingSequence = false;
                                container.querySelector('#memoryStatus').textContent = 'Now repeat the sequence!';
                            }, 600);
                        }
                    }, i * 600);
                });
            }

            function checkSequence() {
                const currentIndex = playerSequence.length - 1;
                if (playerSequence[currentIndex] !== sequence[currentIndex]) {
                    container.querySelector('#memoryStatus').innerHTML = `
                        âŒ Wrong! Final Score: Level ${level}<br>
                        <button onclick="location.reload()" style="
                            background: #ff4757; color: white; border: none;
                            padding: 1rem 2rem; border-radius: 8px; margin-top: 1rem;
                            cursor: pointer;
                        ">Try Again</button>
                    `;
                    createConfetti();
                    return;
                }

                if (playerSequence.length === sequence.length) {
                    level++;
                    container.querySelector('#memoryStatus').innerHTML = `
                        âœ… Correct! Level ${level} unlocked!<br>
                        <button onclick="startRound()" style="
                            background: #2ed573; color: white; border: none;
                            padding: 1rem 2rem; border-radius: 8px; margin-top: 1rem;
                            cursor: pointer;
                        ">Next Level</button>
                    `;

                    setTimeout(() => {
                        container.querySelector('#memoryStart').style.display = 'inline-block';
                        container.querySelector('#memoryStart').textContent = `Level ${level}`;
                        container.querySelector('#memoryStart').onclick = startRound;
                    }, 2000);
                }
            }
        }

        function startSpeedGame(container) {
            container.innerHTML = `
                <h1 style="font-size: 3rem; margin-bottom: 2rem; text-shadow: 2px 2px 4px rgba(0,0,0,0.5);">
                    âš¡ Speed Challenge
                </h1>
                <p style="font-size: 1.3rem; margin-bottom: 2rem; opacity: 0.9;">
                    Click the targets as fast as you can!
                </p>
                <div id="speedStats" style="display: flex; justify-content: center; gap: 3rem; margin-bottom: 3rem;">
                    <div style="text-align: center;">
                        <div style="font-size: 2rem; font-weight: bold;">0</div>
                        <div style="opacity: 0.8;">Score</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 2rem; font-weight: bold;">30</div>
                        <div style="opacity: 0.8;">Time</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 2rem; font-weight: bold;">0ms</div>
                        <div style="opacity: 0.8;">Avg Time</div>
                    </div>
                </div>
                <div id="speedGame" style="
                    position: relative; width: 500px; height: 400px;
                    background: rgba(0,0,0,0.3); border-radius: 20px;
                    margin: 0 auto 3rem; overflow: hidden;
                    border: 3px solid rgba(255,255,255,0.3);
                "></div>
                <button id="speedStart" style="
                    background: linear-gradient(45deg, #ffa500, #ff6b6b);
                    color: white; border: none; padding: 1rem 3rem;
                    border-radius: 12px; font-size: 1.3rem; cursor: pointer;
                    box-shadow: 0 4px 15px rgba(0,0,0,0.3);
                ">âš¡ Start Speed Test</button>
            `;

            let score = 0;
            let timeLeft = 30;
            let gameActive = false;
            let reactionTimes = [];
            let targetStartTime = 0;

            const gameArea = container.querySelector('#speedGame');
            const startBtn = container.querySelector('#speedStart');
            const stats = container.querySelector('#speedStats').children;

            startBtn.onclick = startSpeedTest;

            function startSpeedTest() {
                gameActive = true;
                score = 0;
                timeLeft = 30;
                reactionTimes = [];
                startBtn.style.display = 'none';

                const timer = setInterval(() => {
                    timeLeft--;
                    stats[1].firstElementChild.textContent = timeLeft;

                    if (timeLeft <= 0) {
                        clearInterval(timer);
                        endGame();
                    }
                }, 1000);

                spawnTarget();
            }

            function spawnTarget() {
                if (!gameActive) return;

                const target = document.createElement('div');
                target.style.cssText = `
                    position: absolute; width: 60px; height: 60px;
                    background: radial-gradient(circle, #ff6b6b, #ff4757);
                    border-radius: 50%; cursor: pointer;
                    box-shadow: 0 0 20px rgba(255,107,107,0.6);
                    animation: targetPulse 0.5s ease-in-out infinite alternate;
                    border: 3px solid white;
                `;

                target.style.left = Math.random() * (gameArea.offsetWidth - 60) + 'px';
                target.style.top = Math.random() * (gameArea.offsetHeight - 60) + 'px';

                targetStartTime = Date.now();

                target.onclick = () => {
                    const reactionTime = Date.now() - targetStartTime;
                    reactionTimes.push(reactionTime);
                    score++;

                    // Update stats
                    stats[0].firstElementChild.textContent = score;
                    const avgTime = reactionTimes.reduce((a, b) => a + b) / reactionTimes.length;
                    stats[2].firstElementChild.textContent = Math.round(avgTime) + 'ms';

                    target.remove();

                    // Spawn next target
                    setTimeout(() => spawnTarget(), Math.random() * 1000 + 500);
                };

                gameArea.appendChild(target);

                // Remove target if not clicked in time
                setTimeout(() => {
                    if (target.parentNode) {
                        target.remove();
                        setTimeout(() => spawnTarget(), 500);
                    }
                }, 3000);
            }

            function endGame() {
                gameActive = false;
                gameArea.innerHTML = `
                    <div style="
                        display: flex; flex-direction: column; align-items: center;
                        justify-content: center; height: 100%; font-size: 1.5rem;
                    ">
                        <div style="font-size: 3rem; margin-bottom: 1rem;">ðŸŽ¯</div>
                        <div>Final Score: ${score}</div>
                        <div style="font-size: 1rem; margin-top: 1rem; opacity: 0.8;">
                            Average Reaction: ${reactionTimes.length ? Math.round(reactionTimes.reduce((a, b) => a + b) / reactionTimes.length) : 0}ms
                        </div>
                    </div>
                `;
                createConfetti();
            }
        }

        function startLogicGame(container) {
            container.innerHTML = `
                <h1 style="font-size: 3rem; margin-bottom: 2rem; text-shadow: 2px 2px 4px rgba(0,0,0,0.5);">
                    ðŸ§© Logic Challenge
                </h1>
                <p style="font-size: 1.3rem; margin-bottom: 2rem; opacity: 0.9;">
                    Solve the pattern puzzles!
                </p>
                <div id="logicPuzzle" style="
                    background: rgba(255,255,255,0.1); border-radius: 20px;
                    padding: 3rem; margin: 0 auto 3rem; max-width: 600px;
                    border: 2px solid rgba(255,255,255,0.3);
                "></div>
                <div id="logicOptions" style="
                    display: grid; grid-template-columns: repeat(4, 1fr);
                    gap: 1rem; max-width: 400px; margin: 0 auto 2rem;
                "></div>
                <div id="logicStatus" style="font-size: 1.5rem; margin-bottom: 2rem;">
                    Find the missing pattern!
                </div>
            `;

            let currentPuzzle = 0;
            let score = 0;

            const puzzles = [
                {
                    pattern: ['ðŸ”´', 'ðŸŸ¡', 'ðŸ”µ', 'ðŸ”´', 'ðŸŸ¡', '?'],
                    options: ['ðŸ”µ', 'ðŸŸ¢', 'ðŸ”´', 'ðŸŸ¡'],
                    answer: 0
                },
                {
                    pattern: ['â­', 'â­â­', 'â­â­â­', '?'],
                    options: ['â­â­â­â­', 'â­', 'â­â­', 'â­â­â­â­â­'],
                    answer: 0
                },
                {
                    pattern: ['ðŸ”º', 'ðŸ”»', 'ðŸ”º', 'ðŸ”»', '?'],
                    options: ['ðŸ”º', 'ðŸ”»', 'ðŸ”¹', 'ðŸ”¸'],
                    answer: 0
                }
            ];

            showPuzzle();

            function showPuzzle() {
                const puzzle = puzzles[currentPuzzle];
                const puzzleDiv = container.querySelector('#logicPuzzle');
                const optionsDiv = container.querySelector('#logicOptions');

                puzzleDiv.innerHTML = `
                    <div style="display: flex; align-items: center; justify-content: center; gap: 2rem; flex-wrap: wrap;">
                        ${puzzle.pattern.map(item => `
                            <div style="
                                width: 80px; height: 80px; display: flex;
                                align-items: center; justify-content: center;
                                font-size: 2rem; background: rgba(255,255,255,0.2);
                                border-radius: 12px; border: 2px solid rgba(255,255,255,0.4);
                                ${item === '?' ? 'background: rgba(255,255,0,0.3); animation: pulse 2s infinite;' : ''}
                            ">${item}</div>
                        `).join('')}
                    </div>
                `;

                optionsDiv.innerHTML = puzzle.options.map((option, index) => `
                    <div onclick="selectAnswer(${index})" style="
                        width: 80px; height: 80px; display: flex;
                        align-items: center; justify-content: center;
                        font-size: 2rem; background: rgba(255,255,255,0.2);
                        border-radius: 12px; cursor: pointer;
                        border: 2px solid rgba(255,255,255,0.4);
                        transition: all 0.3s ease;
                    " onmouseover="this.style.background='rgba(255,255,255,0.4)'"
                       onmouseout="this.style.background='rgba(255,255,255,0.2)'">${option}</div>
                `).join('');
            }

            window.selectAnswer = function(selectedIndex) {
                const puzzle = puzzles[currentPuzzle];
                const statusDiv = container.querySelector('#logicStatus');

                if (selectedIndex === puzzle.answer) {
                    score++;
                    currentPuzzle++;

                    if (currentPuzzle < puzzles.length) {
                        statusDiv.innerHTML = `âœ… Correct! Score: ${score}/${puzzles.length}`;
                        setTimeout(() => {
                            showPuzzle();
                            statusDiv.textContent = 'Find the missing pattern!';
                        }, 2000);
                    } else {
                        statusDiv.innerHTML = `
                            ðŸŽ‰ Puzzle Complete!<br>
                            Final Score: ${score}/${puzzles.length}<br>
                            <small style="opacity: 0.8;">You're a logic master!</small>
                        `;
                        createConfetti();
                    }
                } else {
                    statusDiv.innerHTML = `âŒ Wrong answer! Score: ${score}/${puzzles.length}`;
                    setTimeout(() => {
                        statusDiv.textContent = 'Try again!';
                    }, 2000);
                }
            };
        }

        function joinChallenge() {
            console.log('Joining challenge');
            alert('Challenge joined!');
            createConfetti();
            showToast("ðŸŽ‰ Challenge Joined!");
        }

        function showLeaderboard() {
            console.log('Showing leaderboard');
            alert('Opening leaderboard!');
            const modal = document.getElementById('leaderboardModal');
            if (modal) {
                modal.classList.add('active');
            }
        }

        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.remove('active');
            }
        }

        function showToast(message) {
            let toast = document.getElementById('toast');
            if (!toast) {
                toast = document.createElement('div');
                toast.id = 'toast';
                toast.style.cssText = `
                    position: fixed; top: 150px; right: 2rem;
                    background: #FBC4AB; color: #2d2d2d;
                    padding: 1rem 2rem; border-radius: 12px;
                    box-shadow: 0 4px 20px rgba(0,0,0,0.2);
                    z-index: 1001; transform: translateX(100%);
                    transition: transform 0.3s ease;
                `;
                document.body.appendChild(toast);
            }

            toast.textContent = message;
            toast.style.transform = 'translateX(0)';

            setTimeout(() => {
                toast.style.transform = 'translateX(100%)';
            }, 3000);
        }

        // Advanced Features Initialization
        function initializeAdvancedFeatures() {
            startSessionTimer();
            initializeNeuralMonitoring();
            initializeAIAssistant();
            createFloatingParticles();
            initializeBiometricMonitoring();
            console.log('ðŸš€ Advanced features initialized');
        }

        // Sidebar Toggle Function
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const mainContent = document.getElementById('mainContent');
            const header = document.querySelector('.elite-header');

            sidebar.classList.toggle('collapsed');
            mainContent.classList.toggle('sidebar-collapsed');
            header.classList.toggle('sidebar-collapsed');

            // Update toggle icon
            const toggleIcon = sidebar.querySelector('.sidebar-toggle i');
            if (sidebar.classList.contains('collapsed')) {
                toggleIcon.className = 'fas fa-chevron-right';
            } else {
                toggleIcon.className = 'fas fa-chevron-left';
            }
        }

        // Session Timer
        function startSessionTimer() {
            let sessionTime = 0;
            const timer = document.getElementById('sessionTimer');

            setInterval(() => {
                sessionTime++;
                const minutes = Math.floor(sessionTime / 60);
                const seconds = sessionTime % 60;
                timer.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }, 1000);
        }

        // Neural Monitoring Functions
        function initializeNeuralMonitoring() {
            setInterval(updateNeuralMetrics, 2000);
        }

        function updateNeuralMetrics() {
            // Simulate real-time neural monitoring
            const reactionTime = Math.floor(120 + Math.random() * 80);
            const neuralSync = Math.floor(85 + Math.random() * 15);
            const waveTypes = ['Alpha', 'Beta', 'Theta', 'Gamma'];
            const dominantWave = waveTypes[Math.floor(Math.random() * waveTypes.length)];
            const peakFreq = (6 + Math.random() * 20).toFixed(1);

            // Update displays if elements exist
            const reactionDisplay = document.getElementById('reactionTimeDisplay');
            const syncDisplay = document.getElementById('neuralSyncDisplay');
            const waveDisplay = document.getElementById('dominantWaveDisplay');
            const freqDisplay = document.getElementById('peakFreqDisplay');

            if (reactionDisplay) reactionDisplay.textContent = `${reactionTime}ms`;
            if (syncDisplay) syncDisplay.textContent = `${neuralSync}%`;
            if (waveDisplay) waveDisplay.textContent = dominantWave;
            if (freqDisplay) freqDisplay.textContent = `${peakFreq}Hz`;
        }

        // AI Assistant Functions
        function initializeAIAssistant() {
            const recommendations = [
                "Focus training recommended based on current performance",
                "Memory enhancement protocol available",
                "Neural efficiency at optimal levels",
                "Advanced challenge mode unlocked",
                "Cognitive state: Highly receptive to training"
            ];

            setInterval(() => {
                const aiRecommendation = document.getElementById('aiRecommendation');
                if (aiRecommendation) {
                    const randomRec = recommendations[Math.floor(Math.random() * recommendations.length)];
                    aiRecommendation.textContent = `"${randomRec}"`;
                }
            }, 10000);
        }

        // Biometric Monitoring
        function initializeBiometricMonitoring() {
            setInterval(updateBiometrics, 3000);
        }

        function updateBiometrics() {
            const heartRate = Math.floor(65 + Math.random() * 25);
            const focusLevel = Math.floor(75 + Math.random() * 25);
            const stressLevel = Math.random() * 100;

            const heartDisplay = document.getElementById('heartRate');
            const focusDisplay = document.getElementById('focusLevel');
            const stressIndicator = document.querySelector('.stress-level');

            if (heartDisplay) heartDisplay.textContent = `${heartRate} BPM`;
            if (focusDisplay) focusDisplay.textContent = `${focusLevel}%`;
            if (stressIndicator) stressIndicator.style.left = `${stressLevel}%`;
        }

        // Memory Challenge Functions
        function startMemoryChallenge() {
            console.log('Starting advanced memory challenge');
            const matrix = document.getElementById('memoryMatrix');
            const cells = matrix.querySelectorAll('.pattern-cell');

            // Flash pattern sequence
            const sequence = [];
            const sequenceLength = 3 + Math.floor(Math.random() * 5);

            for (let i = 0; i < sequenceLength; i++) {
                sequence.push(Math.floor(Math.random() * 16));
            }

            // Show sequence
            cells.forEach(cell => cell.style.opacity = '0.3');

            sequence.forEach((index, step) => {
                setTimeout(() => {
                    cells[index].classList.add('active');
                    setTimeout(() => {
                        cells[index].classList.remove('active');
                        if (step === sequence.length - 1) {
                            cells.forEach(cell => cell.style.opacity = '1');
                            startMemoryInput(sequence);
                        }
                    }, 800);
                }, step * 1000);
            });
        }

        function startMemoryInput(correctSequence) {
            let playerSequence = [];
            const cells = document.querySelectorAll('.pattern-cell');

            cells.forEach((cell, index) => {
                cell.onclick = () => {
                    cell.classList.add('active');
                    setTimeout(() => cell.classList.remove('active'), 200);

                    playerSequence.push(index);

                    if (playerSequence.length === correctSequence.length) {
                        checkMemorySequence(playerSequence, correctSequence);
                    }
                };
            });
        }

        function checkMemorySequence(player, correct) {
            const isCorrect = player.every((val, index) => val === correct[index]);

            if (isCorrect) {
                showToast('ðŸŽ‰ Perfect memory sequence!');
                updateMemoryStats('correct');
            } else {
                showToast('âŒ Try again!');
                updateMemoryStats('incorrect');
            }

            setTimeout(resetMemoryGame, 2000);
        }

        function updateMemoryStats(result) {
            // Update memory game statistics
            const levelElement = document.getElementById('memoryLevel');
            const scoreElement = document.getElementById('memoryScore');
            const accuracyElement = document.getElementById('memoryAccuracy');

            if (result === 'correct' && levelElement && scoreElement) {
                const currentLevel = parseInt(levelElement.textContent);
                const currentScore = parseInt(scoreElement.textContent.replace(',', ''));

                levelElement.textContent = currentLevel + 1;
                scoreElement.textContent = (currentScore + 150).toLocaleString();
            }
        }

        function resetMemoryGame() {
            const cells = document.querySelectorAll('.pattern-cell');
            cells.forEach(cell => {
                cell.onclick = null;
                cell.style.opacity = '1';
                cell.classList.remove('active');
            });
        }

        function showMemoryStats() {
            showToast('ðŸ“Š Memory stats updated!');
        }

        // Floating Particles Animation
        function createFloatingParticles() {
            const particlesContainer = document.querySelector('.floating-particles');
            if (!particlesContainer) return;

            for (let i = 0; i < 20; i++) {
                setTimeout(() => {
                    const particle = document.createElement('div');
                    particle.className = 'particle';
                    particle.style.left = Math.random() * 100 + '%';
                    particle.style.animationDelay = Math.random() * 8 + 's';
                    particle.style.animationDuration = (8 + Math.random() * 4) + 's';
                    particlesContainer.appendChild(particle);

                    setTimeout(() => particle.remove(), 12000);
                }, i * 200);
            }

            // Regenerate particles
            setTimeout(createFloatingParticles, 15000);
        }

        // Leaderboard Functions
        function filterLeaderboard(category) {
            console.log(`Filtering leaderboard by: ${category}`);
            const buttons = document.querySelectorAll('.leaderboard-categories .btn');
            buttons.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            showToast(`ðŸ“Š Viewing ${category} leaderboard`);
        }

        // Enhanced Binaural Beats Functions
        let currentFrequency = 'delta';
        let isPlaying = false;

        function selectFrequency(frequency) {
            currentFrequency = frequency;

            // Update button states
            document.querySelectorAll('.freq-btn').forEach(btn => {
                btn.style.background = 'rgba(255,255,255,0.2)';
                btn.style.color = '#333';
            });

            event.target.style.background = 'linear-gradient(45deg, #667eea, #764ba2)';
            event.target.style.color = 'white';

            // Update frequency information
            const frequencyInfo = document.getElementById('frequencyInfo');
            const frequencyData = {
                delta: 'Delta Waves (0.5-4Hz): Deep sleep, healing, regeneration. Perfect for rest and recovery sessions.',
                theta: 'Theta Waves (4-8Hz): Deep meditation, creativity, memory. Ideal for learning and insight.',
                alpha: 'Alpha Waves (8-13Hz): Relaxed awareness, calm focus. Great for stress reduction and mild meditation.',
                beta: 'Beta Waves (13-30Hz): Active concentration, alertness. Perfect for cognitive tasks and problem-solving.',
                gamma: 'Gamma Waves (30+Hz): High-level cognitive processing, peak awareness. Advanced meditation states.'
            };

            if (frequencyInfo) {
                frequencyInfo.innerHTML = `<strong>${event.target.textContent}:</strong> ${frequencyData[frequency]}`;
            }

            console.log(`Frequency selected: ${frequency}`);
        }

        function playBinauralBeats() {
            isPlaying = !isPlaying;
            const button = event.target;

            if (isPlaying) {
                button.innerHTML = '<i class="fas fa-pause"></i> Stop Session';
                showToast(`ðŸŽµ ${currentFrequency.charAt(0).toUpperCase() + currentFrequency.slice(1)} waves activated`);

                // Start audio visualization
                const canvas = document.getElementById('audioCanvas');
                if (canvas) {
                    const ctx = canvas.getContext('2d');
                    animateAudioWaves(ctx, canvas);
                }

                // Simulate session effects
                startBinauralSession();
            } else {
                button.innerHTML = '<i class="fas fa-play"></i> Start Binaural Session';
                showToast('ðŸ”‡ Binaural session stopped');
            }
        }

        function startBinauralSession() {
            // Simulate binaural beats effects on metrics
            const focusLevel = document.getElementById('focusLevel');
            const heartRate = document.getElementById('heartRate');

            let sessionTime = 0;
            const sessionInterval = setInterval(() => {
                if (!isPlaying) {
                    clearInterval(sessionInterval);
                    return;
                }

                sessionTime++;

                // Gradually improve metrics during session
                if (focusLevel) {
                    const currentFocus = parseInt(focusLevel.textContent);
                    const newFocus = Math.min(98, currentFocus + Math.floor(Math.random() * 3));
                    focusLevel.textContent = `${newFocus}%`;
                }

                if (heartRate && sessionTime % 10 === 0) {
                    const currentHR = parseInt(heartRate.textContent);
                    const newHR = Math.max(60, currentHR - Math.floor(Math.random() * 2));
                    heartRate.textContent = `${newHR} BPM`;
                }

                // Show progress notifications
                if (sessionTime === 30) showToast('ðŸ§˜ Entering deeper relaxation...');
                if (sessionTime === 60) showToast('âœ¨ Neural synchronization improving...');
                if (sessionTime === 120) showToast('ðŸŒŸ Peak meditation state achieved!');

            }, 1000);
        }

        function animateAudioWaves(ctx, canvas) {
            let frame = 0;
            const frequencies = {
                delta: { speed: 0.01, amplitude: 15 },
                theta: { speed: 0.02, amplitude: 20 },
                alpha: { speed: 0.03, amplitude: 25 },
                beta: { speed: 0.04, amplitude: 18 },
                gamma: { speed: 0.06, amplitude: 12 }
            };

            function draw() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);

                const freq = frequencies[currentFrequency];
                ctx.strokeStyle = getFrequencyColor(currentFrequency);
                ctx.lineWidth = 3;
                ctx.beginPath();

                for (let x = 0; x < canvas.width; x++) {
                    const y = canvas.height/2 +
                              Math.sin((x + frame) * freq.speed) * freq.amplitude +
                              Math.sin((x + frame) * freq.speed * 1.5) * (freq.amplitude * 0.5);
                    if (x === 0) ctx.moveTo(x, y);
                    else ctx.lineTo(x, y);
                }

                ctx.stroke();
                frame += 2;

                if (isPlaying && frame < 10000) {
                    requestAnimationFrame(draw);
                }
            }

            draw();
        }

        function getFrequencyColor(frequency) {
            const colors = {
                delta: '#667eea',
                theta: '#764ba2',
                alpha: '#f093fb',
                beta: '#f5576c',
                gamma: '#4facfe'
            };
            return colors[frequency] || '#8A2BE2';
        }

        // Enhanced Meditation Background Functions
        function changeMeditationBg(bgType) {
            const natureBg = document.getElementById('natureBg');
            const oceanBg = document.getElementById('oceanBg');
            const mountainBg = document.getElementById('mountainBg');

            // Hide all backgrounds
            if (natureBg) natureBg.style.display = 'none';
            if (oceanBg) oceanBg.style.display = 'none';
            if (mountainBg) mountainBg.style.display = 'none';

            // Show selected background
            switch(bgType) {
                case 'nature':
                    if (natureBg) natureBg.style.display = 'block';
                    break;
                case 'ocean':
                    if (oceanBg) oceanBg.style.display = 'block';
                    break;
                case 'mountain':
                    if (mountainBg) mountainBg.style.display = 'block';
                    break;
            }

            // Update button states
            document.querySelectorAll('.bg-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            showToast(`ðŸŒ„ ${bgType.charAt(0).toUpperCase() + bgType.slice(1)} meditation activated`);
        }

        function createConfetti() {
            // Create celebration burst
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#f9ca24', '#6c5ce7', '#a0e7e5'];
                    const shapes = ['â—', 'â–²', 'â– ', 'â™¦', 'â˜…', 'â™¥'];

                    confetti.style.cssText = `
                        position: fixed; width: 15px; height: 15px;
                        color: ${colors[Math.floor(Math.random() * colors.length)]};
                        font-size: ${10 + Math.random() * 10}px; z-index: 999;
                        left: ${Math.random() * 100}vw; top: -20px;
                        animation: confettiFall ${2 + Math.random() * 2}s linear forwards;
                        pointer-events: none; font-weight: bold;
                    `;
                    confetti.textContent = shapes[Math.floor(Math.random() * shapes.length)];
                    document.body.appendChild(confetti);

                    setTimeout(() => confetti.remove(), 4000);
                }, i * 50);
            }

            // Add screen flash effect
            const flash = document.createElement('div');
            flash.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                background: radial-gradient(circle, rgba(255,255,255,0.3) 0%, transparent 70%);
                z-index: 998; pointer-events: none;
                animation: flash 0.5s ease-out;
            `;
            document.body.appendChild(flash);
            setTimeout(() => flash.remove(), 500);

            // Simulate sound effect with visual feedback
            showSoundEffect('ðŸŽ‰ SUCCESS!');
        }

        function showSoundEffect(text) {
            const soundEffect = document.createElement('div');
            soundEffect.style.cssText = `
                position: fixed; top: 50%; left: 50%;
                transform: translate(-50%, -50%); z-index: 1000;
                font-size: 3rem; font-weight: bold; color: #ffd700;
                text-shadow: 2px 2px 4px rgba(0,0,0,0.7);
                animation: soundBurst 1s ease-out forwards;
                pointer-events: none;
            `;
            soundEffect.textContent = text;
            document.body.appendChild(soundEffect);

            setTimeout(() => soundEffect.remove(), 1000);

            // Add sound wave rings
            for (let i = 0; i < 3; i++) {
                setTimeout(() => {
                    const ring = document.createElement('div');
                    ring.style.cssText = `
                        position: fixed; top: 50%; left: 50%;
                        transform: translate(-50%, -50%); z-index: 999;
                        width: 100px; height: 100px; border-radius: 50%;
                        border: 3px solid rgba(255,215,0,0.6);
                        animation: soundWave 1s ease-out forwards;
                        pointer-events: none;
                    `;
                    document.body.appendChild(ring);
                    setTimeout(() => ring.remove(), 1000);
                }, i * 200);
            }
        }

        // Add more animation styles
        const gameStyles = document.createElement('style');
        gameStyles.textContent = `
            @keyframes flash {
                0% { opacity: 0; }
                50% { opacity: 1; }
                100% { opacity: 0; }
            }
            @keyframes soundBurst {
                0% { transform: translate(-50%, -50%) scale(0.5); opacity: 0; }
                50% { transform: translate(-50%, -50%) scale(1.2); opacity: 1; }
                100% { transform: translate(-50%, -50%) scale(1.5); opacity: 0; }
            }
            @keyframes soundWave {
                0% {
                    width: 100px; height: 100px;
                    border-width: 3px; opacity: 0.6;
                }
                100% {
                    width: 300px; height: 300px;
                    border-width: 1px; opacity: 0;
                }
            }
        `;
        document.head.appendChild(gameStyles);

        function navigateToPage(page) {
            console.log('Navigating to:', page);

            // Remove active from all nav items and pages
            document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));

            // Find and activate the target nav item and page
            const targetNavItem = document.querySelector(`.nav-item[data-page="${page}"]`);
            const targetPage = document.getElementById(page);

            if (targetNavItem && targetPage) {
                targetNavItem.classList.add('active');
                targetPage.classList.add('active');

                // Update background
                const bg = document.getElementById('animatedBg');
                if (bg) bg.className = `animated-bg bg-${page}`;

                activeTab = page;
                showToast(`ðŸ“ Navigated to ${page.charAt(0).toUpperCase() + page.slice(1)}`);
            } else {
                console.warn('Navigation target not found:', page);
                showToast(`âŒ Page "${page}" not found`);
            }
        }

        // Make all functions globally available
        window.openChallenge = openChallenge;
        window.startChallenge = startChallenge;
        window.joinChallenge = joinChallenge;
        window.showLeaderboard = showLeaderboard;
        window.closeModal = closeModal;
        window.showToast = showToast;
        window.createConfetti = createConfetti;
        window.navigateToPage = navigateToPage;

        // Additional functions
        function startBrainScan() {
            console.log('Starting brain scan');
            alert('Brain scan started!');
            const modal = document.getElementById('brainScanModal');
            if (modal) {
                modal.classList.add('active');
                showToast("ðŸ§  Brain scan initiated!");
            }
        }

        function trackSleep() {
            console.log('Tracking sleep');
            alert('Sleep tracking started!');
            showToast("ðŸŒ™ Sleep tracking started...");
        }

        function startFocusSession() {
            console.log('Starting focus session');
            alert('Focus session started!');
            showToast("ðŸŽ¯ Focus session started!");
        }

        function selectFocusMode(mode) {
            console.log('Focus mode:', mode);
            alert('Focus mode: ' + mode);
            showToast(`ðŸŽ¯ ${mode} mode activated`);
        }

        function expandSleepTips() {
            console.log('Expanding sleep tips');
            alert('Sleep tips expanded!');
            showToast("ðŸ’¡ Sleep tips expanded!");
        }

        function closeSleepTips(button) {
            console.log('Closing sleep tips');
            if (button?.parentElement) {
                button.parentElement.innerHTML = '<div style="cursor: pointer;" onclick="expandSleepTips()"><p><i class="fas fa-lightbulb"></i> Click to view personalized sleep tips</p></div>';
            }
        }

        function viewSleepHistory() {
            console.log('Viewing sleep history');
            alert('Sleep history opened!');
            const modal = document.getElementById('sleepHistoryModal');
            if (modal) modal.classList.add('active');
        }

        function showBrainInfo(region) {
            console.log('Brain info:', region);
            alert('Brain info: ' + region);
            const modal = document.getElementById('brainInfoModal');
            if (modal) modal.classList.add('active');
        }

        // Meditation Functions
        function changeMeditationBg(bgType) {
            console.log('Changing meditation background to:', bgType);

            // Hide all backgrounds
            const backgrounds = ['natureBg', 'oceanBg', 'mountainBg'];
            backgrounds.forEach(bgId => {
                const bg = document.getElementById(bgId);
                if (bg) bg.style.display = 'none';
            });

            // Show selected background
            const selectedBg = document.getElementById(bgType + 'Bg');
            if (selectedBg) selectedBg.style.display = 'block';

            // Update button states
            document.querySelectorAll('.bg-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.bg === bgType) btn.classList.add('active');
            });

            showToast(`ðŸŒŸ ${bgType.charAt(0).toUpperCase() + bgType.slice(1)} background activated`);
        }

        function startMeditation(technique) {
            console.log('Starting meditation:', technique);

            // Create fullscreen meditation interface
            const meditationContainer = document.createElement('div');
            meditationContainer.id = 'meditationContainer';
            meditationContainer.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                z-index: 2000; display: flex; flex-direction: column;
                align-items: center; justify-content: center; color: white;
                animation: fadeIn 1s ease;
            `;

            const techniques = {
                breathwork: {
                    title: 'ðŸ« Breathwork Meditation',
                    background: 'linear-gradient(135deg, #FF6B6B 0%, #FFB6C1 50%, #FFA07A 100%)',
                    instructions: [
                        'ðŸ”µ Inhale for 4 counts',
                        'â¸ï¸ Hold for 7 counts',
                        'ðŸ”´ Exhale for 8 counts',
                        'ðŸ”„ Repeat the cycle'
                    ]
                },
                bodyscan: {
                    title: 'ðŸ§˜â€â™‚ï¸ Body Scan Meditation',
                    background: 'linear-gradient(135deg, #4FC3F7 0%, #81C784 50%, #AED581 100%)',
                    instructions: [
                        'ðŸ§  Start with your head',
                        'ðŸ‘€ Notice any tension',
                        'â¬‡ï¸ Move down your body',
                        'ðŸ˜Œ Relax each part'
                    ]
                },
                mindfulness: {
                    title: 'ðŸŒ¸ Mindfulness Meditation',
                    background: 'linear-gradient(135deg, #BA68C8 0%, #CE93D8 50%, #E1BEE7 100%)',
                    instructions: [
                        'ðŸŽ¯ Focus on the present',
                        'ðŸ‘ï¸ Observe your thoughts',
                        'ðŸƒ Let them pass by',
                        'ðŸ§˜â€â™€ï¸ Return to breath'
                    ]
                },
                visualization: {
                    title: 'âœ¨ Visualization Meditation',
                    background: 'linear-gradient(135deg, #FFD54F 0%, #FFF176 50%, #FFEB3B 100%)',
                    instructions: [
                        'ðŸŒ… Imagine a peaceful place',
                        'ðŸ‘ï¸ See the details clearly',
                        'ðŸ‘‚ Hear the sounds',
                        'ðŸ˜Š Feel the serenity'
                    ]
                },
                lovingkindness: {
                    title: 'ðŸ’ Loving Kindness Meditation',
                    background: 'linear-gradient(135deg, #F8BBD9 0%, #FFB6C1 50%, #FFC0CB 100%)',
                    instructions: [
                        'ðŸ’– Send love to yourself',
                        'ðŸ‘¥ Extend to loved ones',
                        'ðŸŒ Include all beings',
                        'â˜®ï¸ Feel universal love'
                    ]
                },
                walking: {
                    title: 'ðŸš¶â€â™€ï¸ Walking Meditation',
                    background: 'linear-gradient(135deg, #81C784 0%, #A5D6A7 50%, #C8E6C9 100%)',
                    instructions: [
                        'ðŸ‘£ Feel each step',
                        'ðŸŒ¬ï¸ Sync with breathing',
                        'ðŸ‘€ Stay present',
                        'ðŸ§˜â€â™€ï¸ Move mindfully'
                    ]
                }
            };

            const currentTechnique = techniques[technique];
            meditationContainer.style.background = currentTechnique.background;

            // Add floating particles for ambiance
            for (let i = 0; i < 30; i++) {
                const particle = document.createElement('div');
                particle.style.cssText = `
                    position: absolute; width: 3px; height: 3px;
                    background: rgba(255,255,255,0.7); border-radius: 50%;
                    left: ${Math.random() * 100}%; top: ${Math.random() * 100}%;
                    animation: float ${4 + Math.random() * 6}s ease-in-out infinite;
                    animation-delay: ${Math.random() * 3}s;
                `;
                meditationContainer.appendChild(particle);
            }

            // Meditation content
            const content = document.createElement('div');
            content.style.cssText = `
                position: relative; z-index: 10; text-align: center;
                max-width: 600px; padding: 3rem;
                background: rgba(255,255,255,0.1); border-radius: 20px;
                backdrop-filter: blur(20px);
            `;

            content.innerHTML = `
                <h1 style="font-size: 3rem; margin-bottom: 2rem; text-shadow: 2px 2px 4px rgba(0,0,0,0.3);">
                    ${currentTechnique.title}
                </h1>
                <div id="meditationTimer" style="
                    font-size: 4rem; font-weight: bold; margin: 2rem 0;
                    text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
                ">5:00</div>
                <div id="meditationInstructions" style="
                    background: rgba(255,255,255,0.2); padding: 2rem; border-radius: 15px; margin: 2rem 0;
                ">
                    ${currentTechnique.instructions.map(instruction => `
                        <div style="margin: 1rem 0; font-size: 1.2rem;">${instruction}</div>
                    `).join('')}
                </div>
                <div id="breathingGuide" style="
                    width: 150px; height: 150px; margin: 2rem auto;
                    border: 3px solid rgba(255,255,255,0.8); border-radius: 50%;
                    display: flex; align-items: center; justify-content: center; font-size: 1.5rem;
                    animation: ${technique === 'breathwork' ? 'breathingPulse 4s ease-in-out infinite' : 'pulse 3s ease-in-out infinite'};
                ">
                    ${technique === 'breathwork' ? 'ðŸ«' : 'ðŸ§˜â€â™€ï¸'}
                </div>
                <div style="display: flex; gap: 2rem; justify-content: center; margin-top: 2rem;">
                    <button onclick="startMeditationSession('${technique}')" style="
                        background: rgba(255,255,255,0.3); color: white; border: 2px solid white;
                        padding: 1rem 2rem; border-radius: 12px; cursor: pointer; font-size: 1.1rem;
                        transition: all 0.3s ease;
                    " onmouseover="this.style.background='rgba(255,255,255,0.5)'"
                       onmouseout="this.style.background='rgba(255,255,255,0.3)'">
                        ðŸš€ Start Session
                    </button>
                    <button onclick="document.body.removeChild(document.getElementById('meditationContainer'))" style="
                        background: rgba(255,255,255,0.2); color: white; border: 2px solid white;
                        padding: 1rem 2rem; border-radius: 12px; cursor: pointer; font-size: 1.1rem;
                        transition: all 0.3s ease;
                    " onmouseover="this.style.background='rgba(255,255,255,0.4)'"
                       onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                        âœ• Close
                    </button>
                </div>
            `;

            meditationContainer.appendChild(content);
            document.body.appendChild(meditationContainer);

            showToast(`ðŸ§˜â€â™€ï¿½ï¿½ ${currentTechnique.title} opened`);
        }

        function startMeditationSession(technique) {
            console.log('Starting meditation session:', technique);
            let timeLeft = 300; // 5 minutes

            const timer = document.getElementById('meditationTimer');
            const instructions = document.getElementById('meditationInstructions');

            instructions.innerHTML = `
                <div style="font-size: 1.5rem; color: rgba(255,255,255,0.9);">
                    ðŸ§˜â€â™€ï¸ Session in progress...<br>
                    <small style="opacity: 0.8;">Focus on your ${technique} practice</small>
                </div>
            `;

            const sessionInterval = setInterval(() => {
                timeLeft--;
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                timer.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;

                if (timeLeft <= 0) {
                    clearInterval(sessionInterval);
                    instructions.innerHTML = `
                        <div style="font-size: 1.5rem; color: rgba(255,255,255,0.9);">
                            âœ¨ Session Complete! âœ¨<br>
                            <small style="opacity: 0.8;">You've completed your ${technique} meditation</small>
                        </div>
                    `;
                    createConfetti();
                    showSoundEffect('ðŸ§˜â€â™€ï¸ MEDITATION COMPLETE!');
                }
            }, 1000);
        }

        // Make all functions global
        window.startBrainScan = startBrainScan;
        window.trackSleep = trackSleep;
        window.startFocusSession = startFocusSession;
        window.selectFocusMode = selectFocusMode;
        window.expandSleepTips = expandSleepTips;
        window.closeSleepTips = closeSleepTips;
        window.viewSleepHistory = viewSleepHistory;
        window.showBrainInfo = showBrainInfo;
        window.changeMeditationBg = changeMeditationBg;
        window.startMeditation = startMeditation;
        window.startMeditationSession = startMeditationSession;

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ðŸš€ NeuroX Loading...');

            // Test challenge functions
            console.log('openChallenge:', typeof window.openChallenge);
            console.log('startChallenge:', typeof window.startChallenge);
            console.log('joinChallenge:', typeof window.joinChallenge);
            console.log('showLeaderboard:', typeof window.showLeaderboard);

            // Close modals when clicking outside
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('modal')) {
                    e.target.classList.remove('active');
                }
            });

            // Advanced features initialization
            initializeAdvancedFeatures();

            setTimeout(function() {
                showToast('ðŸŽ‰ NeuroX Elite Ready! Advanced features activated!');
                console.log('ðŸŽ‰ NEUROX ELITE - Revolutionary features ready!');
            }, 1000);
        });
    </script>
</body>
</html>
